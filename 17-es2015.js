(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"wik/":function(e,n,s){"use strict";s.r(n),s.d(n,"UserConfigModule",(function(){return v}));var i=s("2kYt"),t=s("Tu4v"),r=s("K8Gv"),o=s("EM62"),c=s("sEIs"),b=s("mybp"),a=s("duTG"),u=s("ZTwM"),d=s("1spV"),l=s("JbzU");function p(e,n){1&e&&o.Ob(0,"i",12),2&e&&o.jc("type","sync")("nzSpin",!0)}function h(e,n){1&e&&o.Ob(0,"i",13)}const y=[{path:"",component:(()=>{class e{constructor(e,n){this.route=e,this.user=n,this.queryObj=void 0,this.isAsyncSave=!1,this.userObj=void 0,this.versionErr=!1}get sharedCtrl(){return this.user.shared}ngOnInit(){Promise.resolve().then(e=>{this.queryObj=this.decodeQuery(),this.userObj=this.user.read()}).then(e=>this.checkVersion())}checkVersion(){let e=this.userObj.config.apikey_version,n=this.queryObj.apikey_version||1;Object(r.k)(e)?this.userObj.config.apikey_version=n:e!==n&&(this.versionErr=!0,this.sharedCtrl.modal.warning({nzTitle:"Th\xf4ng b\xe1o !!",nzClosable:!1,nzCancelDisabled:!0,nzContent:'Vui l\xf2ng c\u1eadp nh\u1eadt [ApiKey] <a href="/assets/ApiKeyV2.rar">t\u1ea1i \u0111\xe2y</a> !!'}))}decodeQuery(){try{return JSON.parse(decodeURIComponent(atob(this.route.snapshot.queryParams.key)))}catch(e){throw this.sharedCtrl.alert.error("X\u1ea3y ra l\u1ed7i l\u1ea5y th\xf4ng tin <b>[key]</b>"),e}}onSaveUser(){this.isAsyncSave=!0;let e=this.queryObj,n={cookie_value:"session_id="+e.session_id,csrf_token:e.csrf_token,config:{apikey_version:this.userObj.config.apikey_version},od_user:{id:e.uid,name:e.name,display_name:e.name,company_id:e.company_id,context:e.user_context,email:e.username,base_url:e["web.base.url"],session_id:e.session_id,csrf_token:e.csrf_token}};this.user.updateOne(this.userObj.id,n).subscribe(e=>{this.sharedCtrl.alert.success("C\u1eadp nh\u1eadt xong r\xf9i"),this.isAsyncSave=!1,this.userObj=this.userObj.assign(n),this.userObj.saveBy(this.user.shared)},e=>{this.sharedCtrl.alert.error("X\u1ea3y ra l\u1ed7i c\u1eadp nh\u1eadt > "+e.message),this.isAsyncSave=!1})}}return e.\u0275fac=function(n){return new(n||e)(o.Nb(c.a),o.Nb(t.a))},e.\u0275cmp=o.Hb({type:e,selectors:[["cy-user-config"]],decls:36,vars:6,consts:[[1,"row"],[1,"col-6","form-group"],["nz-input","","id","name",1,"form-control"],["nz-input","","id","token",1,"form-control"],["nz-input","","id","email",1,"form-control"],["nz-input","","id","csrf_token",1,"form-control"],["nz-input","","id","cookie_value",1,"form-control"],["nz-input","","id","od_user",1,"form-control"],[1,"col-12"],["nz-button","",1,"btn-primary",3,"disabled","click"],["nz-icon","",3,"type","nzSpin",4,"ngIf"],["nz-icon","","type","save",4,"ngIf"],["nz-icon","",3,"type","nzSpin"],["nz-icon","","type","save"]],template:function(e,n){1&e&&(o.Tb(0,"div"),o.Dc(1),o.ec(2,"json"),o.Sb(),o.Tb(3,"form"),o.Tb(4,"div",0),o.Tb(5,"div",1),o.Tb(6,"label"),o.Dc(7,"H\u1ecd v\xe0 T\xean: "),o.Sb(),o.Ob(8,"input",2),o.Sb(),o.Tb(9,"div",1),o.Tb(10,"label"),o.Dc(11,"M\xe3 ND: "),o.Sb(),o.Ob(12,"input",3),o.Sb(),o.Tb(13,"div",1),o.Tb(14,"label"),o.Dc(15,"E-mail: "),o.Sb(),o.Ob(16,"input",4),o.Sb(),o.Tb(17,"div",1),o.Tb(18,"label"),o.Dc(19,"csrf_token: "),o.Sb(),o.Ob(20,"input",5),o.Sb(),o.Tb(21,"div",1),o.Tb(22,"label"),o.Dc(23,"cookie_value: "),o.Sb(),o.Ob(24,"input",6),o.Sb(),o.Tb(25,"div",1),o.Tb(26,"label"),o.Dc(27,"Odoo User: "),o.Sb(),o.Ob(28,"input",7),o.Sb(),o.Sb(),o.Tb(29,"div",0),o.Tb(30,"div",8),o.Tb(31,"button",9),o.ac("click",(function(){return n.onSaveUser()})),o.Bc(32,p,1,2,"i",10),o.Bc(33,h,1,0,"i",11),o.Tb(34,"span"),o.Dc(35,"C\u1eadp nh\u1eadt"),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&e&&(o.zb(1),o.Ec(o.fc(2,4,n.queryObj)),o.zb(30),o.jc("disabled",n.isAsyncSave||n.versionErr),o.zb(1),o.jc("ngIf",n.isAsyncSave),o.zb(1),o.jc("ngIf",!n.isAsyncSave))},directives:[b.b,a.a,u.a,d.a,i.n,l.a],pipes:[i.h],styles:[".ts24-key[_ngcontent-%COMP%]   .ant-modal-body[_ngcontent-%COMP%]{padding:12px}"]}),e})()}];let v=(()=>{class e{}return e.\u0275mod=o.Lb({type:e}),e.\u0275inj=o.Kb({factory:function(n){return new(n||e)},imports:[[i.b,c.g.forChild(y),a.c,b.e,l.b]]}),e})()}}]);