"use strict";(self.webpackChunkTS24AppWeb=self.webpackChunkTS24AppWeb||[]).push([[426],{6418:(ue,H,u)=>{},3996:(ue,H,u)=>{u.d(H,{P:()=>Y});var S=u(1963),e=u(857),b=u(5e3);let V=(()=>{class v{constructor(z){this.srv=z}get userCtrl(){return this.srv.inj.get(e.a)}getUrlApi(z){let T=this.userCtrl.read().id;return this.srv.config().read().fixUrl(`odrest/${T}/${z}`)}odooCfig(){return this.srv.config().read().api_ticket}odooUser(){return this.userCtrl.read().od_user}get client(){return this.srv.client()}sendGet(z,T,y){return y=Object.assign({alert:!0},y,{params:T}),this.client.send("GET",z,y)}sendPost(z,T,y){return y=Object.assign({alert:!0},y,{body:T}),this.client.send("POST",z,y)}fixPage(z){return Object.assign({size:80},z)}}return v.\u0275fac=function(z){return new(z||v)(b.LFG(S.X))},v.\u0275prov=b.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})(),s=(()=>{class v extends V{nameSearch(z){return this.sendGet(this.getUrlApi(`find-user/${z}`))}loadUsers(z){let T=this.getUrlApi(`find-assign-by-userid/${z.join(",")}`);return this.sendGet(T)}}return v.\u0275fac=function(){let E;return function(T){return(E||(E=b.n5z(v)))(T||v)}}(),v.\u0275prov=b.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})(),P=(()=>{class v extends V{searchRead(z,T){let y=this.getUrlApi("get-partner"),m=Object.assign(Object.assign({},z),this.fixPage(T));return this.sendGet(y,m)}getDetail(z){return this.sendGet(this.getUrlApi(`get-partner-byid/${z}`))}createOne(z){let T=this.getUrlApi("create-partner");return this.sendPost(T,z,{alert:!1})}}return v.\u0275fac=function(){let E;return function(T){return(E||(E=b.n5z(v)))(T||v)}}(),v.\u0275prov=b.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();var Z=u(9646);let B=(()=>{class v extends V{searchRead(z,T){let y=this.getUrlApi("get-ticket"),m=Object.assign(Object.assign({},z),this.fixPage(T));return this.sendGet(y,m)}getTicketOdooById(z){return this.sendGet(this.getUrlApi(`get-ticket-web?id=${z}`))}getTicketOdooByLink(z){return this.sendGet(this.getUrlApi(`get-ticket-web?link=${z}`))}getDetail(z){return this.sendGet(this.getUrlApi(`get-ticket-byid/${z}`))}newTicket(z){return this.createAll(z,"create_ticket")}updateTicket(z){return this.createAll(z,"update_ticket")}addNote(z){return this.createAll(z,"add_note")}getNoteDetail(z){return(0,Z.of)({id:z})}closeTicket(z){return this.createAll(z,"close_ticket")}createAll(z,T,y){let m=this.getUrlApi(`send/${T}/${z}`);return this.sendPost(m,y,{alert:!1})}}return v.\u0275fac=function(){let E;return function(T){return(E||(E=b.n5z(v)))(T||v)}}(),v.\u0275prov=b.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();var U=u(515);u(6418);let Q=(()=>{class v extends V{searchRead(z,T){return this.sendGet(this.getUrlApi("get-team"))}nameSearch(z){return U.E}}return v.\u0275fac=function(){let E;return function(T){return(E||(E=b.n5z(v)))(T||v)}}(),v.\u0275prov=b.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})(),J=(()=>{class v extends V{searchRead(z,T){return this.sendGet(this.getUrlApi("get-topic"))}}return v.\u0275fac=function(){let E;return function(T){return(E||(E=b.n5z(v)))(T||v)}}(),v.\u0275prov=b.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();var j=u(8505);let q=(()=>{class v extends V{getCategories(z,T){return this.sendGet(this.getUrlApi("get-category"))}getStages(){return this.sendGet(this.getUrlApi("get-stage"))}loadAllInOne(z){return this.sendGet(this.getUrlApi(`get-all/${z}`)).pipe((0,j.b)(T=>{this.srv.shared().catalogs=Object.assign({},this.srv.shared().catalogs,T)}))}}return v.\u0275fac=function(){let E;return function(T){return(E||(E=b.n5z(v)))(T||v)}}(),v.\u0275prov=b.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})(),Y=(()=>{class v{constructor(z,T,y,m,c,C){this.user=z,this.partner=T,this.ticket=y,this.team=m,this.topic=c,this.cate=C}}return v.\u0275fac=function(z){return new(z||v)(b.LFG(s),b.LFG(P),b.LFG(B),b.LFG(Q),b.LFG(J),b.LFG(q))},v.\u0275prov=b.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()},5212:(ue,H,u)=>{u.d(H,{n:()=>St});var S=u(655),e=u(5e3),b=u(3075),V=u(9808),s=u(9690),P=u(6305),Z=u(7251),B=u(857);function U(a,h){return!!(0,s.Ft)(a)||!(0,s.Ft)(a.get(h))&&a.get(h)._pendingDirty}function Q(a,h,t){var n,o;h=h||!1;const p=[];null!==(n=null==(t=Object.assign({},t))?void 0:t.create_team_note)&&void 0!==n&&n&&(function ee(a,h){var t,n,o,r,p,g;h.push(`Danh m\u1ee5c: ${null===(t=a.od_category)||void 0===t?void 0:t.name}`),h.push(`Danh m\u1ee5c ph\u1ee5: ${null===(n=a.od_category_sub)||void 0===n?void 0:n.name}`),h.push(`Ph\xe2n c\xf4ng cho: ${null===(o=a.od_assign)||void 0===o?void 0:o.name}`),h.push(`Nh\xf3m Team: ${null===(r=a.od_team)||void 0===r?void 0:r.name}`),h.push(`Qu\u1ea3n l\xfd Team: ${null===(p=a.od_team_head)||void 0===p?void 0:p.name}`),h.push(`Ch\u1ee7 \u0111\u1ec1: ${null===(g=a.od_subject_type)||void 0===g?void 0:g.name}`)}(a,p),p.push("-".repeat(20))),(0,s.EU)(a.email)||p.push(`${a.email}`);const g=null!==(o=t.subject)&&void 0!==o?o:q(a);return(0,s.EU)(g)||p.push(g),(0,s.EU)(a.tax_code)||p.push(`- M\xe3 s\u1ed1 thu\u1ebf / M\xe3 \u0111\u01a1n v\u1ecb: ${a.tax_code}`),(0,s.EU)(a.customer_name)||p.push(`- T\xean kh\xe1ch h\xe0ng: ${a.customer_name}`),(0,s.EU)(a.email)||p.push(`- Email: ${a.email}`),p.push(h?J(a).join("\n"):t.body||a.body||J(a).join("\n")),p.push("--------------------------------------------"),p.push(h?j(a).join("\n"):t.note||a.note||j(a).join("\n")),p.join("\n")}function J(a,h){const t=[];let n=a.edit_ticket||!1;if(U(h,"phone")&&!(0,s.EU)(a.phone)&&(t.push(`- S\u1ed1 \u0111i\u1ec7n tho\u1ea1i li\xean h\u1ec7: ${a.phone}`),n=!0),U(h,"content_required")&&!(0,s.EU)(a.content_required)){let o=a.content_required,r=(0,s.EU)(a.soft_name)?"":`${a.soft_name} - `,p=(0,s.Ft)(a.support_help)||(0,s.EU)(a.support_help.support)?"":` - ${a.support_help.support}`;t.push(`- N\u1ed9i dung c\u1ea7n h\u1ed7 tr\u1ee3: ${r}${o}${p}`),n=!0}return U(h,"full_name")&&!(0,s.EU)(a.full_name)&&(t.push(`- Nh\xe2n vi\xean g\u1eedi th\xf4ng tin: ${a.full_name}`),n=!0),U(h,"reception_time")&&!(0,s.EU)(a.reception_time)&&(t.push(`- Th\u1eddi gian ti\u1ebfp nh\u1eadn: ${a.reception_time}`),n=!0),a.edit_ticket=n,t}function j(a,h){const t=[];let n=a.edit_ticket||!1;return U(h,"full_name")&&!(0,s.EU)(a.full_name)&&(t.push(`- H\u1ecd t\xean: ${a.full_name}`),n=!0),U(h,"support_help")&&!(0,s.Ft)(a.support_help)&&(t.push(`- H\xecnh th\u1ee9c h\u1ed7 tr\u1ee3: ${a.support_help.value}`),n=!0),U(h,"group_help")&&!(0,s.Ft)(a.group_help)&&(t.push(`- Nh\xf3m h\u1ed7 tr\u1ee3: ${a.group_help.title}`),n=!0),U(h,"content_help")&&!(0,s.EU)(a.content_help)&&(t.push(`- N\u1ed9i dung \u0111\xe3 h\u1ed7 tr\u1ee3: ${a.content_help} `),n=!0),U(h,"complete_time")&&!(0,s.EU)(a.complete_time)&&(t.push(`- Th\u1eddi gian ho\xe0n t\u1ea5t: ${a.complete_time}`),n=!0),a.edit_ticket=n,t}function q(a){if(!(0,s.EU)(a.tax_code)&&!(0,s.G5)(a.chanels))return`[HT-${a.chanels[0].code}]-${a.user_code}-${a.tax_code}-${a.ticket_on}`}var Y=u(8505),v=u(3900),E=u(4351),z=u(1005),T=u(5698),y=u(6805),c=u(8306),C=u(9646),L=u(7445),te=u(515),ie=u(913),pe=(u(6418),u(3996));let Oe=(()=>{class a{constructor(){}ngOnInit(){}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["cy-ticket-web"]],decls:2,vars:0,template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"ticket-web works!"),e.qZA())},styles:[""]}),a})();var Ie=u(7715),Se=u(6431),Ce=u(5969),xe=u(8590),le=u(7957),se=u(2683),ce=u(6114),I=u(3868),D=u(6042),F=u(2643);function G(a,h){1&a&&(e.TgZ(0,"div",3)(1,"label",36),e._uU(2,"T\xean c\xf4ng ty"),e.qZA(),e.TgZ(3,"nz-input-group",37),e._UZ(4,"input",38)(5,"input",39),e.qZA()())}function K(a,h){1&a&&(e.TgZ(0,"div",3)(1,"label",40),e._uU(2,"Ng\u01b0\u1eddi li\xean h\u1ec7 (C\xe1 nh\xe2n *)"),e.qZA(),e.TgZ(3,"nz-input-group",37),e._UZ(4,"input",41)(5,"input",42),e.qZA()())}function ne(a,h){1&a&&(e.TgZ(0,"div",3)(1,"label",43),e._uU(2,"\u0110\u1ecba ch\u1ec9"),e.qZA(),e._UZ(3,"input",44),e.qZA())}function $e(a,h){1&a&&(e.TgZ(0,"div",3)(1,"label",45),e._uU(2,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i (C\xe1 nh\xe2n)"),e.qZA(),e._UZ(3,"input",46),e.qZA())}function Je(a,h){1&a&&e._UZ(0,"i",47)}function Ne(a,h){1&a&&e._UZ(0,"i",48)}function Qe(a,h){if(1&a&&(e.TgZ(0,"button",49),e._uU(1,"T\xecm theo API"),e.qZA()),2&a){const t=e.oxw();e.Q6J("disabled",t.disabled)}}function je(a,h){1&a&&e._UZ(0,"i",47)}function Ee(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){return e.CHM(t),e.oxw().onCreateContact("person")}),e.YNc(1,je,1,0,"i",20),e.TgZ(2,"span"),e._uU(3,"+ C\xe1 nh\xe2n"),e.qZA()()}if(2&a){const t=e.oxw();e.Q6J("disabled",t.disabled_person),e.xp6(1),e.Q6J("ngIf",t.isAsyncCreate)}}function we(a,h){1&a&&e._UZ(0,"i",47)}function qe(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){return e.CHM(t),e.oxw().onCreateContact("company")}),e.YNc(1,we,1,0,"i",20),e.TgZ(2,"span"),e._uU(3,"+ C\xf4ng ty"),e.qZA()()}if(2&a){const t=e.oxw();e.Q6J("disabled",t.disabled_company),e.xp6(1),e.Q6J("ngIf",t.isAsyncCreate)}}const me=function(){return{standalone:!0}};function Ge(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"nz-input-group")(1,"label",51),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().autoUpdate=o}),e.TgZ(2,"span"),e._uU(3,"C\u1eadp nh\u1eadt khi ch\u1ecdn"),e.qZA()(),e.TgZ(4,"button",52),e.NdJ("click",function(){return e.CHM(t),e.oxw().onBtnSelectRow()}),e._uU(5,"Ch\u1ecdn"),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.autoUpdate)("ngModelOptions",e.DdM(2,me))}}let He=(()=>{class a{constructor(t,n,o,r,p,g,k){this.cdRef=t,this.od=n,this.fb=o,this.modalRef=r,this.config=p,this.userCtrl=g,this.shared=k,this.fieldSearch=[],this.gridColumns=[],this.valueSearch={},this.totalRow=void 0,this.searchLimit=100,this.isSearch=!1,this.chkCreate=!1,this.chkUpForm=!1,this.isAsyncCreate=!1,this.autoUpdate=!0,this.searchLog="",this.filterOper="eq",this.resultColumns=[],this.resultData=[],this.agRowClick=void 0,this.gridApi=void 0,this.agOption={domLayout:"normal",suppressRowClickSelection:!1,rowSelection:"single",defaultColDef:{editable:!0,enableValue:!0,enableRowGroup:!0,enablePivot:!1,sortable:!1,resizable:!0,filter:!1}},this.searchWhere=[{label:"MST",value:"vat",checked:!0},{label:"E-mail",value:"email",checked:!0},{label:"C\xe1 nh\xe2n",value:"is_person",checked:!0}]}ngOnInit(){this.initTaoForm(),this.createGridCols(),this.initialize(),this.onSearch(null,!1)}initialize(){}onGridReady(t){this.gridApi=t.api,this.gridApi.getColumnDef("vat").cellStyle={color:"red","font-weight":"bold"},xe.q.getColDef(this.gridApi,"vat",o=>{o.cellRenderer=r=>`<a href="${this.getUrlView(r)}" target="_blank" class="open_link">${r.data.vat}</i></a>`})}ngAfterViewInit(){}getUrlView(t){var n;let o=this.userCtrl.read().od_config,r=o.api_url,p=null!==(n=o.view_partner)&&void 0!==n?n:"#",g=p.startsWith(r)?p:r+""+p;return console.log(g,t.data),s.K$.replaceQuery(g,{partnerId:t.data.id})}initTaoForm(){this.fieldSearch=[{key:"vat",label:"MST",operator:null},{key:"email",label:"Email",operator:null},{key:"comp_name",label:"T\xean c\xf4ng ty",operator:null},{key:"comp_id",label:"C\xf4ng ty ID",operator:null},{key:"phone",label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",operator:null},{key:"street",label:"\u0110\u1ecba ch\u1ec9",operator:null},{key:"customer_name",label:"Ng\u01b0\u1eddi li\xean h\u1ec7",operator:null},{key:"customer_id",label:"",operator:null}],this.searchFrm=this.fb.group({}),this.fieldSearch.forEach(t=>{let n=this.fb.control(this.valueSearch[t.key]||t.value);this.searchFrm.addControl(t.key,n)})}createGridCols(){this.resultColumns=[{headerName:"",field:"checked",colId:"checked",width:40,checkboxSelection:!0,headerCheckboxSelection:!0},{headerName:"M\xe3 s\u1ed1 thu\u1ebf",field:"vat",colId:"vat",width:130},{headerName:"T\xean hi\u1ec3n th\u1ecb",field:"display_name",colId:"display_name",width:300},{headerName:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",field:"mobile",colId:"mobile",width:129},{headerName:"Ng\u01b0\u1eddi li\xean h\u1ec7",field:"name",colId:"name",width:168},{headerName:"E-mail",field:"email",colId:"email",width:230},{headerName:"T\xean c\xf4ng ty",field:"comp_name",colId:"comp_name",width:260}]}get isExistData(){return void 0!==this.gridApi&&this.gridApi.getSelectedNodes().length>0}get disabled(){return this.isSearch||this.isAsyncCreate}get disabled_person(){return!0}get disabled_company(){return!0}fieldTrackBy(t,n){return n?n.key:t}setValueFrm(t,n,o){if(o=o||[t],this.agRowClick=this.agRowClick||{},(0,s.EU)(n)){let r=o.map(p=>this.agRowClick[p]).filter(p=>!(0,s.EU)(p));n=r.length>0?r[0]:void 0}this.searchFrm.get(t).setValue(n)}getValueFrm(){return this.searchFrm.getRawValue()}onCloseRef(){this.modalRef.destroy()}onResetForm(){this.searchFrm.reset(this.valueSearch),this.chkUpForm=!1}formToObj(t){if(!this.searchFrm.invalid){let n=this.searchFrm.value;return 0===(t=(t=t||Object.keys(n)).filter(o=>!(0,s.EU)(n[o]))).length?void 0:t.map(o=>({[o]:n[o].trim()})).reduce((o,r)=>Object.assign(Object.assign({},o),r),{})}}onAgRowClick(t){this.agRowClick=t.data,(0,s.Ft)(this.agRowClick)||(this.setValueFrm("vat"),this.setValueFrm("comp_name",null,["display_name","comp_name"]),this.setValueFrm("comp_id"),this.setValueFrm("street"),this.chkUpForm&&(this.setValueFrm("customer_id",null),this.setValueFrm("customer_name",null),this.setValueFrm("email",null),this.setValueFrm("phone",null)),!this.agRowClick.is_company&&this.chkUpForm&&(this.setValueFrm("customer_id",null,["id"]),this.setValueFrm("email"),this.setValueFrm("customer_name",null,["name"]),this.setValueFrm("phone")))}onClickUp(){this.chkUpForm||this.onResetForm()}onBtnSelectRow(){let t=this.gridApi.getSelectedRows();if(0===t.length)return void this.shared.alert.warning("<b>Vui l\xf2ng ch\u1ecdn 1 d\xf2ng.</b>");let n=t[0];Object.keys(n).forEach(o=>n[o]=n[o]?n[o]:void 0),this.modalRef.destroy({item:n,autoUpdate:this.autoUpdate})}onSearch(t,n=!0){var o,r;t=t||this.searchWhere.filter(k=>k.checked).map(k=>k.value);let p=null!==(o=this.formToObj(t))&&void 0!==o?o:{};if((0,s.gS)(p))return void(n&&this.shared.alert.warning("<b>Vui l\xf2ng nh\u1eadp th\xf4ng tin t\xecm ki\u1ebfm.</b>"));t.includes("is_person")&&(p.is_company=!1);let g=null!==(r=this.filterOper)&&void 0!==r?r:"like";"like"!=g&&Object.keys(p).forEach(k=>{p[k]=`${g}:${p[k]}`}),this.totalRow=void 0,this.isSearch=!0,console.log(`Tim kiem thong tin: ${JSON.stringify(p)}`),this.od.partner.searchRead(p).subscribe({next:k=>{this.isSearch=!1,this.resultData=k,this.cdRef.detectChanges(),this.shared.alert.success(`T\xecm \u0111\u01b0\u1ee3c: <b>${k.length} k\u1ebft qu\u1ea3.</b>`)},error:k=>{this.isSearch=!1,this.cdRef.detectChanges()}})}onCreateContact(t){if(!["person","company"].includes(t))return;this.isAsyncCreate=!0;let n=this.getValueFrm(),o={phone:n.phone,mobile:n.phone,email:n.email,company_type:t};if("person"===t){if((0,s.EU)(n.comp_id))return this.shared.alert.warning("<b>Vui l\xf2ng ch\u1ecdn c\xf4ng ty.</b>"),void(this.isAsyncCreate=!1);o=Object.assign(o,{name:n.customer_name||n.email,parent_id:n.comp_id})}else o=Object.assign(o,{name:n.comp_name||n.email,vat:n.vat,street:n.street,parent_id:!1});let r="company"==t?"C\xf4ng ty":"C\xe1 nh\xe2n";this.od.partner.createOne(o).subscribe({next:p=>{this.isAsyncCreate=!1,this.gridApi.setRowData([p]),this.cdRef.detectChanges(),this.shared.alert.success(`[${p.id}] T\u1ea1o <b>${r}</b> th\xe0nh c\xf4ng`)},error:p=>{this.isAsyncCreate=!1,this.cdRef.detectChanges(),this.shared.alert.error(`X\u1ea3y ra l\u1ed7i t\u1ea1o <b>${r}</b> > ${p.message} !`)}})}onCellClicked(t){console.log(t)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(e.sBO),e.Y36(pe.P),e.Y36(b.qu),e.Y36(le.Lf),e.Y36(Se.t),e.Y36(B.a),e.Y36(P.W))},a.\u0275cmp=e.Xpm({type:a,selectors:[["cy-search-user"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ce.P,5),2&t){let o;e.iGM(o=e.CRH())&&(n.grid=o.first)}},inputs:{fieldSearch:"fieldSearch",gridColumns:"gridColumns",valueSearch:"valueSearch"},decls:57,vars:33,consts:[["id","search-user-frm",1,"partner-search-wrapper"],[1,"row-form","form-body","pd-lr-5",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-6","form-group"],["for","vat"],["nz-input","","id","vat","formControlName","vat",1,"form-control","border","border-success"],["for","email"],["nz-input","","id","email","formControlName","email",1,"form-control","border","border-success"],["class","col-6 form-group",4,"ngIf"],[1,"row","mt-2"],[1,"col-12","d-flex","align-items-center"],[1,"text-info"],[1,"ml-2","w-none",3,"ngModel","ngModelOptions","ngModelChange"],[2,"font-weight","bold"],[1,"ml-2",3,"ngModel","ngModelOptions","ngModelChange"],["nz-radio","","nzValue","like"],["nz-radio","","nzValue","eq"],[1,"row","tool"],["nz-button","","nzDanger","","type","button",3,"disabled","click"],["nz-button","","nzType","primary",3,"disabled"],["class","fal fa-sync-alt fa-spin",4,"ngIf"],["class","fas fa-cog",4,"ngIf"],["nz-button","","type","button",3,"disabled",4,"ngIf"],["nz-button","","type","button",3,"disabled","click",4,"ngIf"],["nz-checkbox","",3,"ngModel","ngModelOptions","disabled","ngModelChange","click"],["nz-checkbox","",3,"ngModel","ngModelOptions","disabled","ngModelChange"],[1,"row","row-log"],[1,"col-12",3,"innerHtml"],[1,"row","row-data"],[1,"col-12"],[3,"columns","theme","gridRows","height","options","rowClicked","gridReady"],["grid",""],[1,"row","row-footer"],[1,"col-12","col-right"],[4,"ngIf"],["nz-button","","nzDanger","",3,"click"],["for","comp_name"],[1,"d-flex"],["nz-input","","id","comp_name","formControlName","comp_name",1,"form-control"],["nz-input","","id","comp_id","formControlName","comp_id",1,"form-control","ml-1","w-5","border","border-danger","font-weight-bold"],["for","customer_name"],["nz-input","","id","customer_name","formControlName","customer_name",1,"form-control"],["nz-input","","id","customer_id","formControlName","customer_id",1,"form-control","ml-1","w-5","border","border-danger","font-weight-bold"],["for","street"],["nz-input","","id","street","formControlName","street",1,"form-control"],["for","phone"],["nz-input","","id","phone","formControlName","phone",1,"form-control"],[1,"fal","fa-sync-alt","fa-spin"],[1,"fas","fa-cog"],["nz-button","","type","button",3,"disabled"],["nz-button","","type","button",3,"disabled","click"],["nz-checkbox","",3,"ngModel","ngModelOptions","ngModelChange"],["nz-button","","nzType","primary",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return n.onSearch()}),e.TgZ(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"M\xe3 s\u1ed1 thu\u1ebf"),e.qZA(),e._UZ(6,"input",5),e.qZA(),e.TgZ(7,"div",3)(8,"label",6),e._uU(9,"Email (C\xe1 nh\xe2n *)"),e.qZA(),e._UZ(10,"input",7),e.qZA(),e.YNc(11,G,6,0,"div",8),e.YNc(12,K,6,0,"div",8),e.YNc(13,ne,4,0,"div",8),e.YNc(14,$e,4,0,"div",8),e.qZA(),e.TgZ(15,"div",9)(16,"div",10)(17,"label",11),e._uU(18,"T\xecm theo: "),e.qZA(),e.TgZ(19,"nz-checkbox-group",12),e.NdJ("ngModelChange",function(r){return n.searchWhere=r}),e.qZA()()(),e.TgZ(20,"div",9)(21,"div",10)(22,"label",13),e._uU(23,"T\xf9y ch\u1ec9nh: "),e.qZA(),e.TgZ(24,"nz-radio-group",14),e.NdJ("ngModelChange",function(r){return n.filterOper=r}),e.TgZ(25,"label",15),e._uU(26,"T\xecm g\u1ea7n \u0111\xfang"),e.qZA(),e.TgZ(27,"label",16),e._uU(28,"T\xecm ch\xednh x\xe1c"),e.qZA()()()(),e.TgZ(29,"div",17)(30,"div",10)(31,"button",18),e.NdJ("click",function(){return n.onResetForm()}),e.TgZ(32,"span"),e._uU(33,"L\u1ea5y t\u1eeb Form"),e.qZA()(),e.TgZ(34,"button",19),e.YNc(35,Je,1,0,"i",20),e.YNc(36,Ne,1,0,"i",21),e.TgZ(37,"span"),e._uU(38,"T\xecm theo TS24"),e.qZA()(),e.YNc(39,Qe,2,1,"button",22),e.YNc(40,Ee,4,2,"button",23),e.YNc(41,qe,4,2,"button",23),e.TgZ(42,"label",24),e.NdJ("ngModelChange",function(r){return n.chkUpForm=r})("click",function(){return n.onClickUp()}),e._uU(43,"Up+"),e.qZA(),e.TgZ(44,"label",25),e.NdJ("ngModelChange",function(r){return n.chkCreate=r}),e._uU(45,"T\u1ea1o..."),e.qZA()()()(),e.TgZ(46,"div",26),e._UZ(47,"div",27),e.qZA(),e.TgZ(48,"div",28)(49,"div",29)(50,"cy-custom-grid",30,31),e.NdJ("rowClicked",function(r){return n.onAgRowClick(r)})("gridReady",function(r){return n.onGridReady(r)}),e.qZA()()(),e.TgZ(52,"div",32)(53,"div",33),e.YNc(54,Ge,6,3,"nz-input-group",34),e.TgZ(55,"button",35),e.NdJ("click",function(){return n.onCloseRef()}),e._uU(56,"\u0110\xf3ng"),e.qZA()()()()),2&t){const o=e.MAs(51);e.xp6(1),e.Q6J("formGroup",n.searchFrm),e.xp6(10),e.Q6J("ngIf",n.chkCreate),e.xp6(1),e.Q6J("ngIf",n.chkCreate),e.xp6(1),e.Q6J("ngIf",n.chkCreate),e.xp6(1),e.Q6J("ngIf",n.chkCreate),e.xp6(5),e.Q6J("ngModel",n.searchWhere)("ngModelOptions",e.DdM(29,me)),e.xp6(5),e.Q6J("ngModel",n.filterOper)("ngModelOptions",e.DdM(30,me)),e.xp6(7),e.Q6J("disabled",n.disabled),e.xp6(3),e.Q6J("disabled",n.disabled),e.xp6(1),e.Q6J("ngIf",n.isSearch),e.xp6(1),e.Q6J("ngIf",!n.isSearch),e.xp6(3),e.Q6J("ngIf",!1),e.xp6(1),e.Q6J("ngIf",n.chkCreate),e.xp6(1),e.Q6J("ngIf",n.chkCreate),e.xp6(1),e.Q6J("ngModel",n.chkUpForm)("ngModelOptions",e.DdM(31,me))("disabled",n.disabled),e.xp6(2),e.Q6J("ngModel",n.chkCreate)("ngModelOptions",e.DdM(32,me))("disabled",n.disabled),e.xp6(3),e.Q6J("innerHtml",n.searchLog,e.oJD),e.xp6(3),e.Q6J("columns",n.resultColumns)("theme",o.themeList.balham)("gridRows",n.resultData)("height","200px")("options",n.agOption),e.xp6(4),e.Q6J("ngIf",n.isExistData)}},directives:[b._Y,b.JL,b.sg,b.Fj,b.JJ,b.u,V.O5,se.w,ce.ub,b.On,I.Dg,I.Of,D.ix,F.dQ,ce.Ie,Ce.P],styles:['#search-user-frm [class*=" row-"]{margin-bottom:10px}#search-user-frm .ant-divider{top:unset!important;border-left:1px solid #b42020}#search-user-frm .empty_row{height:200px!important}#search-user-frm .form-body{padding:5px;border-radius:2px;border:1px solid #ebedf0}#search-user-frm .form-body .row .ant-input:not(textarea){height:27px;border-radius:0}#search-user-frm .form-body .row.tool{margin-top:5px}#search-user-frm .form-body .row.tool .search-limit{width:50px;margin-right:10px}#search-user-frm .row-data .ag-body-viewport{min-height:50px;max-height:200px}#search-user-frm .row-footer{margin:5px -10px 0;padding:10px 6px 0 16px;text-align:right;border-top:2px solid #e8e8e8;border-radius:0 0 4px 4px}#search-user-frm .row-footer .col-left1{text-align:left;padding-left:0;margin-left:-4px}#search-user-frm .row-footer .col-left1 .total{font-weight:700;margin-left:5px;color:var(--bs-danger)}#search-user-frm .row-footer .col-right{padding-right:5px}#search-user-frm .row-footer .col-right .ant-btn:last-child{margin-right:0}#search-user-frm .row-footer .col-right .ant-input-group{display:inline-flex;align-items:center;width:unset!important;margin-right:.5rem!important}#search-user-frm a.open_link{text-decoration:underline;color:var(--blue)!important}\n'],encapsulation:2,changeDetection:0}),a})();var ze=u(1047);function We(a,h){1&a&&e._UZ(0,"i",15)}function Ae(a,h){1&a&&e._UZ(0,"i",16)}let De=(()=>{class a{constructor(t,n,o,r){this.userCtrl=t,this.shared=n,this.fb=o,this.modal=r,this.isWaitGet=!1,this.userDetail=void 0}ngOnInit(){this.userDetail=this.userCtrl.read(),this.form=this.fb.group({email:[{value:this.userDetail.email,disabled:!0},b.kI.required],token:[{value:this.userDetail.access_token,disabled:!0},b.kI.required],password:[void 0,b.kI.required]})}nzOnCancel(){this.modal.destroy({})}nzOnOk(){if(this.form.invalid)return void this.shared.alert.warning("Vui l\xf2ng nh\u1eadp \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin.");this.isWaitGet=!0;let t=this.form.getRawValue();try{s.DS.encode(t.password)}catch(n){this.shared.alert.error(`L\u1ed7i m\xe3 h\xf3a m\u1eadt kh\u1ea9u: ${n}`)}this.userCtrl.loginTs24(t).subscribe({next:n=>{this.isWaitGet=!1,this.modal.destroy({data:n})},error:n=>{this.isWaitGet=!1,console.log("\u0110\u0103ng nh\u1eadp TS24pro l\u1ed7i. "+n)}})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(B.a),e.Y36(P.W),e.Y36(b.qu),e.Y36(le.Lf))},a.\u0275cmp=e.Xpm({type:a,selectors:[["cy-login-ts24"]],decls:35,vars:3,consts:[[1,"get-ticket-web",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12"],[1,"form-group"],["for","email_ts24"],[1,"required"],["nz-input","","placeholder","Nh\u1eadp e-mail","id","email_ts24","formControlName","email","type","email","required","",1,"note"],["for","token"],["nz-input","","placeholder","Nh\u1eadp token","id","token","formControlName","token","required","",1,"note"],["for","password"],["nz-input","","placeholder","Nh\u1eadp m\u1eadt kh\u1ea9u TS24","id","password","formControlName","password","type","password","required","",1,"note"],["nz-button","","type","submit",2,"width","unset"],["class","fa-regular fa-arrows-spin fa-spin",4,"ngIf"],["class","fa-regular fa-floppy-disks",4,"ngIf"],["nz-button","","type","button",3,"click"],[1,"fa-regular","fa-arrows-spin","fa-spin"],[1,"fa-regular","fa-floppy-disks"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.nzOnOk()}),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"E-mail "),e.TgZ(6,"span",5),e._uU(7,"(*)"),e.qZA(),e._uU(8,": "),e.qZA(),e._UZ(9,"input",6),e.qZA()(),e.TgZ(10,"div",2)(11,"div",3)(12,"label",7),e._uU(13,"Token "),e.TgZ(14,"span",5),e._uU(15,"(*)"),e.qZA(),e._uU(16,": "),e.qZA(),e._UZ(17,"input",8),e.qZA()(),e.TgZ(18,"div",2)(19,"div",3)(20,"label",9),e._uU(21,"MK TS24 "),e.TgZ(22,"span",5),e._uU(23,"(*)"),e.qZA(),e._uU(24,": "),e.qZA(),e._UZ(25,"input",10),e.qZA()()(),e.TgZ(26,"div",1)(27,"div",2)(28,"button",11),e.YNc(29,We,1,0,"i",12),e.YNc(30,Ae,1,0,"i",13),e.TgZ(31,"i"),e._uU(32,"L\u1ea5y m\xe3 k\xedch ho\u1ea1t"),e.qZA()(),e.TgZ(33,"button",14),e.NdJ("click",function(){return n.nzOnCancel()}),e._uU(34,"\u0110\xf3ng"),e.qZA()()()()),2&t&&(e.Q6J("formGroup",n.form),e.xp6(29),e.Q6J("ngIf",n.isWaitGet),e.xp6(1),e.Q6J("ngIf",!n.isWaitGet))},directives:[b._Y,b.JL,b.sg,ze.Zp,b.Fj,b.JJ,b.u,b.Q7,D.ix,F.dQ,se.w,V.O5],styles:[""]}),a})();var Ye=u(8406),ke=u(4376),de=u(3677),ve=u(4219);function Ke(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"li",5),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().onMenuClick(r.code)}),e._UZ(1,"i",6),e.TgZ(2,"a"),e._uU(3),e.qZA()()}if(2&a){const t=h.$implicit,n=h.index;e.xp6(1),e.Q6J("ngClass",t.icon),e.xp6(2),e.AsE("",n+1,". ",t.label,"")}}let Fe=(()=>{class a{constructor(){this.allOdooMenuV15=[]}ngAfterViewInit(){}ngOnInit(){}onMenuClick(t){}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["cy-odoo-tool"]],inputs:{ticket:"ticket"},decls:8,vars:3,consts:[["nz-dropdown","","nz-button","","type","button",3,"nzDropdownMenu"],[1,"fa-regular","fa-plus"],["nzMenuToolOdooV15",""],["nz-menu",""],["ngFor","",3,"ngForOf","ngForTrackBy"],["nz-menu-item","",3,"click"],[1,"fa-regular",3,"ngClass"]],template:function(t,n){if(1&t&&(e.TgZ(0,"button",0),e._UZ(1,"i",1),e.TgZ(2,"span"),e._uU(3,"Tool"),e.qZA()(),e.TgZ(4,"nz-dropdown-menu",null,2)(6,"ul",3),e.YNc(7,Ke,4,3,"ng-template",4),e.qZA()()),2&t){const o=e.MAs(5);e.Q6J("nzDropdownMenu",o),e.xp6(7),e.Q6J("ngForOf",n.allOdooMenuV15)("ngForTrackBy",n.trackByAllOdooMenuV15)}},directives:[D.ix,F.dQ,de.cm,se.w,de.wA,de.RR,ve.wO,V.sg,ve.r9,V.mk],styles:[""],encapsulation:2,changeDetection:0}),a})();const Xe=["cChanels"],Me=["cProduct"],et=["ngSlSupportHelp"],tt=["ngSlTicketTags"];function nt(a,h){1&a&&(e.TgZ(0,"div",19)(1,"div",8)(2,"label",39),e._uU(3,"Ng\xe0y "),e.TgZ(4,"span",10),e._uU(5,"(*)"),e.qZA(),e._uU(6,": "),e.qZA(),e._UZ(7,"input",40),e.qZA()())}function Ve(a,h){1&a&&(e.TgZ(0,"div",19)(1,"div",8)(2,"label",41),e._uU(3,"Ticket: "),e.qZA(),e._UZ(4,"input",42),e.qZA()())}function Ze(a,h){1&a&&(e.TgZ(0,"div",12)(1,"div",8)(2,"label",43),e._uU(3,"T\xean NV "),e.TgZ(4,"span",10),e._uU(5,"(*)"),e.qZA(),e._uU(6,": "),e.qZA(),e._UZ(7,"input",44),e.qZA()())}function Ue(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",19)(1,"div",8)(2,"label",45),e._uU(3,"Lo\u1ea1i y\xeau c\u1ea7u h\u1ed7 tr\u1ee3:"),e.qZA(),e.TgZ(4,"ng-select",46),e.NdJ("search",function(o){return e.CHM(t),e.oxw().odSearchItem("od_ticket_type",o)}),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(4),e.Q6J("items",t.odTicketType)("virtualScroll",!0)("loading",t.waitObj.od_ticket_type)}}function Re(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",19)(1,"div",8)(2,"label",47),e._uU(3,"\u0110\u1ed9 \u01b0u ti\xean:"),e.qZA(),e.TgZ(4,"ng-select",48),e.NdJ("search",function(o){return e.CHM(t),e.oxw().odSearchItem("od_priority",o)}),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(4),e.Q6J("virtualScroll",!0)("items",t.odPriorityItems)}}function Le(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",8)(2,"label",49),e._uU(3,"Th\u1ebb -- Tags:"),e.qZA(),e.TgZ(4,"ng-select",50,51),e.NdJ("search",function(o){return e.CHM(t),e.oxw().odSearchItem("od_tags",o)}),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(4),e.Q6J("virtualScroll",!0)("multiple",!0)("items",t.odTagItems)}}function it(a,h){1&a&&(e.TgZ(0,"div",52)(1,"div",8)(2,"nz-input-group",53)(3,"label",54),e._uU(4,"M\xe3 s\u1ed1 thu\u1ebf "),e.TgZ(5,"span",10),e._uU(6,"(*)"),e.qZA(),e._uU(7,": "),e.qZA()(),e.TgZ(8,"nz-input-group",53),e._UZ(9,"input",55)(10,"input",56),e.qZA()()())}function ot(a,h){1&a&&(e.TgZ(0,"div",57)(1,"div",8)(2,"label",58),e._uU(3,"T\xean kh\xe1ch h\xe0ng: "),e.qZA(),e._UZ(4,"input",59),e.qZA()())}function at(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",52)(1,"div",8)(2,"label"),e._uU(3,"Email + KH_ID "),e.TgZ(4,"span",10),e._uU(5,"(*)"),e.qZA(),e._uU(6,": "),e.qZA(),e.TgZ(7,"nz-input-group",53),e._UZ(8,"input",60),e.TgZ(9,"input",61),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().onChangeKhId(o)}),e.qZA()()()()}}function st(a,h){1&a&&(e.TgZ(0,"div",57)(1,"div",8)(2,"label",62),e._uU(3,"S\u1ed1 DT: "),e.qZA(),e._UZ(4,"input",63),e.qZA()())}function rt(a,h){1&a&&(e.TgZ(0,"div",52)(1,"nz-input-group",64)(2,"div",65)(3,"div",8)(4,"label",66),e._uU(5,"N\u1ed9i dung h\u1ed7 tr\u1ee3 "),e.TgZ(6,"span",10),e._uU(7,"(*)"),e.qZA(),e._uU(8,": "),e.qZA(),e._UZ(9,"input",67),e.qZA()(),e.TgZ(10,"div",68)(11,"div",8)(12,"label",69),e._uU(13,"TG ti\u1ebfp nh\u1eadn "),e.TgZ(14,"span",10),e._uU(15,"(*)"),e.qZA(),e._uU(16,": "),e.qZA(),e._UZ(17,"input",70),e.qZA()()()())}function lt(a,h){1&a&&(e.TgZ(0,"div",57)(1,"div",8)(2,"label",71),e._uU(3,"Teamviewer: "),e.qZA(),e._UZ(4,"input",72),e.qZA()())}function ct(a,h){1&a&&(e.TgZ(0,"div",52)(1,"nz-input-group",73)(2,"div",65)(3,"div",8)(4,"label",74),e._uU(5,"N\u1ed9i dung \u0111\xe3 h\u1ed7 tr\u1ecd "),e.TgZ(6,"span",10),e._uU(7,"(*)"),e.qZA(),e._uU(8,": "),e.qZA(),e._UZ(9,"input",75),e.qZA()(),e.TgZ(10,"div",68)(11,"div",8)(12,"label",76),e._uU(13,"TG ho\xe0n th\xe0nh "),e.TgZ(14,"span",10),e._uU(15,"(*)"),e.qZA(),e._uU(16,": "),e.qZA(),e._UZ(17,"input",77),e.qZA()()()())}const oe=function(){return{standalone:!0}};function dt(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",57)(1,"div",8)(2,"label",78),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().isDeleteContentHelp=o}),e._uU(3,"N\u1ed9i dung m\u1eabu"),e.qZA(),e.TgZ(4,"ng-select",79),e.NdJ("change",function(o){return e.CHM(t),e.oxw().onChangeCHelp(o)}),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.isDeleteContentHelp)("ngModelOptions",e.DdM(3,oe)),e.xp6(2),e.Q6J("items",t.helps)}}function ut(a,h){if(1&a&&(e.TgZ(0,"div",12)(1,"div",8)(2,"label",80),e._uU(3,"H\xecnh th\u1ee9c h\u1ed7 tr\u1ee3 "),e.TgZ(4,"span",10),e._uU(5,"(*)"),e.qZA(),e._uU(6,": "),e.qZA(),e._UZ(7,"ng-select",81,82),e.qZA()()),2&a){const t=e.oxw();e.xp6(7),e.Q6J("items",t.chanels)("virtualScroll",!0)}}function pt(a,h){if(1&a&&(e.TgZ(0,"div",12)(1,"div",8)(2,"label",83),e._uU(3,"T\xean ph\u1ea7n m\u1ec1m "),e.TgZ(4,"span",10),e._uU(5,"(*)"),e.qZA(),e._uU(6,": "),e.qZA(),e._UZ(7,"ng-select",84),e.qZA()()),2&a){const t=e.oxw();e.xp6(7),e.Q6J("items",t.SoftNames)("virtualScroll",!0)}}function mt(a,h){1&a&&(e.TgZ(0,"div",12)(1,"div",8)(2,"label",85),e._uU(3,"T\xean c\xf4ng ty: "),e.qZA(),e._UZ(4,"input",86),e.qZA()())}function ht(a,h){if(1&a&&(e.TgZ(0,"div",12)(1,"div",8)(2,"label",87),e._uU(3,"S\u1ea3n ph\u1ea9m: "),e.qZA(),e._UZ(4,"ng-select",88,89),e.qZA()()),2&a){const t=e.oxw();e.xp6(4),e.Q6J("items",t.products)("virtualScroll",!0)}}function _t(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",8)(2,"label",96),e._uU(3,"H\u1ed7 tr\u1ee3 => Subject <-> (Y/C nh\u1eadp m\xe3 s\u1ed1 thu\u1ebf) "),e.qZA(),e.TgZ(4,"a",97),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onClearSubject()}),e._uU(5,"X\xf3a d\u1eef li\u1ec7u"),e.qZA(),e._UZ(6,"input",98,99),e.qZA()()}if(2&a){const t=e.oxw(2);e.xp6(6),e.Q6J("readonly",!t.isEmailTicket)}}function ft(a,h){1&a&&(e.TgZ(0,"div",7)(1,"div",8)(2,"label",100),e._uU(3,"N\u1ed9i dung email"),e.qZA(),e._UZ(4,"textarea",101),e.qZA()())}function gt(a,h){1&a&&(e.TgZ(0,"div",7)(1,"div",8)(2,"label",102),e._uU(3,"H\u1ed7 tr\u1ee3 => Body: "),e.qZA(),e._UZ(4,"textarea",103),e.qZA()())}function Ct(a,h){1&a&&(e.TgZ(0,"div",7)(1,"div",8)(2,"label",104),e._uU(3,"H\u1ed7 tr\u1ee3 => Note: "),e.qZA(),e._UZ(4,"textarea",105),e.qZA()())}function zt(a,h){if(1&a&&(e.TgZ(0,"div",7)(1,"div",8)(2,"label",106),e._uU(3,"H\u1ed7 tr\u1ee3 => Copy: "),e.qZA(),e._UZ(4,"textarea",107),e.qZA()()),2&a){const t=e.oxw(2);e.xp6(4),e.Q6J("readOnly",t.isAutoCreate)}}function vt(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",90)(1,"div",3),e.YNc(2,_t,8,1,"div",91),e.YNc(3,ft,5,0,"div",91),e.YNc(4,gt,5,0,"div",91),e.YNc(5,Ct,5,0,"div",91),e.YNc(6,zt,5,1,"div",91),e.qZA(),e.TgZ(7,"div",3)(8,"div",92)(9,"label",93),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().isAutoCreate=o})("click",function(){return e.CHM(t),e.oxw().onClickAutoCreate()}),e._uU(10,"T\u1ef1 \u0111\u1ed9ng t\u1ea1o > Copy"),e.qZA()(),e.TgZ(11,"div",92)(12,"label",94),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().isAutoInput=o}),e._uU(13,"[TS] T\u1ef1 \u0111\u1ed9ng \u0111i\u1ec1n"),e.qZA()(),e.TgZ(14,"div",92)(15,"label",93),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().isViewAll=o})("click",function(){return e.CHM(t),e.oxw().onClickShowMore()}),e._uU(16,"Hi\u1ec3n th\u1ecb ALL"),e.qZA()(),e.TgZ(17,"div",92)(18,"label",93),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().isViewColOdoo=o})("click",function(){return e.CHM(t),e.oxw().onClickShowOdoo()}),e._uU(19,"Hi\u1ec3n th\u1ecb c\u1ed9t TS24"),e.qZA()(),e.TgZ(20,"div",92)(21,"label",94),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().isSaveCache=o}),e._uU(22,"L\u01b0u Cache"),e.qZA()(),e.TgZ(23,"div",92)(24,"label",94),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().chkQuestion=o}),e._uU(25,"L\u01b0u n\u1ed9i dung m\u1eabu"),e.qZA()(),e.TgZ(26,"div",92)(27,"label",95),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().changeChkEmailTicket(o)})("ngModelChange",function(o){return e.CHM(t),e.oxw().isEmailTicket=o}),e._uU(28,"E-mail ticket"),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.isViewAll||t.isEmailTicket||!t.isAutoCreate),e.xp6(1),e.Q6J("ngIf",t.isEmailTicket&&t.isRole("email_ticket")),e.xp6(1),e.Q6J("ngIf",t.isViewAll||!t.isAutoCreate),e.xp6(1),e.Q6J("ngIf",t.isViewAll||!t.isAutoCreate),e.xp6(1),e.Q6J("ngIf",t.isShowContentCopy),e.xp6(3),e.Q6J("ngModel",t.isAutoCreate)("ngModelOptions",e.DdM(19,oe)),e.xp6(3),e.Q6J("ngModel",t.isAutoInput)("ngModelOptions",e.DdM(20,oe)),e.xp6(3),e.Q6J("ngModel",t.isViewAll)("ngModelOptions",e.DdM(21,oe)),e.xp6(3),e.Q6J("ngModel",t.isViewColOdoo)("ngModelOptions",e.DdM(22,oe)),e.xp6(3),e.Q6J("ngModel",t.isSaveCache)("ngModelOptions",e.DdM(23,oe)),e.xp6(3),e.Q6J("ngModel",t.chkQuestion)("ngModelOptions",e.DdM(24,oe)),e.xp6(3),e.Q6J("ngModel",t.isEmailTicket)("ngModelOptions",e.DdM(25,oe))}}function Be(a,h){1&a&&e._UZ(0,"i",127)}function l(a,h){1&a&&e._UZ(0,"i",128)}function d(a,h){if(1&a&&(e.TgZ(0,"button",125),e.YNc(1,Be,1,0,"i",114),e.YNc(2,l,1,0,"i",126),e._uU(3),e.qZA()),2&a){const t=e.oxw(2);e.Q6J("disabled",t.ticketForm.invalid||t.disabledAction),e.xp6(1),e.Q6J("ngIf",t.isSaveTicket),e.xp6(1),e.Q6J("ngIf",!t.isSaveTicket),e.xp6(1),e.hij("",t.isUpdateTicket?"C\u1eadp nh\u1eadt":"L\u01b0u l\u1ea1i"," ")}}function i(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"button",111),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onDeleteTicket()}),e._UZ(1,"i",129),e._uU(2,"X\xf3a Ticket "),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("disabled",t.disabledAction)}}function f(a,h){1&a&&e._UZ(0,"i",130)}function x(a,h){1&a&&e._UZ(0,"i",127)}function N(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"button",111),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onCreateNew()}),e._UZ(1,"i",131),e._uU(2,"T\u1ea1o m\u1edbi "),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("disabled",t.disabledAction)}}function R(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"button",111),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onFindPartner()}),e._UZ(1,"i",132),e.TgZ(2,"span"),e._uU(3,"T\xecm KH"),e.qZA()()}if(2&a){const t=e.oxw(2);e.Q6J("disabled",t.disabledAction)}}function W(a,h){1&a&&e._UZ(0,"i",127)}function re(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"li",123),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onOpenUserConfig()}),e._UZ(1,"i",133),e.YNc(2,W,1,0,"i",114),e.TgZ(3,"span"),e._uU(4,"C\xe0i m\u1eb7c \u0111\u1ecbnh"),e.qZA()()}if(2&a){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.isUpdateUser)}}function Te(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"li",123),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).autoFixTicket()}),e._UZ(1,"i",132),e.TgZ(2,"span"),e._uU(3,"S\u1eeda l\u1ed7i ticket"),e.qZA()()}}function ye(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"li",123),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onCopyTicketWeb()}),e._UZ(1,"i",134),e.TgZ(2,"span"),e._uU(3,"L\u1ea5y ticket"),e.qZA()()}}function Pe(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"li",123),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onCopyTicket()}),e._UZ(1,"i",135),e.TgZ(2,"span"),e._uU(3,"Sao ch\xe9p ticket"),e.qZA()()}}const Tt=function(a){return{"border-top-blue":a}};function yt(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",108)(1,"div",17),e.YNc(2,d,4,4,"button",109),e.YNc(3,i,3,1,"button",110),e.TgZ(4,"button",111),e.NdJ("click",function(){return e.CHM(t),e.oxw().onCompleteTicket()}),e._UZ(5,"i",112),e._uU(6,"Ho\xe0n th\xe0nh "),e.qZA(),e.TgZ(7,"button",111),e.NdJ("click",function(){return e.CHM(t),e.oxw().onLoadCatalog()}),e.YNc(8,f,1,0,"i",113),e.YNc(9,x,1,0,"i",114),e.TgZ(10,"span"),e._uU(11,"T\u1ea3i Danh m\u1ee5c"),e.qZA()(),e.YNc(12,N,3,1,"button",110),e.YNc(13,R,4,1,"button",110),e.TgZ(14,"button",115),e.NdJ("click",function(){return e.CHM(t),e.oxw().onDevTest()}),e._UZ(15,"i",116),e.TgZ(16,"span"),e._uU(17,"Ki\u1ec3m tra h\u1ec7 th\u1ed1ng"),e.qZA()(),e.TgZ(18,"button",117),e._UZ(19,"i",118),e.TgZ(20,"span"),e._uU(21,"Kh\xe1c"),e.qZA()(),e._UZ(22,"cy-odoo-tool",119),e.TgZ(23,"nz-dropdown-menu",null,120)(25,"ul",121),e.YNc(26,re,5,1,"li",122),e.YNc(27,Te,4,0,"li",122),e.YNc(28,ye,4,0,"li",122),e.TgZ(29,"li",123),e.NdJ("click",function(){return e.CHM(t),e.oxw().onUpdateApiKey()}),e._UZ(30,"i",124),e.TgZ(31,"span"),e._uU(32,"L\u1ea5y m\xe3 k\xedch ho\u1ea1t"),e.qZA()(),e.YNc(33,Pe,4,0,"li",122),e.qZA()()()()}if(2&a){const t=e.MAs(24),n=e.oxw();e.Q6J("ngClass",e.VKq(16,Tt,n.showBorderTool)),e.xp6(2),e.Q6J("ngIf",n.isRole("create")),e.xp6(1),e.Q6J("ngIf",n.isUpdateTicket&&n.isRole("delete_ticket")),e.xp6(1),e.Q6J("disabled",n.disabledAction),e.xp6(3),e.Q6J("disabled",n.disabledAction),e.xp6(1),e.Q6J("ngIf",!n.isAsyncCatalog),e.xp6(1),e.Q6J("ngIf",n.isAsyncCatalog),e.xp6(3),e.Q6J("ngIf",n.isRole("create")),e.xp6(1),e.Q6J("ngIf",n.isRole("find_kh")),e.xp6(5),e.Q6J("disabled",n.disabledAction)("nzDropdownMenu",t),e.xp6(4),e.Q6J("ticket",n.ticketForm.getRawValue()),e.xp6(4),e.Q6J("ngIf",n.isRole("cfig_def")),e.xp6(1),e.Q6J("ngIf",n.isRole("fix_row")),e.xp6(1),e.Q6J("ngIf",n.isRole("get_tweb")),e.xp6(5),e.Q6J("ngIf",n.isRole("copy"))}}function bt(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"i",136),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClearSubject()}),e.qZA()}}let St=(()=>{class a{constructor(t,n,o,r,p,g,k,A,_){this.inj=t,this.aRouter=n,this.nzModal=o,this.fb=r,this.shared=p,this.ticketCtrl=g,this.odoo=k,this.user=A,this.ngCfig=_,this.logger=new Ie.Y(a),this._userCache={},this.save=new e.vpe,this.remove=new e.vpe,this.asyncInput=new e.vpe(!1),this.isInitPageChange=new e.vpe(!1),this.clickNew=new e.vpe,this.handlerLoadCate=new e.vpe,this.isCreateNew=!0,this.isInitPage=!0,this.userCfigModalRef=void 0,this.isViewSetDefault=!1,this.inputUserCfigObj={id:"#UserConfig"},this.acceptEditPartner=!0,this.isViewTicket=!0,this.isAutoLoadCate=!0,this.isDeleteContentHelp=!1,this.showBorderTool=!0,this.userDetail=new ie.h,this.editTicket=null,this.isSaveTicket=!1,this.isAsyncCatalog=!1,this.setDataFromOther=void 0,this.isAutoCreate=!0,this.isAutoInput=!1,this.isViewAll=!1,this.isViewColOdoo=!1,this.isEmailTicket=!0,this.isAutoOpenSaveCfigDef=!1,this.chkQuestion=!1,this.isSaveCache=!1,this.isUpdateUser=!1,this._isEmailTicketCache=!1,this.ghelps=[],this.helps=[],this.chanels=[],this.softwares=[],this.products=[],this.odWkTeamItems=[],this.odAssignItems=[],this.odTopicItems=[],this.odCateItems=[],this.odRepliedStatusItems=[],this.odTicketType=[],this.odSubjectTypeItems=[],this.odTagItems=[],this.odPriorityItems=[],this.odCateSubItems=[],this.odCateSubByParent=[],this.waitObj={od_category:!1,od_team:!1,od_assign:!1,od_topic:!1,od_repiled_status:!1,od_ticket_type:!1,od_subject_type:!1},this.OD_KEYS={cate:"od_category",team:"od_team",assign:"od_assign",topic:"od_topic",partner:"od_partner",cate_sub:"od_category_sub"},this.isClickSaveDef=!1,this.isCheckImage=!1,this.ticketNumber=void 0,this.ticketDefault=void 0,this.currentTicket=void 0}ngOnInit(){this.aRouter.queryParamMap.subscribe(t=>{this.isAutoOpenSaveCfigDef=(0,s.oA)(t.get("save_default"))}),this.ngCfig.notFoundText="Kh\xf4ng c\xf3 d\xf2ng n\xe0o.",this.ngCfig.clearAllText="X\xf3a d\u1eef li\u1ec7u",this.isInitPage=!0,this.userDetail=this.user.read(),this.initAutoChk(),this.loadAllCatalog().pipe((0,Y.b)(t=>{this.updateUserDetailValueDefault(),this.createFormGroup()})).subscribe()}loadAllCatalog(){return new c.y(t=>{this.isAutoLoadCate?this.onLoadCatalog():this.loadCateFromCookie(this.shared.catalogs),t.next(void 0),t.complete()})}ngOnChanges(t){}loadCateFromCookie(t){t=t||this.shared.catalogs,Promise.resolve(t).then(n=>(0,S.mG)(this,void 0,void 0,function*(){let o=yield n;this.assignCatalog(o)})).then(n=>{this.onCreateNew(),this.isInitPage=!1})}initAutoChk(){let t=this.userDetail.config.auto_create;this.isAutoCreate=void 0===t||t,this.isViewAll=this.userDetail.config.view_all,this.isSaveCache=this.userDetail.config.save_cache,this.isViewColOdoo=this.userDetail.config.show_ts24,this.isAutoInput=this.isAutoInput||this.userDetail.config.auto_input}ngAfterViewInit(){(0,s.gS)(this.user.read().val_def)&&!this.isViewSetDefault&&this.nzModal.error({nzTitle:"Th\xf4ng b\xe1o !!",nzContent:"B\u1ea1n vui l\xf2ng c\u1eadp nh\u1eadt c\u1ea5u h\xecnh d\u1eef li\u1ec7u m\u1eb7c \u0111\u1ecbnh (Kh\xe1c > C\xe0i m\u1eb7c \u0111\u1ecbnh)",nzOkText:"C\u1ea5u h\xecnh",nzOnOk:n=>this.onOpenUserConfig()})}getUserAssignDefault(){var t;let n=this._userCache.od_assign,o=null===(t=this.userDetail)||void 0===t?void 0:t.val_def;if((0,s.Ft)(n)){if((0,s.Ft)(o.od_assign)){if((0,s.G5)(this.odAssignItems))return;{let r=o.od_assign_id;return o.od_assign=this.odAssignItems.find(p=>p.id==r)}}return this._userCache.od_assign=o.od_assign}return n}odSearchItem(t,n){let o="string"==typeof n?n:n.term;if(!((0,s.EU)(o)||o.length<3))switch(t){case this.OD_KEYS.assign:this.waitObj.od_assign=!0,this.odoo.user.nameSearch(o).subscribe(r=>{this.odAssignItems=r,this.waitObj.od_assign=!1});break;case this.OD_KEYS.team:this.waitObj.od_team=!0,this.odoo.team.nameSearch(o).subscribe(r=>{this.odWkTeamItems=r,this.waitObj.od_team=!1})}}odChangeItem(t,n,o=!0){}get ticket(){return this.formValue}isRole(t,n){return this.user.read().isRole(t,n)}set ticket(t){(0,s.Ft)(t)||(this.isInitPage?this.editTicket=t:(this.setDataFromOther=!0,this.setTicket(t)))}setTicket(t,n=!0){var o;if(Object.keys(t||{}).forEach(g=>{let k=t[g],A=k instanceof Array&&(0,s.G5)(k),_=k instanceof Object&&(0,s.gS)(k);((0,s.Ft)(k)||A||_)&&delete t[g]}),this.ticketDefault=n?this.createTicketDefault():{showMore:!1,tAuto:!0,showColOdoo:!1},t=Object.assign(this.ticketDefault,t),this.isCreateNew=(0,s.EU)(t.ticket_id),this.isEmailTicket=this.isCreateNew?this._userCache.isEmailTicket||!1:t.isEmailTicket,(0,s.Ft)(this.ticketForm)&&this.createFormGroup(),!(0,s.EU)(t.ticket_id)){let g=t[this.OD_KEYS.cate]||{},k=this.odCateItems.filter(A=>A.id===g.id);k.length>0&&(t[this.OD_KEYS.cate]=k[0])}if((0,s.gS)(t.od_team_head)&&(t.od_team_head=null===(o=t.od_team)||void 0===o?void 0:o.team_head),(0,s.Ft)(t.support_help)&&!(0,s.G5)(t.chanels)&&(t.support_help=t.chanels[t.chanels.length-1]),(0,s.Ft)(t.soft_name)&&!(0,s.Ft)(t.software)&&(t.soft_name=t.software.soft_names[0]),!(0,s.Ft)(t.group_help)&&(0,s.Ft)(t.group_help.title)){let g=t.group_help.id,k=this.ghelps.filter(A=>A.id===g);t.group_help=k.length>0?k[0]:t.group_help}(0,s.Ft)(t.product_id)||this.products.forEach(g=>{g.extend_id!==t.product_id||(t.product=g)});const r=t.od_image;(0,s.gS)(r)||(Object.keys(r)||[]).length>0&&(t.image_name=this.convertObjectToImageName(r),this.setEnableFC("image_name",(0,s.kl)(t.is_upfile,!1))),t.body=(0,s.EU)(t.body)?!0===this.isAutoCreate?J(t).join("\n"):")":t.body,t.note=(0,s.EU)(t.note)?!0===this.isAutoCreate?j(t).join("\n"):"":t.note,t.subject=(0,s.EU)(t.subject)?!0===this.isAutoCreate?q(t):"":t.subject,(0,s.EU)(t.content_copy)&&this.isAutoCreate&&(t.content_copy=Q(t,!this.isViewAll)),0===t.od_khid&&(t.od_khid=void 0),this.update_contentCopy(t.content_copy),this.update_helpdeskBody(t.content_copy),this.update_helpdeskNote(t.note),this.update_helpdeskSubject(t.subject),!(0,s.Ft)(t.od_team)&&this.isCreateNew&&this.loadAssignByListID(t.od_team).subscribe(),!(0,s.Ft)(t.od_category)&&this.isCreateNew&&this.changeCategory(t.od_category),s.K$.log(t.subject,this.isAutoCreate),this.ticketNumber=t.ticket_number,this.resetForm(t),this.asyncInput.emit(!1),this.currentTicket=t}convertObjectToImageName(t){return t=null!=t?t:{},Object.keys(t).map(o=>((o,r)=>(0,s.EU)(r)?o:`${o}:${r}`)(o,t[o])).join(";")}setEnableFC(t,n){let o=this.ticketForm.get(t);n?o.enable():o.disable()}resetForm(t){this.ticketForm.reset(Object.assign({},t)),this.odChangeItem(this.OD_KEYS.cate,t[this.OD_KEYS.cate],!1)}get formValue(){return(0,s.Ft)(this.ticketForm)?{}:Object.assign({},this.ticketForm.getRawValue())}get isUpdateTicket(){return!(0,s.Ft)(this.ticket)&&!(0,s.Ft)(this.ticket.ticket_id)}get SoftNames(){const t=this.formValue.software;return(0,s.Ft)(t)?[]:t.soft_names}updateFValue(t,n){this.ticketForm.get(t).setValue(n)}changeEnableOrDisableCHelp(){const t=this.ticketForm.get("content_help"),n=this.ticketForm.get("content_required"),o=this.ticketForm.get("help");t.valueChanges.subscribe(r=>{(0,s.EU)(r)||(0,s.EU)(n.value)?o.enable():o.disable()}),n.valueChanges.subscribe(r=>{(0,s.EU)(r)||(0,s.EU)(t.value)?o.enable():o.disable()})}pathValue(t,n){this.ticketForm.patchValue({[t]:n}),!0===this.isAutoCreate&&this.autoFixTicket()}assignCatalog(t){this.chanels=t.chanels,this.helps=t.questions,this.ghelps=t.group_helps,this.softwares=t.softwares,this.products=t.products,this.odCateItems=t[this.OD_KEYS.cate]||[],this.odTopicItems=t[this.OD_KEYS.topic]||[],this.odCateSubItems=t[this.OD_KEYS.cate_sub]||[],this.odTagItems=t.od_tags||[],this.odPriorityItems=t.od_ticket_priority||[],this.odRepliedStatusItems=t.od_repiled_status||[],this.odWkTeamItems=t.od_team||[],this.odCateItems=t.od_category||[],this.odAssignItems=t.od_assign||[],this.odSubjectTypeItems=t.od_ticket_subtype||[],this.odPriorityItems=t.od_ticket_priority||[],this.odTicketType=t.od_ticket_type||[]}onLoadCatalog(t){this.logger.log("------ onLoadCatalog() ------- "),this.isAsyncCatalog=!0;let n=this.shared.loading("L\u1ea5y d\u1eef li\u1ec7u danh m\u1ee5c"),r=this.ticketCtrl.loadCatalogs(!0).pipe((0,v.w)(_=>(this.assignCatalog(_),(0,C.of)(_)))),p=!1,k=(0,C.of)(r).pipe((0,E.b)(_=>_.pipe((0,z.g)(1e3)))).subscribe({error:_=>{p=!0,k.unsubscribe()}});this.handlerLoadCate.emit(k);let A=(0,L.F)(100).subscribe(_=>{if(k.closed){if(this.isAsyncCatalog=!1,this.shared.alert.remove(n.messageId),p||(this.shared.alert.success("\u0110\xe3 l\u1ea5y xong danh m\u1ee5c"),this.shared.catalogs=Object.assign(Object.assign({},this.shared.catalogs),{isAutoLoadCate:!1}),this.isAutoLoadCate=!1,this.isAutoOpenSaveCfigDef&&this.onOpenUserConfig()),this.isInitPage){let O=!0===t?this.fixFormValIsNull(this.editTicket||this.formValue||{}):this.editTicket;this.setTicket(O),this.isInitPage=!1}A.unsubscribe()}},(0,T.q)(1))}fixFormValIsNull(t){return Object.keys(t).map(n=>{let o=t[n];return Array.isArray(o)?(0,s.G5)(o)&&(o=void 0):"object"==typeof o?(0,s.gS)(o)&&(o=void 0):(0,s.EU)(o)&&(o=void 0),{[n]:o}}).reduce((n,o)=>Object.assign(Object.assign({},n),o),{})}onClickAutoCreate(){1==this.isAutoCreate&&this.autoFixTicket()}onCreateNew(t){s.K$.log(" -- onCreateNew() --"),t=Object.assign({},t),this.setDataFromOther=void 0,this.isEmailTicket=this._userCache.isEmailTicket||this._isEmailTicketCache,this.save.emit({ticket:void 0,isNew:!0}),this.setTicket(t,!0);let n=this._userCache.isEmailTicket;this.isEmailTicket=null==n?this._isEmailTicketCache:n}onCopyTicket(){let t=this.formValue;delete t.ticket_id,this.setDataFromOther=void 0,this.setTicket(t,!1)}addDayDate(t,n){return t.setMinutes(t.getMinutes()+n),t}onCompleteTicket(){this.pathValue("complete_time",new V.uU("en-US").transform(new Date,"yyyyMMdd-HH:mm"))}onOpenUserConfig(){this.userCfigModalRef=this.nzModal.create({nzWidth:700,nzMaskClosable:!1,nzClosable:!1,nzClassName:"user-config",nzTitle:"L\u01b0u d\u1eef li\u1ec7u m\u1eb7c \u0111\u1ecbnh",nzContent:a,nzOkText:"L\u01b0u m\u1eb7c \u0111\u1ecbnh",nzCancelText:"\u0110\xf3ng",nzComponentParams:{isViewCfigDef:this.userDetail.roles.cfig_def_input,isViewSetDefault:!0,isAutoInput:!0,isAutoLoadCate:!1},nzOnCancel:()=>"close",nzOnOk:()=>function m(a,h){const t="object"==typeof h;return new Promise((n,o)=>{let p,r=!1;a.subscribe({next:g=>{p=g,r=!0},error:o,complete:()=>{r?n(p):t?n(h.defaultValue):o(new y.K)}})})}(this.updateUserConfig().pipe((0,Y.b)(t=>this.isClickSaveDef=!0)))}),this.userCfigModalRef.afterClose.subscribe(t=>{"object"==typeof t&&(this.userDetail=this.user.read(),this.updateUserDetailValueDefault(),this.isAutoOpenSaveCfigDef=!1)})}onChangeKhId(t){let n=(0,s.EU)(t)||0===Number.parseInt(t);["tax_code","customer_name","email","company_name"].forEach(r=>{const p=this.ticketForm.get(r);n?p.enable():p.disable({emitEvent:!0})})}updateUserConfig(){return new c.y(t=>{var n,o,r,p,g,k,A,_,O,M;s.K$.log("updateUserConfig","C\u1eadp nh\u1eadt c\u1ea5u h\xecnh ng\u01b0\u1eddi d\xf9ng.");let he=this.userCfigModalRef.getContentComponent();this.isUpdateUser=!0;let _e=this.shared.loading("<b>C\u1eadp nh\u1eadt danh m\u1ee5c m\u1eb7c \u0111\u1ecbnh.</b>"),be=this.user.read(),w=he.formValue;console.log("updateUserConfig",w);let fe={name:w.full_name,val_def:{soft_name:w.soft_name,chanel_ids:(0,s.G5)(w.chanels)?[]:w.chanels.map($=>$.chanel_id),ghelp_id:(0,s.Ft)(w.group_help)?0:w.group_help.id,software_id:(0,s.Ft)(w.software)?0:w.software.id,product_id:(0,s.Ft)(w.product)?0:w.product.extend_id,support_help_id:(0,s.Ft)(w.support_help)?0:w.support_help.chanel_id,od_team_id:(0,s.Ft)(w[this.OD_KEYS.team])?0:w[this.OD_KEYS.team].id,od_category_id:(0,s.Ft)(w[this.OD_KEYS.cate])?0:w[this.OD_KEYS.cate].id,od_topic_id:(0,s.Ft)(w[this.OD_KEYS.topic])?0:w[this.OD_KEYS.topic].id,od_assign_id:(0,s.Ft)(w[this.OD_KEYS.assign])?0:w[this.OD_KEYS.assign].id,od_repiled_status_id:null!==(o=null===(n=w.od_repiled_status)||void 0===n?void 0:n.id)&&void 0!==o?o:0,od_ticket_type_id:null!==(p=null===(r=w.od_ticket_type)||void 0===r?void 0:r.id)&&void 0!==p?p:0,od_subject_type_id:null!==(k=null===(g=w.od_subject_type)||void 0===g?void 0:g.id)&&void 0!==k?k:0,od_category_sub_id:null!==(_=null===(A=w.od_category_sub)||void 0===A?void 0:A.id)&&void 0!==_?_:0,od_tags_id:(w.od_tags||[]).map($=>$.id),od_priority_id:null!==(M=null===(O=w.od_priority)||void 0===O?void 0:O.id)&&void 0!==M?M:0},config:{show_ts24:this.isViewColOdoo,auto_create:this.isAutoCreate,auto_input:this.isAutoInput}};(0,s.EU)(w.od_user_def)||(fe.odoo_user=JSON.parse(w.od_user_def||{})),(0,s.EU)(w.cookie_value)||(fe.cookie_value=w.cookie_value),(0,s.EU)(w.csrf_token)||(fe.csrf_token=w.csrf_token),this.user.updateOne(be.id,fe).subscribe($=>{this.isUpdateUser=!1,this.shared.alert.remove(_e.messageId),this.shared.alert.success("C\u1eadp nh\u1eadt d\u1eef li\u1ec7u m\u1eb7c \u0111\u1ecbnh xong."),t.next($),t.complete()},$=>{this.isUpdateUser=!1,this.shared.alert.remove(_e.messageId),t.error($)})})}onCopyTicketWeb(){this.nzModal.create({nzTitle:"L\u1ea5y ticket t\u1eeb Odoo",nzClosable:!1,nzContent:Oe,nzMaskClosable:!1,nzOkText:"L\u1ea5y Ticket",nzCancelText:"\u0110\xf3ng",nzFooter:null}).afterClose.subscribe(n=>{if(!(0,s.Ft)(n)&&!(0,s.gS)(n.data)){this.shared.alert.success("\u0110\xe3 l\u1ea5y xong ticket t\u1eeb web.");let o=Object.assign(Object.assign({},n.data),{chanels:void 0,source_text:"odoo"});this.onCreateNew(o)}})}onSaveTicket(t=!0){!0===t&&this.ticketForm.invalid?this.shared.showError({error:{code:"230",message:"Ch\u01b0a nh\u1eadp \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin"}}):new c.y(o=>{(0,s.EU)(this.ticketNumber)?(o.next("update"),o.complete()):this.nzModal.create({nzTitle:"Th\xf4ng b\xe1o",nzClosable:!1,nzContent:`Ticket n\xe0y \u0111\xe3 c\xf3 s\u1ed1 [ID=${this.ticketNumber}] -> <b>B\u1ea1n c\xf3 mu\u1ed1n c\u1eadp nh\u1eadt l\u1ea1i th\xf4ng tin tr\xean h\u1ec7 th\u1ed1ng.</b>`,nzMaskClosable:!1,nzOkText:"C\u1eadp nh\u1eadt",nzCancelText:"Kh\xf4ng c\u1eadp nh\u1eadt",nzOnOk:()=>Promise.resolve("update")}).afterClose.subscribe(p=>{o.next(p),o.complete()})}).subscribe(o=>{if("update"===o){this.isSaveTicket=!0;let r={},g=[this.getAndValidateTicket(),this.handleSaveTicket(r)],k=!1,A=(0,C.of)(...g).pipe((0,E.b)(O=>O)).subscribe({next:O=>{this.logger.log("K\u1ebft qu\u1ea3: Oki"),r=Object.assign(r,O)},error:O=>{this.logger.log("K\u1ebft qu\u1ea3: Error"),this.logger.log(O),null!=A&&A.unsubscribe(),k=!0}}),_=(0,L.F)(1e3).subscribe(O=>{A.closed&&(this.isSaveTicket=!1,_.unsubscribe())})}})}getAndValidateTicket(){return new c.y(t=>{var n,o,r,p,g,k,A;this.logger.log("getAndValidateTicket() -> Chu\u1ea9n b\u1ecb d\u1eef li\u1ec7u l\u01b0u + c\u1eadp nh\u1eadt ticket");const _=this.formValue,O=!(0,s.EU)(_.ticket_id),M=this.user.read();_.user_id=M.id,_.ticket_number=(0,s.EU)(_.ticket_number)?null:_.ticket_number,_.chanel_ids=_.chanels.map($=>$.chanel_id),_.product_id=null!==(o=null===(n=_.product)||void 0===n?void 0:n.extend_id)&&void 0!==o?o:null,_.software_id=null!==(p=null===(r=_.software)||void 0===r?void 0:r.id)&&void 0!==p?p:null,_.support_help_id=null!==(k=null===(g=_.support_help)||void 0===g?void 0:g.chanel_id)&&void 0!==k?k:null,_.group_help_id=(0,s.Ft)(_.group_help)?null:_.group_help.id,_.isEmailTicket=this.isEmailTicket,_.od_category=Object.assign({},_.od_category);const he=null===(A=_.od_team)||void 0===A?void 0:A.team_head;if(_.od_team_head=(0,s.gS)(he)&&O?_.od_team_head:he,!(0,s.gS)(_.od_assign)){let $=_.od_assign;_.od_assign={id:$.id,name:$.name,display_name:$.display_name}}const _e=_.image_name;if(!(0,s.EU)(_e)){let $=ae=>ae.includes(".")?ae:`${ae}.png`,xt=_e.split(";").map(ae=>ae.split(":"));_.od_image=s.mz.reduce(xt,ae=>({[$(ae[0])]:ae.length>1?ae[1]:null}))}_.is_upfile=_e.includes(":"),this.chkQuestion&&(_.question_save={title:_.content_required,question:_.content_required,reply:_.content_help,type:_.od_category.id,user_id:this.userDetail.id,is_shared:!1}),!0===this.isSaveCache?(this.shared.setByKey("isAutoCreate",this.isAutoCreate),this.shared.setByKey("isViewAll",this.isViewAll),this.shared.setByKey("isSaveCache",this.isSaveCache),this._userCache={chanels:_.chanels,ghelp:Object.assign({},_.group_help),software:Object.assign({},_.software),support_help:Object.assign({},_.support_help),soft_name:_.soft_name,product_id:(0,s.Ft)(_.product)?void 0:_.product.extend_id,od_team:Object.assign({},_.od_team),od_category:Object.assign({},_.od_category),od_assign:Object.assign({},_.od_assign),od_topic:Object.assign({},_.od_topic),od_repiled_status:Object.assign({},_.od_repiled_status),od_subject_type:Object.assign({},_.od_subject_type),od_ticket_type:Object.assign({},_.od_ticket_type),od_tags:[..._.od_tags],od_priority:Object.assign({},_.od_priority),od_category_sub:Object.assign({},_.od_category_sub),isEmailTicketCache:this._isEmailTicketCache},s.K$.log("L\u01b0u cache: ",this._userCache)):this._userCache={};const be=Object.assign({},_);["od_user_def","cookie_value","csrf_token","help","chanels","product","software","support_help","first_chanel","group_help","image_name"].forEach($=>delete be[$]);let fe=be[this.OD_KEYS.cate];["wk_team","manager","sequence"].forEach($=>delete fe[$]),t.next(Object.assign({},be)),t.complete()})}handleSaveTicket(t){return new c.y(n=>{let o=t.ticket_id;(0,s.EU)(o)?(this.logger.log("handleSaveTicket() -> T\u1ea1o m\u1edbi ticket"),this.ticketCtrl.addOne(t).subscribe({next:r=>{this.setTicket(r,!1),this.save.emit({ticket:r,isNew:(0,s.Ft)(this.setDataFromOther)}),this.shared.alert.success(`[${r.ticket_id}] Th\xeam m\u1edbi ticket th\xe0nh c\xf4ng.`),this.isSaveTicket=!1,this.asyncInput.emit(!1),this.updateQuestion(r),n.next(r),n.complete()},error:r=>n.error(r)})):(this.logger.log("handleSaveTicket() -> C\u1eadp nh\u1eadt ticket"),this.ticketCtrl.updateOne(o,t).subscribe({next:r=>{this.setTicket(r,!1),this.save.emit({ticket:r,isNew:!1}),this.shared.alert.success(`[${r.ticket_id}] C\u1eadp nh\u1eadt ticket th\xe0nh c\xf4ng.`),this.isSaveTicket=!1,this.asyncInput.emit(!1),this.updateQuestion(r),n.next(r),n.complete()},error:r=>n.error(r)}))})}updateQuestion(t){let n=t.question_save;(0,s.gS)(n)||(this.helps=[...this.helps,n])}onDeleteTicket(){(0,s.Ft)(this.ticket.ticket_id)?this.shared.alert.warning("Ch\u1ecdn l\u1ea1i d\xf2ng ticket c\u1ea7n x\xf3a."):this.nzModal.confirm({nzTitle:"B\u1ea1n mu\u1ed1n x\xf3a ticket n\xe0y ?",nzCancelText:"H\u1ee7y b\u1ecf",nzOkText:"X\xf3a",nzOnOk:()=>this.ticketCtrl.deleteOne(this.ticket.ticket_id).toPromise().then(()=>{this.remove.emit(this.ticket),this.shared.alert.success(`[${this.ticket.ticket_id}] \u0110\xe3 x\xf3a ticket xong.`),this.onCreateNew()})})}onClickShowMore(){this._userCache.showMore=this.isViewAll}onClickShowOdoo(){this._userCache.showColOdoo=this.isViewColOdoo}onChangeCHelp(t){const n=this.formValue;(this.isDeleteContentHelp||(0,s.EU)(n.content_required))&&this.pathValue("content_required",t.question||""),(this.isDeleteContentHelp||(0,s.EU)(n.content_help))&&(this.pathValue("content_help",t.reply),(0,s.EU)(n.complete_time)&&this.onCompleteTicket())}createFormGroup(){this.ticketForm=this.fb.group({ticket_id:null,user_code:null,ticket_on:[null,b.kI.required],ticket_number:null,ticket_text:null,full_name:null,tax_code:[null,b.kI.required],chkQuestion:!1,company_name:null,email:null,phone:null,teamviewer:null,customer_name:null,content_required:null,content_help:null,reception_time:null,complete_time:null,software:[null,b.kI.required],chanels:[null,b.kI.required],content_copy:null,first_chanel:null,help:[null],group_help:null,support_help:null,soft_name:null,product:null,body:null,note:null,subject:null,image_name:null,od_image:null,od_team:[null],od_assign:[null],od_category:[null,b.kI.required],od_topic:null,od_khid:[0],od_partner:null,content_email:null,od_category_sub:[null,b.kI.required],od_repiled_status:[null,b.kI.required],od_ticket_type:null,od_subject_type:null,od_team_head:null,od_tags:null,od_priority:null,od_user_def:null,cookie_value:null,csrf_token:null}),this.ticketForm.get("od_repiled_status").disable(),this.formValueChange()}formValueChange(){this.ticketForm.get("content_help").valueChanges.subscribe(t=>{(0,s.EU)(this.formValue.complete_time)&&!(0,s.EU)(t)&&this.onCompleteTicket()}),this.ticketForm.get("chanels").valueChanges.subscribe(t=>{(0,s.G5)(t)||this.pathValue("support_help",t[t.length-1])}),this.ticketForm.get("software").valueChanges.subscribe(t=>{!(0,s.Ft)(t)&&!(0,s.G5)(t.soft_names)&&this.ticketForm.get("soft_name").setValue(t.soft_names[0])}),this.ticketForm.valueChanges.subscribe(t=>{this.ticketForm.dirty&&(this.asyncInput.emit(!0),!0===this.isAutoCreate&&this.autoFixTicket())})}update_helpdeskBody(t){this.ticketForm.get("body").patchValue(t,{onlySelf:!0})}update_helpdeskNote(t){this.ticketForm.get("note").patchValue(t,{onlySelf:!0})}update_helpdeskSubject(t){this.ticketForm.get("subject").patchValue(t,{onlySelf:!0})}update_contentCopy(t){this.ticketForm.get("content_copy").patchValue(t,{onlySelf:!0})}autoFixTicket(t,n){if(t=t||this.formValue,(0,s.oA)(n)){let k=this.createTicketDefault();this.fixCompleteTime(20,"minute"),this.fixTicketOn_fromReception_time(),(0,s.G5)(t.chanels)&&!(0,s.G5)(k.chanels)&&this.pathValue("chanels",k.chanels),(0,s.gS)(t.software)&&!(0,s.gS)(k.software)&&this.pathValue("software",k.software),(0,s.gS)(t.group_help)&&!(0,s.gS)(k.group_help)&&this.pathValue("group_help",k.group_help),(0,s.gS)(t.od_team)&&!(0,s.gS)(k.od_team)&&this.pathValue("od_team",k.od_team),(0,s.gS)(t.od_assign)&&!(0,s.gS)(k.od_assign)&&this.pathValue("od_assign",k.od_assign),(0,s.gS)(t.od_category)&&!(0,s.gS)(k.od_category)&&this.pathValue("od_category",k.od_category),(0,s.gS)(t.od_topic)&&!(0,s.gS)(k.od_topic)&&this.pathValue("od_topic",k.od_topic)}let o=J(t).join("\n");this.update_helpdeskBody(o);let r=j(t).join("\n");this.update_helpdeskNote(r);let p=t.subject;0==this.isEmailTicket&&(p=q(t),this.update_helpdeskSubject(p));let g=Q(t,!1,{body:o,note:r,subject:p});return this.update_contentCopy(g),this.formValue}buildHelpdeskSubject(t=this.ticket){let n=q(t);return this.update_helpdeskSubject(n),n}fixTicketOn_fromReception_time(){let t=this.formValue.reception_time;if(!(0,s.EU)(t)){t=t.replace(/ /g,"");let n=t.substring(2,8);this.ticketForm.get("ticket_on").patchValue(n),this.ticketForm.get("reception_time").patchValue(t)}}fixCompleteTime(t=20,n="minute"){let o=this.formValue.reception_time;if((0,s.EU)(o))return;let r=this.formValue.complete_time;if(!(0,s.EU)(o)&&((0,s.EU)(r)||12==r.length||o==r)){let p=o,g=new Date(Number.parseInt(p.substring(0,4)),Number.parseInt(p.substring(4,6))-1,Number.parseInt(p.substring(6,8)),Number.parseInt(p.substring(9,11)),Number.parseInt(p.substring(12,14))),k=s.Ov.dateAdd(g,n,t),A=s.Ov.dateToString(k,"yyyyMMdd-HH:mm");this.ticketForm.get("complete_time").patchValue(A)}}get isShowContentCopy(){return!this.isViewAll&&this.isAutoCreate}createTicketDefault(t){var n,o;const r=this.user.read(),p=r.val_def||{},g=this._userCache;if((0,s.G5)(g.chanels)&&!(0,s.G5)(this.chanels)&&(g.chanels=(p.chanel_ids||[]).map(O=>this.chanels.filter(M=>M.chanel_id===O)[0]).filter(O=>!(0,s.Ft)(O))),(0,s.Ft)(g.support_help)&&!(0,s.G5)(this.chanels)){const _=p.support_help_id||0;g.support_help=this.chanels.filter(O=>O.chanel_id===_)[0]}if((0,s.Ft)(g.software)&&!(0,s.G5)(this.softwares)){const _=p.software_id||0,O=this.softwares.filter(M=>M.id===_);g.software=O.length>0?O[0]:void 0}if((0,s.Ft)(g.soft_name)&&(g.soft_name=p.soft_name),(0,s.Ft)(g.ghelp)&&!(0,s.G5)(this.ghelps)){const _=p.ghelp_id||0,O=this.ghelps.filter(M=>M.id===_);g.ghelp=O.length>0?O[0]:void 0}if((0,s.Ft)(g.product)&&!(0,s.G5)(this.products)){const _=p.product_id||0,O=this.products.filter(M=>M.extend_id===_);g.product=O.length>0?O[0]:void 0}let k=g[this.OD_KEYS.cate];if((0,s.gS)(k)||(0,s.gS)(k.wk_team)){let _=p.od_category_id||0,M=(this.shared.catalogs.od_category||this.odCateItems||[]).filter(he=>he.id===_);g[this.OD_KEYS.cate]=M.length>0?M[0]:void 0}if((0,s.gS)(g[this.OD_KEYS.team])&&!(0,s.G5)(this.odWkTeamItems)){let _=p.od_team_id||0,O=this.odWkTeamItems.find(M=>M.id===_);g[this.OD_KEYS.team]=null!=O?O:void 0}if((0,s.gS)(g.od_assign)&&(null===(n=this.odAssignItems)||void 0===n?void 0:n.length)>0&&(g.od_assign=this.getUserAssignDefault()),(0,s.gS)(g.od_subject_type)&&!(0,s.G5)(this.odSubjectTypeItems)){let _=p.od_subject_type_id||0,O=this.odSubjectTypeItems.find(M=>M.id===_);g.od_subject_type=null!=O?O:void 0}const A="od_ticket_type";if((0,s.gS)(g[A])&&!(0,s.G5)(this.odTicketType)){let _=p[`${A}_id`]||0,O=this.odTicketType.find(M=>M.id===_);g[A]=null!=O?O:void 0}if((0,s.gS)(g.od_category_sub)&&!(0,s.G5)(this.odCateSubItems)){let _=p.od_category_sub_id||0,O=this.odCateSubItems.find(M=>M.id===_);g.od_category_sub=null!=O?O:void 0}if((0,s.gS)(g.od_priority)&&!(0,s.G5)(this.odPriorityItems)){let _=p.od_priority_id||0,O=this.odPriorityItems.find(M=>M.id===_);g.od_priority=null!=O?O:void 0}if((0,s.gS)(g.od_repiled_status)&&!(0,s.G5)(this.odRepliedStatusItems)){let _=p.od_repiled_status_id||0,O=this.odRepliedStatusItems.find(M=>M.id===_);g.od_repiled_status=null!=O?O:void 0}if((0,s.G5)(g.od_tags)&&!(0,s.G5)(this.odTagItems)){let _=p.od_tags_id||[],O=this.odTagItems.filter(M=>_.includes(M.id));g.od_tags=null!=O?O:[]}return{user:r,full_name:r.name,user_id:r.id,user_code:r.token,od_khid:0,chanels:this._userCache.chanels||[],support_help:this._userCache.support_help,software:this._userCache.software||null,soft_name:this._userCache.soft_name,product:this._userCache.product,group_help:this._userCache.ghelp||null,od_team:this._userCache[this.OD_KEYS.team]||null,od_category:this._userCache[this.OD_KEYS.cate]||null,od_category_sub:null!==(o=this._userCache.od_category_sub)&&void 0!==o?o:null,od_topic:this._userCache[this.OD_KEYS.topic]||null,od_assign:this._userCache[this.OD_KEYS.assign]||null,od_subject_type:this._userCache.od_subject_type||null,od_ticket_type:this._userCache.od_ticket_type||null,od_priority:this._userCache.od_priority||null,od_tags:this._userCache.od_tags||null,od_repiled_status:this._userCache.od_repiled_status||null,ticket_on:new V.uU("en-US").transform(new Date,"yyMMdd"),reception_time:new V.uU("en-US").transform(new Date,"yyyyMMdd-HH:mm"),complete_time:new V.uU("en-US").transform(new Date,"yyyyMMdd-HH:")}}get disabledAction(){return this.isSaveTicket||this.isAsyncCatalog||this.isInitPage||this.isUpdateUser}convertObjToColDefs(t,n){return t.map(o=>({colId:o,field:o,headerName:n[o]||o}))}onFindPartner(){let t=this.formValue;this.nzModal.create({nzTitle:"T\xecm ki\u1ebfm kh\xe1ch h\xe0ng",nzClosable:!1,nzWidth:900,nzMaskClosable:!1,nzFooter:null,nzContent:He,nzComponentParams:{fieldSearch:[],valueSearch:{vat:t.tax_code,phone:t.phone,email:t.email,customer_name:t.customer_name}}}).afterClose.pipe((0,v.w)(r=>{if(r&&!(0,s.Ft)(r.item)){let p=r.item;if(this.updateFValue("tax_code",p.vat),this.updateFValue("email",p.email),this.updateFValue("customer_name",p.customer_name),this.updateFValue("company_name",p.comp_name),this.updateFValue("od_khid",p.id),this.updateFValue("od_partner",p),(0,s.EU)(this.formValue.phone)){let k=p.mobile||p.phone;"false"===k&&(k=void 0),this.updateFValue("phone",k)}this.autoFixTicket(),!0===r.autoUpdate&&this.onSaveTicket()}return te.E})).subscribe()}ngSelectChange(t){this.logger.log(t)}onUpdateApiKey(){this.nzModal.create({nzTitle:"C\u1eadp nh\u1eadt m\xe3 k\xedch ho\u1ea1t",nzClosable:!1,nzContent:De,nzMaskClosable:!1,nzOkText:"L\u1ea5y m\xe3 k\xedch ho\u1ea1t",nzCancelText:"\u0110\xf3ng",nzFooter:null}).afterClose.subscribe(n=>{!(0,s.Ft)(n)&&!(0,s.gS)(n.data)&&(this.shared.alert.success("\u0110\xe3 l\u1ea5y xong m\xe3 k\xedch ho\u1ea1t."),this.isInitPage=!0,this.onLoadCatalog())})}onDevTest(){}get ticketId(){return this.ticket.ticket_id}changeChkEmailTicket(t){!t&&(0,s.EU)(this.ticket.subject)&&(this.buildHelpdeskSubject(),this.autoFixTicket()),(0,s.EU)(this.ticketId)&&(this._isEmailTicketCache=this.isEmailTicket)}onClearSubject(){this.ticketForm.get("subject").patchValue(void 0)}loadAssignByListID(t,n=!1){let r=(null==t?void 0:t.user_list)||[];return(1==n||!(0,s.G5)((null==t?void 0:t.team_members)||[])&&(0,s.G5)(r)?this.odoo.user.loadUsers(t.team_members):(0,C.of)(r)).pipe((0,v.w)(k=>{this.odAssignItems=k,this.waitObj.od_assign=!1,this.ticketForm.get("od_assign").enable();let A=this.getUserAssignDefault(),_=k.findIndex(O=>O.id==(null==A?void 0:A.id));return this.pathValue("od_assign",k[_]),(0,C.of)(k)}))}changeSupportTeam(t){let n=this.ticketForm.get("od_assign");this.pathValue("od_team_head",null==t?void 0:t.team_head),(0,s.Ft)(t)?n.disable({emitEvent:!0}):(this.waitObj.od_assign=!0,this.loadAssignByListID(t).subscribe({next:r=>t.user_list=r,complete:()=>this.setWaiting("od_assign",!1),error:r=>console.error("L\u1ed7i l\u1ea5y th\xf4ng tin [od_assign]: ",r)}))}setWaiting(t,n){this.waitObj[t]=n}changeSubjectType(t){if(!(0,s.Ft)(t)){}}changeCategory(t){t.cate_sub=(0,s.Ft)(t)?[]:(0,s.G5)(t.cate_sub)?this.odCateSubItems.filter(o=>o.parent_category_id.id==t.id):t.cate_sub;let n=this.ticketForm.get("od_category_sub");(0,C.of)(t.cate_sub).subscribe({next:o=>{let r=this._userCache.od_category_sub||{},p=o.findIndex(g=>g.id==(null==r?void 0:r.id));this.odCateSubByParent=o,n[0==o.length?"disable":"enable"](),n.patchValue(o[p])}})}getListOdTagFrom(t){if((0,s.G5)(t.od_tags)){let n=t.name.split("|")[0].replace(/\s+/,"").replace(/-/,"").trim().toLowerCase();return t.od_tags=this.odTagItems.filter(o=>{let r=o.name.split("|")[0].replace(/\s+/,"").trim().toLowerCase();return n==r||o.name.includes(n)})}return t.od_tags}updateUserDetailValueDefault(){let t=this.userDetail.val_def;this._userCache=this._userCache||{},this.setCache(this.odAssignItems,"od_assign"),this.setCache(this.odRepliedStatusItems,"od_repiled_status"),this.setCache(this.odCateItems,"od_category"),this.setCache(this.odCateSubItems,"od_category_sub"),this.setCache(this.odSubjectTypeItems,"od_subject_type"),this.setCache(this.odTicketType,"od_ticket_type"),this.setCache(this.odPriorityItems,"od_priority"),this.setCache(this.odWkTeamItems,"od_team"),this.setCache(this.softwares,"software"),this.setCache(this.odPriorityItems,"od_priority"),this.setCache(this.ghelps,"group_help","ghelp_id"),this._userCache.od_tags=t.od_tags=this.odTagItems.filter(n=>t.od_tags_id.includes(n.id)),this._userCache.chanels=t.chanels=this.chanels.filter(n=>t.chanel_ids.includes(n.chanel_id))}setCache(t,n,o,r){o=null!=o?o:`${n}_id`,r=null!=r?r:"id";let p=this.userDetail.val_def;this._userCache=this._userCache||{},this._userCache[n]=p[n]=t.find(g=>g[r]==p[o])}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(e.zs3),e.Y36(Ye.gz),e.Y36(le.Sf),e.Y36(b.qu),e.Y36(P.W),e.Y36(Z.k),e.Y36(pe.P),e.Y36(B.a),e.Y36(ke.$q))},a.\u0275cmp=e.Xpm({type:a,selectors:[["cy-ticket-form"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Xe,7),e.Gf(Me,7),e.Gf(et,7),e.Gf(tt,7)),2&t){let o;e.iGM(o=e.CRH())&&(n.cChanels=o.first),e.iGM(o=e.CRH())&&(n.cProduct=o.first),e.iGM(o=e.CRH())&&(n.ngSlSupportHelp=o.first),e.iGM(o=e.CRH())&&(n.ngSlTicketTags=o.first)}},inputs:{isCreateNew:"isCreateNew",isInitPage:"isInitPage",userCfigModalRef:"userCfigModalRef",isViewSetDefault:"isViewSetDefault",inputUserCfigObj:"inputUserCfigObj",acceptEditPartner:"acceptEditPartner",isViewTicket:"isViewTicket",isAutoLoadCate:"isAutoLoadCate",isDeleteContentHelp:"isDeleteContentHelp",showBorderTool:"showBorderTool",ticket:"ticket"},outputs:{save:"save",remove:"remove",asyncInput:"asyncInput",isInitPageChange:"isInitPageChange",clickNew:"clickNew",handlerLoadCate:"handlerLoadCate"},features:[e.TTD],decls:111,vars:48,consts:[[1,"ticket-form",3,"formGroup","ngSubmit"],[1,"card"],[1,"card-body"],[1,"row"],[1,"col-lg-6","col-md-12","col-lr","col-body"],["class","col-md-3",4,"ngIf"],["class","col-md-6",4,"ngIf"],[1,"col-md-12"],[1,"form-group"],[1,""],[1,"required"],["bindLabel","value","formControlName","chanels",1,"required","chanel",3,"items","multiple","hideSelected","virtualScroll","closeOnSelect"],[1,"col-md-6"],["for","software",1,""],["id","software","bindLabel","value","formControlName","software",1,"required",3,"items","virtualScroll"],["for","group_help",1,""],["id","group_help","bindLabel","title","formControlName","group_help",1,"required",3,"items","virtualScroll"],[1,"col-12"],[1,"col-12","col-od"],[1,"col-md-3"],["for","od_wk_team",1,""],["id","od_wk_team","bindLabel","display_name","formControlName","od_team",1,"required1",3,"items","virtualScroll","loading","change","search"],["for","od_assign_users",1,""],["id","od_assign_users","bindLabel","display_name","formControlName","od_assign",1,"required1",3,"items","placeholder","virtualScroll","loading","search"],["for","od_subject_type",1,""],["id","od_subject_type","bindLabel","display_name","formControlName","od_subject_type",1,"required1",3,"items","virtualScroll","loading","search","change"],["for","od_repiled_status",1,""],["id","od_repiled_status","bindLabel","name","formControlName","od_repiled_status",1,"required1",3,"items","virtualScroll","loading","search"],["for","od_helpdesk_category",1,""],["id","od_helpdesk_category","bindLabel","name","formControlName","od_category",3,"virtualScroll","items","change","search"],["for","od_category_sub",1,""],["id","od_category_sub","bindLabel","name","formControlName","od_category_sub",3,"virtualScroll","items","search"],["for","od_team_head"],["nz-input","","id","od_team_head","disabled","",3,"value"],["class","col-md-7",4,"ngIf"],["class","col-md-5",4,"ngIf"],["class","col-lg-6 col-md-12 col-lr",4,"ngIf"],["class","row tool row-footer",3,"ngClass",4,"ngIf"],["clearSubject",""],["for","ticketOn"],["nz-input","","id","ticketOn","formControlName","ticket_on","required","",1,"note"],["for","ticketNumber"],["nz-input","","type","number","id","ticketNumber","formControlName","ticket_number"],["for","full_name"],["nz-input","","id","full_name","formControlName","full_name","required","",1,"note"],["for","od_ticket_type",1,""],["id","od_ticket_type","bindLabel","display_name","formControlName","od_ticket_type",1,"required1",3,"items","virtualScroll","loading","search"],["for","od_priority",1,""],["id","od_priority","bindLabel","display_name","formControlName","od_priority",3,"virtualScroll","items","search"],["for","od_tags",1,""],["id","od_tags","bindLabel","display_name","formControlName","od_tags",1,"od_tag","ng-select-single",3,"virtualScroll","multiple","items","search"],["ngSlTicketTags",""],[1,"col-md-7"],[1,"partner-group","d-flex","align-item-center"],["for","taxCode",1,"mr-4"],["nz-input","","id","taxCode","formControlName","tax_code","required",""],["nz-input","","id","image_name","formControlName","image_name","placeholder","1;2(*.png)",1,"partner_id","ml-1"],[1,"col-md-5"],["for","customerName"],["nz-input","","id","customerName","formControlName","customer_name"],["nz-input","","id","email","formControlName","email","required",""],["nz-input","","id","od_khid","placeholder","KH_ID","formControlName","od_khid",1,"partner_id","ml-1","border-warning",3,"ngModelChange"],["for","phone"],["nz-input","","id","phone","formControlName","phone"],[1,"row","d-flex","ml-n1","content_row"],[1,"col-7"],["for","content_required"],["nz-input","","id","content_required","formControlName","content_required"],[1,"col-5"],["for","reception_time"],["nz-input","","id","reception_time","formControlName","reception_time"],["for","teamviewer"],["nz-input","","id","teamviewer","formControlName","teamviewer"],[1,"row","d-flex","ml-n1"],["for","content_help"],["nz-input","","id","content_help","formControlName","content_help"],["for","complete_time"],["nz-input","","id","complete_time","formControlName","complete_time"],["nz-checkbox","",3,"ngModel","ngModelOptions","ngModelChange"],["id","help","bindLabel","title","formControlName","help",3,"items","change"],["for","support_help",1,""],["id","support_help","bindLabel","value","formControlName","support_help",3,"items","virtualScroll"],["ngSlSupportHelp",""],["for","soft_names",1,""],["id","soft_names","formControlName","soft_name",1,"required1",3,"items","virtualScroll"],["for","companyName"],["nz-input","","id","companyName","formControlName","company_name"],["for","productId",1,""],["id","productId","bindLabel","name","formControlName","product",3,"items","virtualScroll"],["cProduct",""],[1,"col-lg-6","col-md-12","col-lr"],["class","col-md-12",4,"ngIf"],[1,"col-6","col-lg-6","col-xl-4"],["nz-checkbox","",1,"show-column",3,"ngModel","ngModelOptions","ngModelChange","click"],["nz-checkbox","",1,"show-column",3,"ngModel","ngModelOptions","ngModelChange"],["nz-checkbox","",1,"show-column","chk-email-ticket",3,"ngModel","ngModelOptions","ngModelChange"],["for","subject"],[1,"text-danger","ml-5px",3,"click"],["nz-input","","id","subject","formControlName","subject","placeholder","Ch\u1ec9 nh\u1eadp v\xe0o khi ch\u1ecdn 'E-mail ticket'",1,"border-danger",3,"readonly"],["txSubject",""],["for","content_email"],["nz-input","","id","content_email","rows","1","formControlName","content_email"],["for","body"],["nz-input","","nzAutosize","","id","body","formControlName","body"],["for","note"],["nz-input","","nzAutosize","","id","note","formControlName","note"],["for","content_copy"],["nz-input","","nzAutosize","","id","content_copy","formControlName","content_copy",3,"readOnly"],[1,"row","tool","row-footer",3,"ngClass"],["nz-button","","nzType","primary","type","submit",3,"disabled",4,"ngIf"],["nz-button","","nzType","default","type","button",3,"disabled","click",4,"ngIf"],["nz-button","","nzType","default","type","button",3,"disabled","click"],[1,"fa-regular","fa-circle-check"],["class","fa-regular fa-align-justify",4,"ngIf"],["class","fa-regular fa-arrows-spin fa-spin",4,"ngIf"],["nz-button","","type","button",3,"click"],[1,"fa-brands","fa-dev"],["nz-dropdown","","nz-button","","type","button",3,"disabled","nzDropdownMenu"],[1,"fa-regular","fa-plus"],[3,"ticket"],["nzMenuOther",""],["nz-menu",""],["nz-menu-item","",3,"click",4,"ngIf"],["nz-menu-item","",3,"click"],[1,"fa-regular","fa-arrows-retweet"],["nz-button","","nzType","primary","type","submit",3,"disabled"],["class","fa-regular fa-floppy-disk-circle-arrow-right",4,"ngIf"],[1,"fa-regular","fa-arrows-spin","fa-spin"],[1,"fa-regular","fa-floppy-disk-circle-arrow-right"],[1,"fa-regular","fa-circle-trash"],[1,"fa-regular","fa-align-justify"],[1,"fa-regular","fa-file-plus"],[1,"fal","fa-search"],[1,"fa-regular","fa-user"],[1,"fa-regular","fa-ticket-simple"],[1,"fa-regular","fa-copy"],[1,"fa-regular","fa-xmark","clear-icon",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.onSaveTicket()}),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",3),e.YNc(6,nt,8,0,"div",5),e.YNc(7,Ve,5,0,"div",5),e.YNc(8,Ze,8,0,"div",6),e.TgZ(9,"div",7)(10,"div",8)(11,"label",9),e._uU(12,"K\xeanh - T\xecnh tr\u1ea1ng "),e.TgZ(13,"span",10),e._uU(14,"(*)"),e.qZA(),e._uU(15,":"),e.qZA(),e._UZ(16,"ng-select",11),e.qZA()(),e.TgZ(17,"div",12)(18,"div",8)(19,"label",13),e._uU(20,"Nh\xf3m Ph\u1ea7n m\u1ec1m "),e.TgZ(21,"span",10),e._uU(22,"(*)"),e.qZA(),e._uU(23,": "),e.qZA(),e._UZ(24,"ng-select",14),e.qZA()(),e.TgZ(25,"div",12)(26,"div",8)(27,"label",15),e._uU(28,"Nh\xf3m h\u1ed7 tr\u1ee3 "),e.TgZ(29,"span",10),e._uU(30,"(*)"),e.qZA(),e._uU(31,":"),e.qZA(),e._UZ(32,"ng-select",16),e.qZA()(),e.TgZ(33,"div",17),e._uU(34,"-------"),e.qZA(),e.TgZ(35,"div",18)(36,"div",3)(37,"div",19)(38,"div",8)(39,"label",20),e._uU(40,"Support Team"),e.TgZ(41,"span",10),e._uU(42,"(*)"),e.qZA(),e._uU(43,":"),e.qZA(),e.TgZ(44,"ng-select",21),e.NdJ("change",function(r){return n.changeSupportTeam(r)})("search",function(r){return n.odSearchItem("od_team",r)}),e.qZA()()(),e.TgZ(45,"div",19)(46,"div",8)(47,"label",22),e._uU(48,"Ph\xe2n c\xf4ng cho"),e.TgZ(49,"span",10),e._uU(50,"(*)"),e.qZA(),e._uU(51,":"),e.qZA(),e.TgZ(52,"ng-select",23),e.NdJ("search",function(r){return n.odSearchItem("od_assign",r)}),e.qZA()()(),e.TgZ(53,"div",12)(54,"div",8)(55,"label",24),e._uU(56,"Ticket Subject Type"),e.TgZ(57,"span",10),e._uU(58,"(*)"),e.qZA(),e._uU(59,":"),e.qZA(),e.TgZ(60,"ng-select",25),e.NdJ("search",function(r){return n.odSearchItem("od_subject_type",r)})("change",function(r){return n.changeSubjectType(r)}),e.qZA()()(),e.TgZ(61,"div",19)(62,"div",8)(63,"label",26),e._uU(64,"Replied Status "),e.TgZ(65,"span",10),e._uU(66,"(*)"),e.qZA(),e._uU(67,":"),e.qZA(),e.TgZ(68,"ng-select",27),e.NdJ("search",function(r){return n.odSearchItem("od_repiled_status",r)}),e.qZA()()(),e.TgZ(69,"div",19)(70,"div",8)(71,"label",28),e._uU(72,"Danh m\u1ee5c"),e.TgZ(73,"span",10),e._uU(74,"(*)"),e.qZA(),e._uU(75,":"),e.qZA(),e.TgZ(76,"ng-select",29),e.NdJ("change",function(r){return n.changeCategory(r)})("search",function(r){return n.odSearchItem("od_category",r)}),e.qZA()()(),e.TgZ(77,"div",19)(78,"div",8)(79,"label",30),e._uU(80,"Danh m\u1ee5c ph\u1ee5"),e.TgZ(81,"span",10),e._uU(82,"(*)"),e.qZA(),e._uU(83,":"),e.qZA(),e.TgZ(84,"ng-select",31),e.NdJ("search",function(r){return n.odSearchItem("od_category_sub",r)}),e.qZA()()(),e.TgZ(85,"div",19)(86,"div",8)(87,"label",32),e._uU(88,"Team Head: "),e.qZA(),e._UZ(89,"input",33),e.qZA()(),e.YNc(90,Ue,5,3,"div",5),e.YNc(91,Re,5,2,"div",5),e.YNc(92,Le,6,3,"div",6),e.qZA()(),e.TgZ(93,"div",17),e._uU(94,"-------"),e.qZA(),e.YNc(95,it,11,0,"div",34),e.YNc(96,ot,5,0,"div",35),e.YNc(97,at,10,0,"div",34),e.YNc(98,st,5,0,"div",35),e.YNc(99,rt,18,0,"div",34),e.YNc(100,lt,5,0,"div",35),e.YNc(101,ct,18,0,"div",34),e.YNc(102,dt,5,4,"div",35),e.YNc(103,ut,9,2,"div",6),e.YNc(104,pt,8,2,"div",6),e.YNc(105,mt,5,0,"div",6),e.YNc(106,ht,6,2,"div",6),e.qZA()(),e.YNc(107,vt,29,26,"div",36),e.qZA(),e.YNc(108,yt,34,18,"div",37),e.qZA()()(),e.YNc(109,bt,1,0,"ng-template",null,38,e.W1O)),2&t&&(e.Q6J("formGroup",n.ticketForm),e.xp6(6),e.Q6J("ngIf",n.isViewAll&&!n.isViewSetDefault),e.xp6(1),e.Q6J("ngIf",n.isViewAll&&!n.isViewSetDefault),e.xp6(1),e.Q6J("ngIf",n.isViewAll&&!n.isViewSetDefault),e.xp6(8),e.Q6J("items",n.chanels)("multiple",!0)("hideSelected",!0)("virtualScroll",!0)("closeOnSelect",!1),e.xp6(8),e.Q6J("items",n.softwares)("virtualScroll",!0),e.xp6(8),e.Q6J("items",n.ghelps)("virtualScroll",!0),e.xp6(12),e.Q6J("items",n.odWkTeamItems)("virtualScroll",!0)("loading",n.waitObj.od_team),e.xp6(8),e.Q6J("items",n.odAssignItems)("placeholder","Vui l\xf2ng ch\u1ecdn")("virtualScroll",!0)("loading",n.waitObj.od_assign),e.xp6(8),e.Q6J("items",n.odSubjectTypeItems)("virtualScroll",!0)("loading",n.waitObj.od_subject_type),e.xp6(8),e.Q6J("items",n.odRepliedStatusItems)("virtualScroll",!0)("loading",n.waitObj.od_repiled_status),e.xp6(8),e.Q6J("virtualScroll",!0)("items",n.odCateItems),e.xp6(8),e.Q6J("virtualScroll",!0)("items",n.odCateSubByParent),e.xp6(5),e.Q6J("value",null==n.ticket||null==n.ticket.od_team_head?null:n.ticket.od_team_head.name),e.xp6(1),e.Q6J("ngIf",n.isViewAll||n.isViewSetDefault||n.isViewColOdoo),e.xp6(1),e.Q6J("ngIf",n.isViewAll||n.isViewSetDefault||n.isViewColOdoo),e.xp6(1),e.Q6J("ngIf",n.isViewAll||n.isViewSetDefault||n.isViewColOdoo),e.xp6(3),e.Q6J("ngIf",!n.isViewSetDefault),e.xp6(1),e.Q6J("ngIf",!n.isViewSetDefault),e.xp6(1),e.Q6J("ngIf",!n.isViewSetDefault),e.xp6(1),e.Q6J("ngIf",!n.isViewSetDefault),e.xp6(1),e.Q6J("ngIf",!n.isViewSetDefault),e.xp6(1),e.Q6J("ngIf",!n.isViewSetDefault),e.xp6(1),e.Q6J("ngIf",!n.isViewSetDefault),e.xp6(1),e.Q6J("ngIf",!n.isViewSetDefault),e.xp6(1),e.Q6J("ngIf",n.isViewAll||n.isViewSetDefault),e.xp6(1),e.Q6J("ngIf",n.isViewAll&&!n.isViewSetDefault),e.xp6(1),e.Q6J("ngIf",!1),e.xp6(1),e.Q6J("ngIf",!1),e.xp6(1),e.Q6J("ngIf",!n.isViewSetDefault),e.xp6(1),e.Q6J("ngIf",!n.isViewSetDefault))},directives:[b._Y,b.JL,b.sg,V.O5,ze.Zp,b.Fj,b.JJ,b.u,b.Q7,b.wV,ke.w9,ze.gB,se.w,ce.Ie,b.On,ze.rh,V.mk,D.ix,F.dQ,de.cm,de.wA,Fe,de.RR,ve.wO,ve.r9],styles:["@media (min-width: 768px){.ticket-form .col-md-7>.ant-input-group{margin-top:calc(-1 * var(--bs-gutter-y));margin-right:calc(-.5 * var(--bs-gutter-x));margin-left:calc(-.5 * var(--bs-gutter-x))}}.ticket-form .chk-email-ticket{color:var(--bs-danger)}.ticket-form .clear-icon{cursor:pointer}.ticket-form [nz-button]{margin-right:5px}.ticket-form .card{margin-top:10px;padding:0 10px;border-radius:2px}.ticket-form .card .row.tool{margin-top:10px}.ticket-form .card .row.tool .show-column{padding-top:5px}.user-config .card{padding-bottom:0;margin-top:-10px;margin-bottom:0;border:unset}.user-config .col-body{max-width:100%;flex:0 0 100%}.user-config .row.tool{border-top:2px solid #2f54eb;padding-top:10px;padding-bottom:5px}.user-config .ant-modal-body{padding-bottom:0}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-input{padding-left:3px}.od_tag.ng-select-multiple .ng-value{border:unset!important}.partner-group .partner_id{width:120px;font-weight:700}.partner-group .chk_image{color:var(--danger)}.partner-group .img_group{max-width:155px;font-weight:700;top:0}.partner-group .img_group .img_id:hover,.partner-group .img_group .img_id:focus{z-index:unset}.partner-group .img_group .ant-input-group-addon{border:1px solid var(--warning);padding:unset}.partner-group .img_group label{height:unset;margin-right:unset;margin-bottom:unset}.ag-grid2 a{color:var(--blue)!important}.ag-grid2 .fa-check{font-size:1.3rem;color:var(--blue)}.ag-grid2 .fa-exclamation-circle{font-size:1.3rem;color:var(--red);padding-top:3px}\n"],encapsulation:2}),a})()},4971:(ue,H,u)=>{u.d(H,{R:()=>ce});var S=u(9808),e=u(3075),b=u(520),V=u(4376),s=u(5986),P=u(7484),Z=u(1047),B=u(6042),U=u(3087),ee=u(4546),Q=u(6114),J=u(5737),j=u(3677),q=u(3154),Y=u(9727),v=u(2359),E=u(7957),z=u(5e3);let T=(()=>{class I{}return I.\u0275fac=function(F){return new(F||I)},I.\u0275mod=z.oAB({type:I}),I.\u0275inj=z.cJS({imports:[[S.ez]]}),I})(),y=(()=>{class I{}return I.\u0275fac=function(F){return new(F||I)},I.\u0275mod=z.oAB({type:I}),I.\u0275inj=z.cJS({imports:[[S.ez,e.UX,B.sL,Z.o7,U.PV]]}),I})();var m=u(1298),c=u(3868);let C=(()=>{class I{}return I.\u0275fac=function(F){return new(F||I)},I.\u0275mod=z.oAB({type:I}),I.\u0275inj=z.cJS({imports:[[S.ez,e.UX,e.u5,B.sL,U.PV,Q.Wr,E.Qp,m.w,c.aF,J.S]]}),I})();var L=u(226);let le=(()=>{class I{}return I.\u0275fac=function(F){return new(F||I)},I.\u0275mod=z.oAB({type:I}),I.\u0275inj=z.cJS({imports:[[L.vT,S.ez]]}),I})(),se=(()=>{class I{}return I.\u0275fac=function(F){return new(F||I)},I.\u0275mod=z.oAB({type:I}),I.\u0275inj=z.cJS({imports:[[S.ez,e.UX,e.u5,B.sL,U.PV,Q.Wr,E.Qp,j.b1]]}),I})(),ce=(()=>{class I{}return I.\u0275fac=function(F){return new(F||I)},I.\u0275mod=z.oAB({type:I}),I.\u0275inj=z.cJS({imports:[[S.ez,b.JF,e.u5,e.UX,T,y,C,V.A0,q.Hb,P.vh,Z.o7,Q.Wr,j.b1,s.LV,J.S,B.sL,U.PV,E.Qp,v.L,ee.U5,Y.gR,le,se]]}),I})()},6114:(ue,H,u)=>{u.d(H,{Ie:()=>v,Wr:()=>z,ub:()=>E});var S=u(655),e=u(5e3),b=u(3075),V=u(7579),s=u(4968),P=u(2722),Z=u(1721),B=u(5911),U=u(226),ee=u(9808);const Q=["*"],J=["inputElement"],j=["nz-checkbox",""];function q(T,y){if(1&T){const m=e.EpF();e.TgZ(0,"label",1),e.NdJ("nzCheckedChange",function(C){const te=e.CHM(m).$implicit;return e.oxw().onCheckedChange(te,C)}),e.TgZ(1,"span"),e._uU(2),e.qZA()()}if(2&T){const m=y.$implicit,c=e.oxw();e.Q6J("nzDisabled",m.disabled||c.nzDisabled)("nzChecked",m.checked),e.xp6(2),e.Oqu(m.label)}}let Y=(()=>{class T{constructor(m,c){this.nzOnChange=new e.vpe,this.checkboxList=[],m.addClass(c.nativeElement,"ant-checkbox-group")}addCheckbox(m){this.checkboxList.push(m)}removeCheckbox(m){this.checkboxList.splice(this.checkboxList.indexOf(m),1)}onChange(){const m=this.checkboxList.filter(c=>c.nzChecked).map(c=>c.nzValue);this.nzOnChange.emit(m)}}return T.\u0275fac=function(m){return new(m||T)(e.Y36(e.Qsj),e.Y36(e.SBq))},T.\u0275cmp=e.Xpm({type:T,selectors:[["nz-checkbox-wrapper"]],outputs:{nzOnChange:"nzOnChange"},exportAs:["nzCheckboxWrapper"],ngContentSelectors:Q,decls:1,vars:0,template:function(m,c){1&m&&(e.F$t(),e.Hsn(0))},encapsulation:2,changeDetection:0}),T})(),v=(()=>{class T{constructor(m,c,C,L,te,ie){this.ngZone=m,this.elementRef=c,this.nzCheckboxWrapperComponent=C,this.cdr=L,this.focusMonitor=te,this.directionality=ie,this.dir="ltr",this.destroy$=new V.x,this.onChange=()=>{},this.onTouched=()=>{},this.nzCheckedChange=new e.vpe,this.nzValue=null,this.nzAutoFocus=!1,this.nzDisabled=!1,this.nzIndeterminate=!1,this.nzChecked=!1,this.nzId=null}innerCheckedChange(m){this.nzDisabled||(this.nzChecked=m,this.onChange(this.nzChecked),this.nzCheckedChange.emit(this.nzChecked),this.nzCheckboxWrapperComponent&&this.nzCheckboxWrapperComponent.onChange())}writeValue(m){this.nzChecked=m,this.cdr.markForCheck()}registerOnChange(m){this.onChange=m}registerOnTouched(m){this.onTouched=m}setDisabledState(m){this.nzDisabled=m,this.cdr.markForCheck()}focus(){this.focusMonitor.focusVia(this.inputElement,"keyboard")}blur(){this.inputElement.nativeElement.blur()}ngOnInit(){this.focusMonitor.monitor(this.elementRef,!0).pipe((0,P.R)(this.destroy$)).subscribe(m=>{m||Promise.resolve().then(()=>this.onTouched())}),this.nzCheckboxWrapperComponent&&this.nzCheckboxWrapperComponent.addCheckbox(this),this.directionality.change.pipe((0,P.R)(this.destroy$)).subscribe(m=>{this.dir=m,this.cdr.detectChanges()}),this.dir=this.directionality.value,this.ngZone.runOutsideAngular(()=>{(0,s.R)(this.elementRef.nativeElement,"click").pipe((0,P.R)(this.destroy$)).subscribe(m=>{m.preventDefault(),this.focus(),!this.nzDisabled&&this.ngZone.run(()=>{this.innerCheckedChange(!this.nzChecked),this.cdr.markForCheck()})}),(0,s.R)(this.inputElement.nativeElement,"click").pipe((0,P.R)(this.destroy$)).subscribe(m=>m.stopPropagation())})}ngAfterViewInit(){this.nzAutoFocus&&this.focus()}ngOnDestroy(){this.focusMonitor.stopMonitoring(this.elementRef),this.nzCheckboxWrapperComponent&&this.nzCheckboxWrapperComponent.removeCheckbox(this),this.destroy$.next(),this.destroy$.complete()}}return T.\u0275fac=function(m){return new(m||T)(e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(Y,8),e.Y36(e.sBO),e.Y36(B.tE),e.Y36(U.Is,8))},T.\u0275cmp=e.Xpm({type:T,selectors:[["","nz-checkbox",""]],viewQuery:function(m,c){if(1&m&&e.Gf(J,7),2&m){let C;e.iGM(C=e.CRH())&&(c.inputElement=C.first)}},hostAttrs:[1,"ant-checkbox-wrapper"],hostVars:4,hostBindings:function(m,c){2&m&&e.ekj("ant-checkbox-wrapper-checked",c.nzChecked)("ant-checkbox-rtl","rtl"===c.dir)},inputs:{nzValue:"nzValue",nzAutoFocus:"nzAutoFocus",nzDisabled:"nzDisabled",nzIndeterminate:"nzIndeterminate",nzChecked:"nzChecked",nzId:"nzId"},outputs:{nzCheckedChange:"nzCheckedChange"},exportAs:["nzCheckbox"],features:[e._Bn([{provide:b.JU,useExisting:(0,e.Gpc)(()=>T),multi:!0}])],attrs:j,ngContentSelectors:Q,decls:6,vars:11,consts:[[1,"ant-checkbox"],["type","checkbox",1,"ant-checkbox-input",3,"checked","ngModel","disabled","ngModelChange"],["inputElement",""],[1,"ant-checkbox-inner"]],template:function(m,c){1&m&&(e.F$t(),e.TgZ(0,"span",0)(1,"input",1,2),e.NdJ("ngModelChange",function(L){return c.innerCheckedChange(L)}),e.qZA(),e._UZ(3,"span",3),e.qZA(),e.TgZ(4,"span"),e.Hsn(5),e.qZA()),2&m&&(e.ekj("ant-checkbox-checked",c.nzChecked&&!c.nzIndeterminate)("ant-checkbox-disabled",c.nzDisabled)("ant-checkbox-indeterminate",c.nzIndeterminate),e.xp6(1),e.Q6J("checked",c.nzChecked)("ngModel",c.nzChecked)("disabled",c.nzDisabled),e.uIk("autofocus",c.nzAutoFocus?"autofocus":null)("id",c.nzId))},directives:[b.Wl,b.JJ,b.On],encapsulation:2,changeDetection:0}),(0,S.gn)([(0,Z.yF)()],T.prototype,"nzAutoFocus",void 0),(0,S.gn)([(0,Z.yF)()],T.prototype,"nzDisabled",void 0),(0,S.gn)([(0,Z.yF)()],T.prototype,"nzIndeterminate",void 0),(0,S.gn)([(0,Z.yF)()],T.prototype,"nzChecked",void 0),T})(),E=(()=>{class T{constructor(m,c,C,L){this.elementRef=m,this.focusMonitor=c,this.cdr=C,this.directionality=L,this.onChange=()=>{},this.onTouched=()=>{},this.options=[],this.nzDisabled=!1,this.dir="ltr",this.destroy$=new V.x}trackByOption(m,c){return c.value}onCheckedChange(m,c){m.checked=c,this.onChange(this.options)}ngOnInit(){var m;this.focusMonitor.monitor(this.elementRef,!0).pipe((0,P.R)(this.destroy$)).subscribe(c=>{c||Promise.resolve().then(()=>this.onTouched())}),null===(m=this.directionality.change)||void 0===m||m.pipe((0,P.R)(this.destroy$)).subscribe(c=>{this.dir=c,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.focusMonitor.stopMonitoring(this.elementRef),this.destroy$.next(),this.destroy$.complete()}writeValue(m){this.options=m,this.cdr.markForCheck()}registerOnChange(m){this.onChange=m}registerOnTouched(m){this.onTouched=m}setDisabledState(m){this.nzDisabled=m,this.cdr.markForCheck()}}return T.\u0275fac=function(m){return new(m||T)(e.Y36(e.SBq),e.Y36(B.tE),e.Y36(e.sBO),e.Y36(U.Is,8))},T.\u0275cmp=e.Xpm({type:T,selectors:[["nz-checkbox-group"]],hostAttrs:[1,"ant-checkbox-group"],hostVars:2,hostBindings:function(m,c){2&m&&e.ekj("ant-checkbox-group-rtl","rtl"===c.dir)},inputs:{nzDisabled:"nzDisabled"},exportAs:["nzCheckboxGroup"],features:[e._Bn([{provide:b.JU,useExisting:(0,e.Gpc)(()=>T),multi:!0}])],decls:1,vars:2,consts:[["nz-checkbox","","class","ant-checkbox-group-item",3,"nzDisabled","nzChecked","nzCheckedChange",4,"ngFor","ngForOf","ngForTrackBy"],["nz-checkbox","",1,"ant-checkbox-group-item",3,"nzDisabled","nzChecked","nzCheckedChange"]],template:function(m,c){1&m&&e.YNc(0,q,3,3,"label",0),2&m&&e.Q6J("ngForOf",c.options)("ngForTrackBy",c.trackByOption)},directives:[v,ee.sg],encapsulation:2}),(0,S.gn)([(0,Z.yF)()],T.prototype,"nzDisabled",void 0),T})(),z=(()=>{class T{}return T.\u0275fac=function(m){return new(m||T)},T.\u0275mod=e.oAB({type:T}),T.\u0275inj=e.cJS({imports:[[U.vT,ee.ez,b.u5,B.rt]]}),T})()},3868:(ue,H,u)=>{u.d(H,{Dg:()=>E,Of:()=>z,aF:()=>T});var S=u(5e3),e=u(655),b=u(3075),V=u(4707),s=u(7579),P=u(4968),Z=u(2722),B=u(1721),U=u(226),ee=u(5911),Q=u(9808);const J=["*"],j=["inputElement"],q=["nz-radio",""];let Y=(()=>{class y{}return y.\u0275fac=function(c){return new(c||y)},y.\u0275dir=S.lG2({type:y,selectors:[["","nz-radio-button",""]]}),y})(),v=(()=>{class y{constructor(){this.selected$=new V.t(1),this.touched$=new s.x,this.disabled$=new V.t(1),this.name$=new V.t(1)}touch(){this.touched$.next()}select(c){this.selected$.next(c)}setDisabled(c){this.disabled$.next(c)}setName(c){this.name$.next(c)}}return y.\u0275fac=function(c){return new(c||y)},y.\u0275prov=S.Yz7({token:y,factory:y.\u0275fac}),y})(),E=(()=>{class y{constructor(c,C,L){this.cdr=c,this.nzRadioService=C,this.directionality=L,this.value=null,this.destroy$=new s.x,this.onChange=()=>{},this.onTouched=()=>{},this.nzDisabled=!1,this.nzButtonStyle="outline",this.nzSize="default",this.nzName=null,this.dir="ltr"}ngOnInit(){var c;this.nzRadioService.selected$.pipe((0,Z.R)(this.destroy$)).subscribe(C=>{this.value!==C&&(this.value=C,this.onChange(this.value))}),this.nzRadioService.touched$.pipe((0,Z.R)(this.destroy$)).subscribe(()=>{Promise.resolve().then(()=>this.onTouched())}),null===(c=this.directionality.change)||void 0===c||c.pipe((0,Z.R)(this.destroy$)).subscribe(C=>{this.dir=C,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnChanges(c){const{nzDisabled:C,nzName:L}=c;C&&this.nzRadioService.setDisabled(this.nzDisabled),L&&this.nzRadioService.setName(this.nzName)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}writeValue(c){this.value=c,this.nzRadioService.select(c),this.cdr.markForCheck()}registerOnChange(c){this.onChange=c}registerOnTouched(c){this.onTouched=c}setDisabledState(c){this.nzDisabled=c,this.nzRadioService.setDisabled(c),this.cdr.markForCheck()}}return y.\u0275fac=function(c){return new(c||y)(S.Y36(S.sBO),S.Y36(v),S.Y36(U.Is,8))},y.\u0275cmp=S.Xpm({type:y,selectors:[["nz-radio-group"]],hostAttrs:[1,"ant-radio-group"],hostVars:8,hostBindings:function(c,C){2&c&&S.ekj("ant-radio-group-large","large"===C.nzSize)("ant-radio-group-small","small"===C.nzSize)("ant-radio-group-solid","solid"===C.nzButtonStyle)("ant-radio-group-rtl","rtl"===C.dir)},inputs:{nzDisabled:"nzDisabled",nzButtonStyle:"nzButtonStyle",nzSize:"nzSize",nzName:"nzName"},exportAs:["nzRadioGroup"],features:[S._Bn([v,{provide:b.JU,useExisting:(0,S.Gpc)(()=>y),multi:!0}]),S.TTD],ngContentSelectors:J,decls:1,vars:0,template:function(c,C){1&c&&(S.F$t(),S.Hsn(0))},encapsulation:2,changeDetection:0}),(0,e.gn)([(0,B.yF)()],y.prototype,"nzDisabled",void 0),y})(),z=(()=>{class y{constructor(c,C,L,te,ie,ge,pe){this.ngZone=c,this.elementRef=C,this.cdr=L,this.focusMonitor=te,this.directionality=ie,this.nzRadioService=ge,this.nzRadioButtonDirective=pe,this.isNgModel=!1,this.destroy$=new s.x,this.isChecked=!1,this.name=null,this.isRadioButton=!!this.nzRadioButtonDirective,this.onChange=()=>{},this.onTouched=()=>{},this.nzValue=null,this.nzDisabled=!1,this.nzAutoFocus=!1,this.dir="ltr"}focus(){this.focusMonitor.focusVia(this.inputElement,"keyboard")}blur(){this.inputElement.nativeElement.blur()}setDisabledState(c){this.nzDisabled=c,this.cdr.markForCheck()}writeValue(c){this.isChecked=c,this.cdr.markForCheck()}registerOnChange(c){this.isNgModel=!0,this.onChange=c}registerOnTouched(c){this.onTouched=c}ngOnInit(){this.nzRadioService&&(this.nzRadioService.name$.pipe((0,Z.R)(this.destroy$)).subscribe(c=>{this.name=c,this.cdr.markForCheck()}),this.nzRadioService.disabled$.pipe((0,Z.R)(this.destroy$)).subscribe(c=>{this.nzDisabled=c,this.cdr.markForCheck()}),this.nzRadioService.selected$.pipe((0,Z.R)(this.destroy$)).subscribe(c=>{const C=this.isChecked;this.isChecked=this.nzValue===c,this.isNgModel&&C!==this.isChecked&&!1===this.isChecked&&this.onChange(!1),this.cdr.markForCheck()})),this.focusMonitor.monitor(this.elementRef,!0).pipe((0,Z.R)(this.destroy$)).subscribe(c=>{c||(Promise.resolve().then(()=>this.onTouched()),this.nzRadioService&&this.nzRadioService.touch())}),this.directionality.change.pipe((0,Z.R)(this.destroy$)).subscribe(c=>{this.dir=c,this.cdr.detectChanges()}),this.dir=this.directionality.value,this.setupClickListener()}ngAfterViewInit(){this.nzAutoFocus&&this.focus()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.focusMonitor.stopMonitoring(this.elementRef)}setupClickListener(){this.ngZone.runOutsideAngular(()=>{(0,P.R)(this.elementRef.nativeElement,"click").pipe((0,Z.R)(this.destroy$)).subscribe(c=>{c.stopPropagation(),c.preventDefault(),!this.nzDisabled&&!this.isChecked&&this.ngZone.run(()=>{var C;null===(C=this.nzRadioService)||void 0===C||C.select(this.nzValue),this.isNgModel&&(this.isChecked=!0,this.onChange(!0)),this.cdr.markForCheck()})})})}}return y.\u0275fac=function(c){return new(c||y)(S.Y36(S.R0b),S.Y36(S.SBq),S.Y36(S.sBO),S.Y36(ee.tE),S.Y36(U.Is,8),S.Y36(v,8),S.Y36(Y,8))},y.\u0275cmp=S.Xpm({type:y,selectors:[["","nz-radio",""],["","nz-radio-button",""]],viewQuery:function(c,C){if(1&c&&S.Gf(j,7),2&c){let L;S.iGM(L=S.CRH())&&(C.inputElement=L.first)}},hostVars:16,hostBindings:function(c,C){2&c&&S.ekj("ant-radio-wrapper",!C.isRadioButton)("ant-radio-button-wrapper",C.isRadioButton)("ant-radio-wrapper-checked",C.isChecked&&!C.isRadioButton)("ant-radio-button-wrapper-checked",C.isChecked&&C.isRadioButton)("ant-radio-wrapper-disabled",C.nzDisabled&&!C.isRadioButton)("ant-radio-button-wrapper-disabled",C.nzDisabled&&C.isRadioButton)("ant-radio-wrapper-rtl",!C.isRadioButton&&"rtl"===C.dir)("ant-radio-button-wrapper-rtl",C.isRadioButton&&"rtl"===C.dir)},inputs:{nzValue:"nzValue",nzDisabled:"nzDisabled",nzAutoFocus:"nzAutoFocus"},exportAs:["nzRadio"],features:[S._Bn([{provide:b.JU,useExisting:(0,S.Gpc)(()=>y),multi:!0}])],attrs:q,ngContentSelectors:J,decls:6,vars:24,consts:[["type","radio",3,"disabled","checked"],["inputElement",""]],template:function(c,C){1&c&&(S.F$t(),S.TgZ(0,"span"),S._UZ(1,"input",0,1)(3,"span"),S.qZA(),S.TgZ(4,"span"),S.Hsn(5),S.qZA()),2&c&&(S.ekj("ant-radio",!C.isRadioButton)("ant-radio-checked",C.isChecked&&!C.isRadioButton)("ant-radio-disabled",C.nzDisabled&&!C.isRadioButton)("ant-radio-button",C.isRadioButton)("ant-radio-button-checked",C.isChecked&&C.isRadioButton)("ant-radio-button-disabled",C.nzDisabled&&C.isRadioButton),S.xp6(1),S.ekj("ant-radio-input",!C.isRadioButton)("ant-radio-button-input",C.isRadioButton),S.Q6J("disabled",C.nzDisabled)("checked",C.isChecked),S.uIk("autofocus",C.nzAutoFocus?"autofocus":null)("name",C.name),S.xp6(2),S.ekj("ant-radio-inner",!C.isRadioButton)("ant-radio-button-inner",C.isRadioButton))},encapsulation:2,changeDetection:0}),(0,e.gn)([(0,B.yF)()],y.prototype,"nzDisabled",void 0),(0,e.gn)([(0,B.yF)()],y.prototype,"nzAutoFocus",void 0),y})(),T=(()=>{class y{}return y.\u0275fac=function(c){return new(c||y)},y.\u0275mod=S.oAB({type:y}),y.\u0275inj=S.cJS({imports:[[U.vT,Q.ez,b.u5]]}),y})()},5986:(ue,H,u)=>{u.d(H,{LV:()=>Be});var S=u(5e3),e=u(9071),b=u(7429),V=u(7904),s=u(9808),P=u(969),Z=u(226);new S.OlP("nz-empty-component-name");let Se=(()=>{class l{}return l.\u0275fac=function(i){return new(i||l)},l.\u0275mod=S.oAB({type:l}),l.\u0275inj=S.cJS({imports:[[Z.vT,s.ez,b.eL,P.T,V.YI]]}),l})();var Ce=u(3087),xe=u(2683),le=u(1314),se=u(3075),ce=u(5911),I=u(4832),D=u(925),F=u(6950);let Be=(()=>{class l{}return l.\u0275fac=function(i){return new(i||l)},l.\u0275mod=S.oAB({type:l}),l.\u0275inj=S.cJS({imports:[[Z.vT,s.ez,V.YI,se.u5,D.ud,le.U8,Ce.PV,P.T,Se,F.e4,I.g,xe.a,e.Cl,ce.rt]]}),l})()}}]);
