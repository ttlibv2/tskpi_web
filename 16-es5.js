!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,i)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function i(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=a(e);if(t){var o=a(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return r(this,i)}}function r(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{zl81:function(t,o,r){"use strict";r.r(o),r.d(o,"TicketListModule",(function(){return on}));var a,s,d,b,h,f,p,g=r("sEIs"),m=r("nIj0"),k=r("2kYt"),v=r("vobO"),T=r("jY47"),y=r("EM62"),_=(r("ZTXN"),r("C05f"),r("HM3f"),r("g6G6"),r("qvOF")),S=r("D57K"),O=(r("7ucf"),r("jIqt"),r("kuMc"),r("TLy2")),C=r("sg/T"),j=(r("fAiE"),r("HYj3")),z=r("cZZj"),w=(r("ZXq0"),r("UPS/"),r("D69K")),D=r("kZKz"),I=r("6hlU"),x=r("1spV"),A=r("Sv/w"),F=r("Ux30"),V=((a=function e(){u(this,e)}).\u0275mod=y.Lb({type:a}),a.\u0275inj=y.Kb({factory:function(e){return new(e||a)},imports:[[k.b,A.e,D.a,F.c]]}),a),N=r("JbzU"),R=((s=function e(){u(this,e)}).\u0275mod=y.Lb({type:s}),s.\u0275inj=y.Kb({factory:function(e){return new(e||s)},imports:[[k.b,F.c,m.i,z.b,j.f,N.b,D.a,V,I.c,w.b,x.b,_.f,C.a]]}),s),M=r("XS/p"),U=((d=function e(){u(this,e)}).\u0275mod=y.Lb({type:d}),d.\u0275inj=y.Kb({factory:function(e){return new(e||d)},imports:[[k.b,D.a]]}),d),B=r("mybp"),L=r("duTG"),E=r("PlhU"),G=r("MaY1"),K=r("qPk4"),q=r("fWDI"),H=r("B0q8"),P=r("1EA0"),Y=r("d+64"),W=r("U6NZ"),X=((b=function e(){u(this,e)}).\u0275mod=y.Lb({type:b}),b.\u0275inj=y.Kb({factory:function(e){return new(e||b)},imports:[[k.b,m.i,m.q,L.c,B.e,N.b,G.c,W.a,Y.a]]}),b),Q=r("5VY1"),J=r("FP8e"),Z=((p=function e(){u(this,e)}).\u0275mod=y.Lb({type:p}),p.\u0275inj=y.Kb({factory:function(e){return new(e||p)},imports:[[k.b,m.q,L.c,B.e,N.b]]}),p),$=((f=function e(){u(this,e)}).\u0275mod=y.Lb({type:f}),f.\u0275inj=y.Kb({factory:function(e){return new(e||f)},imports:[[k.b,m.q,L.c,B.e,N.b]]}),f),ee=((h=function e(){u(this,e)}).\u0275mod=y.Lb({type:h}),h.\u0275inj=y.Kb({factory:function(e){return new(e||h)},imports:[[k.b,v.d,m.i,m.q,Z,$,T.c,P.b,U,B.e,G.c,H.b,R,q.b,L.c,N.b,W.a,J.a,E.d,Q.a]]}),h),te=r("Tu4v"),ie=r("8SNO"),ne=r("BlE5"),oe=r("pV1J"),ce=r("qBiZ"),re=r("K8Gv");function ae(e,t){return!!Object(re.i)(e)||!Object(re.i)(e.get(t))&&e.get(t)._pendingDirty}function se(e,t,i){t=t||!1,i=Object.assign({},i);var n=[];Object(re.l)(e.email)||n.push(""+e.email);var o=i.subject||de(e);return null!==o&&n.push(o),Object(re.l)(e.tax_code)||n.push("- M\xe3 s\u1ed1 thu\u1ebf / M\xe3 \u0111\u01a1n v\u1ecb: "+e.tax_code),Object(re.l)(e.customer_name)||n.push("- T\xean kh\xe1ch h\xe0ng: "+e.customer_name),Object(re.l)(e.email)||n.push("- Email: "+e.email),n.push(t?le(e).join("\n"):i.body||e.body||le(e).join("\n")),n.push("--------------------------------------------"),n.push(t?ue(e).join("\n"):i.note||e.note||ue(e).join("\n")),n.join("\n")}function le(e,t){var i=[],n=e.edit_ticket||!1;if(ae(t,"phone")&&!Object(re.l)(e.phone)&&(i.push("- S\u1ed1 \u0111i\u1ec7n tho\u1ea1i li\xean h\u1ec7: "+e.phone),n=!0),ae(t,"content_required")&&!Object(re.l)(e.content_required)){var o=e.content_required,c=Object(re.l)(e.soft_name)?"":e.soft_name+" - ",r=Object(re.i)(e.support_help)||Object(re.l)(e.support_help.support)?"":" - "+e.support_help.support;i.push("- N\u1ed9i dung c\u1ea7n h\u1ed7 tr\u1ee3: ".concat(c).concat(o).concat(r)),n=!0}return ae(t,"full_name")&&!Object(re.l)(e.full_name)&&(i.push("- Nh\xe2n vi\xean g\u1eedi th\xf4ng tin: "+e.full_name),n=!0),ae(t,"reception_time")&&!Object(re.l)(e.reception_time)&&(i.push("- Th\u1eddi gian ti\u1ebfp nh\u1eadn: "+e.reception_time),n=!0),e.edit_ticket=n,i}function ue(e,t){var i=[],n=e.edit_ticket||!1;return ae(t,"full_name")&&!Object(re.l)(e.full_name)&&(i.push("- H\u1ecd t\xean: "+e.full_name),n=!0),ae(t,"support_help")&&!Object(re.i)(e.support_help)&&(i.push("- H\xecnh th\u1ee9c h\u1ed7 tr\u1ee3: "+e.support_help.value),n=!0),ae(t,"group_help")&&!Object(re.i)(e.group_help)&&(i.push("- Nh\xf3m h\u1ed7 tr\u1ee3: "+e.group_help.title),n=!0),ae(t,"content_help")&&!Object(re.l)(e.content_help)&&(i.push("- N\u1ed9i dung \u0111\xe3 h\u1ed7 tr\u1ee3: ".concat(e.content_help," ")),n=!0),ae(t,"complete_time")&&!Object(re.l)(e.complete_time)&&(i.push("- Th\u1eddi gian ho\xe0n t\u1ea5t: "+e.complete_time),n=!0),e.edit_ticket=n,i}function de(e){if(!Object(re.l)(e.tax_code)&&!Object(re.g)(e.chanels))return"[HT-".concat(e.chanels[0].code,"]-").concat(e.user_code,"-").concat(e.tax_code,"-").concat(e.ticket_on)}var be,he,fe,pe,ge,me,ke,ve,Te=r("5uDM"),ye=r("BwBJ"),_e=r("J+dc"),Se=r("8j5Y"),Oe=r("ROBh"),Ce=r("3p4X"),je=r("IdLP"),ze=r("6Oco"),we=r("lSkQ"),De=r("2mfu"),Ie=((he=function(){function e(t){u(this,e),this.srv=t}return l(e,[{key:"getUrlApi",value:function(e){var t=this.userCtrl.read().id;return this.srv.cfig().read().fixUrl("odrest/".concat(t,"/").concat(e))}},{key:"odooCfig",value:function(){return this.srv.cfig().read().api_ticket}},{key:"odooUser",value:function(){return this.userCtrl.read().od_user}},{key:"sendGet",value:function(e,t,i){return i=Object.assign({alert:!0},i,{params:t}),this.client.send("GET",e,i)}},{key:"sendPost",value:function(e,t,i){return i=Object.assign({alert:!0},i,{body:t}),this.client.send("POST",e,i)}},{key:"fixPage",value:function(e){return Object.assign({size:80},e)}},{key:"userCtrl",get:function(){return this.srv.inj.get(te.a)}},{key:"client",get:function(){return this.srv.client()}}]),e}()).\u0275fac=function(e){return new(e||he)(y.Xb(De.a))},he.\u0275prov=y.Jb({token:he,factory:he.\u0275fac,providedIn:"root"}),he),xe=((be=function(e){n(i,e);var t=c(i);function i(){return u(this,i),t.apply(this,arguments)}return l(i,[{key:"nameSearch",value:function(e){return this.sendGet(this.getUrlApi("find-user/"+e))}}]),i}(Ie)).\u0275fac=function(e){return Ae(e||be)},be.\u0275prov=y.Jb({token:be,factory:be.\u0275fac,providedIn:"root"}),be),Ae=y.Vb(xe),Fe=((fe=function(e){n(i,e);var t=c(i);function i(){return u(this,i),t.apply(this,arguments)}return l(i,[{key:"searchRead",value:function(e,t){var i=this.getUrlApi("get-partner"),n=Object.assign(Object.assign({},e),this.fixPage(t));return this.sendGet(i,n)}},{key:"getDetail",value:function(e){return this.sendGet(this.getUrlApi("get-partner-byid/"+e))}},{key:"createOne",value:function(e){var t=this.getUrlApi("create-partner");return this.sendPost(t,e,{alert:!1})}}]),i}(Ie)).\u0275fac=function(e){return Ve(e||fe)},fe.\u0275prov=y.Jb({token:fe,factory:fe.\u0275fac,providedIn:"root"}),fe),Ve=y.Vb(Fe),Ne=((pe=function(e){n(i,e);var t=c(i);function i(){return u(this,i),t.apply(this,arguments)}return l(i,[{key:"searchRead",value:function(e,t){var i=this.getUrlApi("get-ticket"),n=Object.assign(Object.assign({},e),this.fixPage(t));return this.sendGet(i,n)}},{key:"getTicketOdooById",value:function(e){return this.sendGet(this.getUrlApi("get-ticket-web?id="+e))}},{key:"getTicketOdooByLink",value:function(e){return this.sendGet(this.getUrlApi("get-ticket-web?link="+e))}},{key:"getDetail",value:function(e){return this.sendGet(this.getUrlApi("get-ticket-byid/"+e))}},{key:"newTicket",value:function(e){return this.createAll(e,"create_ticket")}},{key:"updateTicket",value:function(e){return this.createAll(e,"update_ticket")}},{key:"addNote",value:function(e){return this.createAll(e,"add_note")}},{key:"getNoteDetail",value:function(e){return Object(Oe.a)({id:e})}},{key:"closeTicket",value:function(e){return this.createAll(e,"close_ticket")}},{key:"createAll",value:function(e,t,i){var n=this.getUrlApi("send/".concat(t,"/").concat(e));return this.sendPost(n,i,{alert:!1})}}]),i}(Ie)).\u0275fac=function(e){return Re(e||pe)},pe.\u0275prov=y.Jb({token:pe,factory:pe.\u0275fac,providedIn:"root"}),pe),Re=y.Vb(Ne),Me=((ge=function(e){n(i,e);var t=c(i);function i(){return u(this,i),t.apply(this,arguments)}return l(i,[{key:"searchRead",value:function(e,t){return this.sendGet(this.getUrlApi("get-team"))}},{key:"nameSearch",value:function(e){return Object(ze.b)()}}]),i}(Ie)).\u0275fac=function(e){return Ue(e||ge)},ge.\u0275prov=y.Jb({token:ge,factory:ge.\u0275fac,providedIn:"root"}),ge),Ue=y.Vb(Me),Be=((me=function(e){n(i,e);var t=c(i);function i(){return u(this,i),t.apply(this,arguments)}return l(i,[{key:"searchRead",value:function(e,t){return this.sendGet(this.getUrlApi("get-topic"))}}]),i}(Ie)).\u0275fac=function(e){return Le(e||me)},me.\u0275prov=y.Jb({token:me,factory:me.\u0275fac,providedIn:"root"}),me),Le=y.Vb(Be),Ee=((ke=function(e){n(i,e);var t=c(i);function i(){return u(this,i),t.apply(this,arguments)}return l(i,[{key:"getCategories",value:function(e,t){return this.sendGet(this.getUrlApi("get-category"))}},{key:"getStages",value:function(){return this.sendGet(this.getUrlApi("get-stage"))}},{key:"loadAllInOne",value:function(e){var t=this;return this.sendGet(this.getUrlApi("get-all/"+e)).pipe(Object(Se.a)((function(e){t.srv.shared().catalogs=Object.assign({},t.srv.shared().catalogs,e)})))}}]),i}(Ie)).\u0275fac=function(e){return Ge(e||ke)},ke.\u0275prov=y.Jb({token:ke,factory:ke.\u0275fac,providedIn:"root"}),ke),Ge=y.Vb(Ee),Ke=((ve=function e(t,i,n,o,c,r){u(this,e),this.user=t,this.partner=i,this.ticket=n,this.team=o,this.topic=c,this.cate=r}).\u0275fac=function(e){return new(e||ve)(y.Xb(xe),y.Xb(Fe),y.Xb(Ne),y.Xb(Me),y.Xb(Be),y.Xb(Ee))},ve.\u0275prov=y.Jb({token:ve,factory:ve.\u0275fac,providedIn:"root"}),ve),qe=r("77ZH"),He=r("ZTwM");function Pe(e,t){1&e&&(y.Tb(0,"div",3),y.Tb(1,"label",32),y.Dc(2,"T\xean c\xf4ng ty"),y.Sb(),y.Tb(3,"nz-input-group",33),y.Ob(4,"input",34),y.Ob(5,"input",35),y.Sb(),y.Sb())}function Ye(e,t){1&e&&(y.Tb(0,"div",3),y.Tb(1,"label",36),y.Dc(2,"Ng\u01b0\u1eddi li\xean h\u1ec7 (C\xe1 nh\xe2n *)"),y.Sb(),y.Tb(3,"nz-input-group",33),y.Ob(4,"input",37),y.Ob(5,"input",38),y.Sb(),y.Sb())}function We(e,t){1&e&&(y.Tb(0,"div",3),y.Tb(1,"label",39),y.Dc(2,"\u0110\u1ecba ch\u1ec9"),y.Sb(),y.Ob(3,"input",40),y.Sb())}function Xe(e,t){1&e&&(y.Tb(0,"div",3),y.Tb(1,"label",41),y.Dc(2,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i (C\xe1 nh\xe2n)"),y.Sb(),y.Ob(3,"input",42),y.Sb())}function Qe(e,t){1&e&&y.Ob(0,"i",43)}function Je(e,t){1&e&&y.Ob(0,"i",44)}function Ze(e,t){if(1&e&&(y.Tb(0,"button",45),y.Dc(1,"T\xecm theo API"),y.Sb()),2&e){var i=y.dc();y.jc("disabled",i.disabled)}}function $e(e,t){1&e&&y.Ob(0,"i",43)}function et(e,t){if(1&e){var i=y.Ub();y.Tb(0,"button",46),y.ac("click",(function(){return y.sc(i),y.dc().onCreateContact("person")})),y.Bc(1,$e,1,0,"i",17),y.Tb(2,"span"),y.Dc(3,"+ C\xe1 nh\xe2n"),y.Sb(),y.Sb()}if(2&e){var n=y.dc();y.jc("disabled",n.disabled_person),y.zb(1),y.jc("ngIf",n.isAsyncCreate)}}function tt(e,t){1&e&&y.Ob(0,"i",43)}function it(e,t){if(1&e){var i=y.Ub();y.Tb(0,"button",46),y.ac("click",(function(){return y.sc(i),y.dc().onCreateContact("company")})),y.Bc(1,tt,1,0,"i",17),y.Tb(2,"span"),y.Dc(3,"+ C\xf4ng ty"),y.Sb(),y.Sb()}if(2&e){var n=y.dc();y.jc("disabled",n.disabled_company),y.zb(1),y.jc("ngIf",n.isAsyncCreate)}}var nt=function(){return{standalone:!0}};function ot(e,t){if(1&e){var i=y.Ub();y.Tb(0,"nz-input-group"),y.Tb(1,"label",47),y.ac("ngModelChange",(function(e){return y.sc(i),y.dc().autoUpdate=e})),y.Tb(2,"span"),y.Dc(3,"C\u1eadp nh\u1eadt khi ch\u1ecdn"),y.Sb(),y.Sb(),y.Tb(4,"button",48),y.ac("click",(function(){return y.sc(i),y.dc().onBtnSelectRow()})),y.Dc(5,"Ch\u1ecdn"),y.Sb(),y.Sb()}if(2&e){var n=y.dc();y.zb(1),y.jc("ngModel",n.autoUpdate)("ngModelOptions",y.lc(2,nt))}}var ct,rt=((ct=function(){function e(t,i,n,o,c,r,a){var s=this;u(this,e),this.cdRef=t,this.od=i,this.fb=n,this.modalRef=o,this.cfig=c,this.userCtrl=r,this.shared=a,this.totalRow=void 0,this.searchLimit=100,this.isSearch=!1,this.chkCreate=!1,this.chkUpForm=!1,this.isAsyncCreate=!1,this.autoUpdate=!0,this.searchLog="",this.resultColumns=[],this.resultData=[],this.agRowClick=void 0,this.gridApi=void 0,this.agOption={domLayout:"normal",defaultColDef:{editable:!0,enableValue:!0,enableRowGroup:!0,enablePivot:!1,sortable:!1,resizable:!0,filter:!1},onRowClicked:function(e){return s.onAgRowClick(e)}},this.fieldSearch=[],this.gridColumns=[],this.valueSearch={},this.searchWhere=[{label:"MST",value:"vat",checked:!0},{label:"E-mail",value:"email",checked:!0}]}return l(e,[{key:"ngOnInit",value:function(){this.initTaoForm(),this.createGridCols(),this.onSearch()}},{key:"ngAfterViewInit",value:function(){var e=this;this.gridApi=this.agGrid2.ngx.api,this.gridApi.getColumnDef("vat").cellStyle={color:"red","font-weight":"bold"},qe.a.getColDef(this.gridApi,"open_link",(function(t){t.cellRenderer=function(t){return'<a href="'.concat(e.getUrlView(t),'" target="_blank" class="open_link">Open</i></a>')}}))}},{key:"getUrlView",value:function(e){var t=this.userCtrl.read().od_config.view_partner||"http://conyeu.dev";return re.f.replaceQuery(t,{partnerId:e.data.id})}},{key:"initTaoForm",value:function(){var e=this;this.fieldSearch=[{key:"vat",label:"MST",operator:null},{key:"email",label:"Email",operator:null},{key:"comp_name",label:"T\xean c\xf4ng ty",operator:null},{key:"comp_id",label:"C\xf4ng ty ID",operator:null},{key:"phone",label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",operator:null},{key:"street",label:"\u0110\u1ecba ch\u1ec9",operator:null},{key:"customer_name",label:"Ng\u01b0\u1eddi li\xean h\u1ec7",operator:null},{key:"customer_id",label:"",operator:null}],this.searchFrm=this.fb.group({}),this.fieldSearch.forEach((function(t){var i=e.fb.control(e.valueSearch[t.key]||t.value);e.searchFrm.addControl(t.key,i)}))}},{key:"createGridCols",value:function(){this.resultColumns=[{headerName:"",field:"checked",colId:"checked",width:40,checkboxSelection:!0,headerCheckboxSelection:!0},{headerName:"Link",field:"open_link",colId:"open_link",width:75},{headerName:"M\xe3 s\u1ed1 thu\u1ebf",field:"vat",colId:"vat",width:150},{headerName:"T\xean hi\u1ec3n th\u1ecb",field:"display_name",colId:"display_name",width:400},{headerName:"E-mail",field:"email",colId:"email",width:230},{headerName:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",field:"mobile",colId:"mobile",width:129},{headerName:"Ng\u01b0\u1eddi li\xean h\u1ec7",field:"name",colId:"name",width:168},{headerName:"T\xean c\xf4ng ty",field:"comp_name",colId:"comp_name",width:260}]}},{key:"fieldTrackBy",value:function(e,t){return t?t.key:e}},{key:"setValueFrm",value:function(e,t,i){var n=this;if(i=i||[e],this.agRowClick=this.agRowClick||{},Object(re.l)(t)){var o=i.map((function(e){return n.agRowClick[e]})).filter((function(e){return!Object(re.l)(e)}));t=o.length>0?o[0]:void 0}this.searchFrm.get(e).setValue(t)}},{key:"getValueFrm",value:function(){return this.searchFrm.getRawValue()}},{key:"onCloseRef",value:function(){this.modalRef.destroy()}},{key:"onResetForm",value:function(){this.searchFrm.reset(this.valueSearch),this.chkUpForm=!1}},{key:"formToObj",value:function(e){if(!this.searchFrm.invalid){var t=this.searchFrm.value;return 0===(e=(e=e||Object.keys(t)).filter((function(e){return!Object(re.l)(t[e])}))).length?void 0:e.map((function(e){return i({},e,t[e].trim())})).reduce((function(e,t){return Object.assign(Object.assign({},e),t)}),{})}}},{key:"onAgRowClick",value:function(e){this.agRowClick=e.data,Object(re.i)(this.agRowClick)||(this.setValueFrm("vat"),this.setValueFrm("comp_name",null,["display_name","comp_name"]),this.setValueFrm("comp_id"),this.setValueFrm("street"),this.chkUpForm&&(this.setValueFrm("customer_id",null),this.setValueFrm("customer_name",null),this.setValueFrm("email",null),this.setValueFrm("phone",null)),!this.agRowClick.is_company&&this.chkUpForm&&(this.setValueFrm("customer_id",null,["id"]),this.setValueFrm("email"),this.setValueFrm("customer_name",null,["name"]),this.setValueFrm("phone")))}},{key:"onClickUp",value:function(){this.chkUpForm||this.onResetForm()}},{key:"onBtnSelectRow",value:function(){var e=this.gridApi.getSelectedRows();if(0!==e.length){var t=e[0];Object.keys(t).forEach((function(e){return t[e]=t[e]?t[e]:void 0})),this.modalRef.destroy({item:t,autoUpdate:this.autoUpdate})}else this.shared.alert.warning("<b>Vui l\xf2ng ch\u1ecdn 1 d\xf2ng.</b>")}},{key:"onSearch",value:function(e){var t=this;e=e||this.searchWhere.filter((function(e){return e.checked})).map((function(e){return e.value}));var i=this.formToObj(e);void 0!==i?(this.totalRow=void 0,this.isSearch=!0,console.log("Tim kiem thong tin: "+JSON.stringify(i)),this.od.partner.searchRead(i).subscribe((function(e){t.isSearch=!1,t.resultData=e,t.cdRef.detectChanges(),t.shared.alert.success("T\xecm \u0111\u01b0\u1ee3c: <b>".concat(e.length," k\u1ebft qu\u1ea3.</b>"))}),(function(e){t.isSearch=!1,t.cdRef.detectChanges()}))):this.shared.alert.warning("<b>Vui l\xf2ng nh\u1eadp th\xf4ng tin t\xecm ki\u1ebfm.</b>")}},{key:"onCreateContact",value:function(e){var t=this;if(["person","company"].includes(e)){this.isAsyncCreate=!0;var i=this.getValueFrm(),n={phone:i.phone,mobile:i.phone,email:i.email,company_type:e};if("person"===e){if(Object(re.l)(i.comp_id))return this.shared.alert.warning("<b>Vui l\xf2ng ch\u1ecdn c\xf4ng ty.</b>"),void(this.isAsyncCreate=!1);n=Object.assign(n,{name:i.customer_name||i.email,parent_id:i.comp_id})}else n=Object.assign(n,{name:i.comp_name||i.email,vat:i.vat,street:i.street,parent_id:!1});var o="company"==e?"C\xf4ng ty":"C\xe1 nh\xe2n";this.od.partner.createOne(n).subscribe((function(e){t.isAsyncCreate=!1,t.gridApi.setRowData([e]),t.cdRef.detectChanges(),t.shared.alert.success("[".concat(e.id,"] T\u1ea1o <b>").concat(o,"</b> th\xe0nh c\xf4ng"))}),(function(e){t.isAsyncCreate=!1,t.cdRef.detectChanges(),t.shared.alert.error("X\u1ea3y ra l\u1ed7i t\u1ea1o <b>".concat(o,"</b> > ").concat(e.message," !"))}))}}},{key:"isExistData",get:function(){return void 0!==this.gridApi&&this.gridApi.getSelectedNodes().length>0}},{key:"disabled",get:function(){return this.isSearch||this.isAsyncCreate}},{key:"disabled_person",get:function(){return this.disabled||!Object(re.l)(this.getValueFrm().customer_id)}},{key:"disabled_company",get:function(){return this.disabled||!Object(re.l)(this.getValueFrm().comp_id)}}]),e}()).\u0275fac=function(e){return new(e||ct)(y.Nb(y.h),y.Nb(Ke),y.Nb(m.e),y.Nb(W.b),y.Nb(ce.a),y.Nb(te.a),y.Nb(ie.a))},ct.\u0275cmp=y.Hb({type:ct,selectors:[["cy-search-partner"]],viewQuery:function(e,t){var i;1&e&&y.Hc(we.a,!0),2&e&&y.qc(i=y.bc())&&(t.agGrid2=i.first)},inputs:{fieldSearch:"fieldSearch",gridColumns:"gridColumns",valueSearch:"valueSearch"},decls:46,vars:29,consts:[[1,"partner-search-wrapper"],[1,"row-form","form-body","pd-lr-5",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-6","form-group"],["for","vat"],["nz-input","","id","vat","formControlName","vat",1,"form-control","border","border-success"],["for","email"],["nz-input","","id","email","formControlName","email",1,"form-control","border","border-success"],["class","col-6 form-group",4,"ngIf"],[1,"row","mt-2"],[1,"col-12","d-flex","align-item-center"],["nz-label","",1,"text-info"],[1,"ml-2","w-none",3,"ngModel","ngModelOptions","ngModelChange"],[1,"row","tool"],[1,"col-12","d-flex","align-items-center"],["nz-button","","nzDanger","","type","button",3,"disabled","click"],["nz-button","","nzType","primary",3,"disabled"],["class","fal fa-sync-alt fa-spin",4,"ngIf"],["class","fas fa-cog",4,"ngIf"],["nz-button","","type","button",3,"disabled",4,"ngIf"],["nz-button","","type","button",3,"disabled","click",4,"ngIf"],["nz-checkbox","",3,"ngModel","ngModelOptions","disabled","ngModelChange","click"],["nz-checkbox","",3,"ngModel","ngModelOptions","disabled","ngModelChange"],[1,"row","row-log"],[1,"col-12",3,"innerHtml"],[1,"row","row-data"],[1,"col-12"],[3,"columns","rows","options","agHeight"],[1,"row","row-footer"],[1,"col-12","col-right"],[4,"ngIf"],["nz-button","","nzDanger","",3,"click"],["for","comp_name"],[1,"d-flex"],["nz-input","","id","comp_name","formControlName","comp_name",1,"form-control"],["nz-input","","id","comp_id","formControlName","comp_id",1,"form-control","ml-1","w-5","border","border-danger","font-weight-bold"],["for","customer_name"],["nz-input","","id","customer_name","formControlName","customer_name",1,"form-control"],["nz-input","","id","customer_id","formControlName","customer_id",1,"form-control","ml-1","w-5","border","border-danger","font-weight-bold"],["for","street"],["nz-input","","id","street","formControlName","street",1,"form-control"],["for","phone"],["nz-input","","id","phone","formControlName","phone",1,"form-control"],[1,"fal","fa-sync-alt","fa-spin"],[1,"fas","fa-cog"],["nz-button","","type","button",3,"disabled"],["nz-button","","type","button",3,"disabled","click"],["nz-checkbox","",3,"ngModel","ngModelOptions","ngModelChange"],["nz-button","","nzType","primary",3,"click"]],template:function(e,t){1&e&&(y.Tb(0,"div",0),y.Tb(1,"form",1),y.ac("ngSubmit",(function(){return t.onSearch()})),y.Tb(2,"div",2),y.Tb(3,"div",3),y.Tb(4,"label",4),y.Dc(5,"M\xe3 s\u1ed1 thu\u1ebf"),y.Sb(),y.Ob(6,"input",5),y.Sb(),y.Tb(7,"div",3),y.Tb(8,"label",6),y.Dc(9,"Email (C\xe1 nh\xe2n *)"),y.Sb(),y.Ob(10,"input",7),y.Sb(),y.Bc(11,Pe,6,0,"div",8),y.Bc(12,Ye,6,0,"div",8),y.Bc(13,We,4,0,"div",8),y.Bc(14,Xe,4,0,"div",8),y.Sb(),y.Tb(15,"div",9),y.Tb(16,"div",10),y.Tb(17,"label",11),y.Dc(18,"T\xecm theo: "),y.Sb(),y.Tb(19,"nz-checkbox-group",12),y.ac("ngModelChange",(function(e){return t.searchWhere=e})),y.Sb(),y.Sb(),y.Sb(),y.Tb(20,"div",13),y.Tb(21,"div",14),y.Tb(22,"button",15),y.ac("click",(function(){return t.onResetForm()})),y.Dc(23,"L\u1ea5y t\u1eeb Form"),y.Sb(),y.Tb(24,"button",16),y.Bc(25,Qe,1,0,"i",17),y.Bc(26,Je,1,0,"i",18),y.Tb(27,"span"),y.Dc(28,"T\xecm theo TS24"),y.Sb(),y.Sb(),y.Bc(29,Ze,2,1,"button",19),y.Bc(30,et,4,2,"button",20),y.Bc(31,it,4,2,"button",20),y.Tb(32,"label",21),y.ac("ngModelChange",(function(e){return t.chkUpForm=e}))("click",(function(){return t.onClickUp()})),y.Dc(33,"Up+"),y.Sb(),y.Tb(34,"label",22),y.ac("ngModelChange",(function(e){return t.chkCreate=e})),y.Dc(35,"T\u1ea1o..."),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Tb(36,"div",23),y.Ob(37,"div",24),y.Sb(),y.Tb(38,"div",25),y.Tb(39,"div",26),y.Ob(40,"cy-ag-table",27),y.Sb(),y.Sb(),y.Tb(41,"div",28),y.Tb(42,"div",29),y.Bc(43,ot,6,3,"nz-input-group",30),y.Tb(44,"button",31),y.ac("click",(function(){return t.onCloseRef()})),y.Dc(45,"\u0110\xf3ng"),y.Sb(),y.Sb(),y.Sb(),y.Sb()),2&e&&(y.zb(1),y.jc("formGroup",t.searchFrm),y.zb(10),y.jc("ngIf",t.chkCreate),y.zb(1),y.jc("ngIf",t.chkCreate),y.zb(1),y.jc("ngIf",t.chkCreate),y.zb(1),y.jc("ngIf",t.chkCreate),y.zb(5),y.jc("ngModel",t.searchWhere)("ngModelOptions",y.lc(26,nt)),y.zb(3),y.jc("disabled",t.disabled),y.zb(2),y.jc("disabled",t.disabled),y.zb(1),y.jc("ngIf",t.isSearch),y.zb(1),y.jc("ngIf",!t.isSearch),y.zb(3),y.jc("ngIf",!1),y.zb(1),y.jc("ngIf",t.chkCreate),y.zb(1),y.jc("ngIf",t.chkCreate),y.zb(1),y.jc("ngModel",t.chkUpForm)("ngModelOptions",y.lc(27,nt))("disabled",t.disabled),y.zb(2),y.jc("ngModel",t.chkCreate)("ngModelOptions",y.lc(28,nt))("disabled",t.disabled),y.zb(3),y.jc("innerHtml",t.searchLog,y.tc),y.zb(3),y.jc("columns",t.resultColumns)("rows",t.resultData)("options",t.agOption)("agHeight","200px"),y.zb(3),y.jc("ngIf",t.isExistData))},directives:[m.t,m.m,m.h,B.b,m.d,m.l,m.g,k.n,G.b,m.o,L.a,He.a,x.a,G.a,we.a,B.c],styles:['[class*=" row-"]{margin-bottom:10px}.form-body{padding:5px;border-radius:2px;border:1px solid #ebedf0}.form-body .row .ant-input:not(textarea){height:27px;border-radius:0}.form-body .row.tool{margin-top:5px}.form-body .row.tool .search-limit{width:50px;margin-right:10px}.row-data .ag-body-viewport{min-height:50px;max-height:200px}.row-footer{margin:5px -10px 0;padding:10px 6px 0 16px;text-align:right;border-top:2px solid #e8e8e8;border-radius:0 0 4px 4px}.row-footer .col-left1{text-align:left;padding-left:0;margin-left:-4px}.row-footer .col-left1 .total{font-weight:700;margin-left:5px;color:var(--danger)}.row-footer .col-right{padding-right:5px}.row-footer .col-right .ant-btn:last-child{margin-right:0}.row-footer .col-right .ant-input-group{display:inline-flex;align-items:center;width:unset!important;margin-right:.5rem!important}a.open_link{text-decoration:underline;color:var(--blue)!important}'],encapsulation:2,changeDetection:0}),ct),at=r("XpVc");function st(e,t){1&e&&y.Ob(0,"i",11),2&e&&y.jc("nzType","sync")("nzSpin",!0)}function lt(e,t){1&e&&y.Ob(0,"i",12)}var ut,dt=((ut=function(){function e(t,i,n,o){u(this,e),this.odoo=t,this.shared=i,this.fb=n,this.modal=o,this.isWaitGet=!1}return l(e,[{key:"ngOnInit",value:function(){this.form=this.fb.group({idOrLink:[void 0,m.s.required]})}},{key:"getTicketNum",value:function(){if(!this.form.invalid){var e=this.form.value.idOrLink.trim(),t=Number.parseInt(e);if(Number.isNaN(t)){var i=/.*#id=(\d+).*model=helpdesk\.ticket\&.*/gm.exec(e);return Object(re.g)(i)?void 0:Number.parseInt(i[1])}return t}}},{key:"nzOnCancel",value:function(){this.modal.destroy({})}},{key:"nzOnOk",value:function(){var e=this;if(this.form.invalid)this.shared.alert.warning("Vui l\xf2ng nh\u1eadp [ID] ho\u1eb7c [Link] ticket.");else{var t=this.getTicketNum();Object(re.i)(t)?this.shared.alert.error("Vui l\xf2ng nh\u1eadp \u0111\xfang \u0111\u1ecbnh d\u1ea1ng [ID] ho\u1eb7c [Link] Ticket."):(this.isWaitGet=!0,this.odoo.ticket.getTicketOdooById(t).subscribe((function(t){e.isWaitGet=!1,e.modal.destroy({data:Object.assign(Object.assign({},t),{is_web:!0})})}),(function(i){e.isWaitGet=!1,e.shared.alert.error("[".concat(t,"] \u0110\xe3 x\u1ea3y ra l\u1ed7i l\u1ea5y ticket t\u1eeb web."))})))}}}]),e}()).\u0275fac=function(e){return new(e||ut)(y.Nb(Ke),y.Nb(ie.a),y.Nb(m.e),y.Nb(W.b))},ut.\u0275cmp=y.Hb({type:ut,selectors:[["app-ticket-web"]],decls:19,vars:3,consts:[[1,"get-ticket-web",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12"],[1,"form-group"],["for","ticketNumber"],[1,"required"],["nz-input","","placeholder","Nh\u1eadp [ID] ho\u1eb7c [Link] Ticket","id","ticketNumber","formControlName","idOrLink","required","",1,"note"],["nz-button","","type","submit"],["nz-icon","",3,"nzType","nzSpin",4,"ngIf"],["nz-icon","","nzType","save",4,"ngIf"],["nz-button","","type","button",3,"click"],["nz-icon","",3,"nzType","nzSpin"],["nz-icon","","nzType","save"]],template:function(e,t){1&e&&(y.Tb(0,"form",0),y.ac("ngSubmit",(function(){return t.nzOnOk()})),y.Tb(1,"div",1),y.Tb(2,"div",2),y.Tb(3,"div",3),y.Tb(4,"label",4),y.Dc(5,"ID / Link Ticket "),y.Tb(6,"span",5),y.Dc(7,"(*)"),y.Sb(),y.Dc(8,": "),y.Sb(),y.Ob(9,"input",6),y.Sb(),y.Sb(),y.Sb(),y.Tb(10,"div",1),y.Tb(11,"div",2),y.Tb(12,"button",7),y.Bc(13,st,1,2,"i",8),y.Bc(14,lt,1,0,"i",9),y.Tb(15,"i"),y.Dc(16,"L\u1ea5y Ticket"),y.Sb(),y.Sb(),y.Tb(17,"button",10),y.ac("click",(function(){return t.nzOnCancel()})),y.Dc(18,"\u0110\xf3ng"),y.Sb(),y.Sb(),y.Sb(),y.Sb()),2&e&&(y.jc("formGroup",t.form),y.zb(13),y.jc("ngIf",t.isWaitGet),y.zb(1),y.jc("ngIf",!t.isWaitGet))},directives:[m.t,m.m,m.h,B.b,m.d,m.l,m.g,m.r,L.a,He.a,x.a,k.n,N.a],styles:[""]}),ut);function bt(e,t){1&e&&y.Ob(0,"i",15),2&e&&y.jc("nzType","sync")("nzSpin",!0)}function ht(e,t){1&e&&y.Ob(0,"i",16)}var ft,pt=((ft=function(){function e(t,i,n,o){u(this,e),this.userCtrl=t,this.shared=i,this.fb=n,this.modal=o,this.isWaitGet=!1,this.userDetail=void 0}return l(e,[{key:"ngOnInit",value:function(){this.userDetail=this.userCtrl.read(),this.form=this.fb.group({email:[{value:this.userDetail.email,disabled:!0},m.s.required],token:[{value:this.userDetail.access_token,disabled:!0},m.s.required],password:[void 0,m.s.required]})}},{key:"nzOnCancel",value:function(){this.modal.destroy({})}},{key:"nzOnOk",value:function(){var e=this;if(this.form.invalid)this.shared.alert.warning("Vui l\xf2ng nh\u1eadp \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin.");else{this.isWaitGet=!0;var t=this.form.getRawValue();this.userCtrl.loginTs24(t).subscribe((function(t){e.isWaitGet=!1,e.modal.destroy({data:t})}),(function(t){e.isWaitGet=!1}))}}}]),e}()).\u0275fac=function(e){return new(e||ft)(y.Nb(te.a),y.Nb(ie.a),y.Nb(m.e),y.Nb(W.b))},ft.\u0275cmp=y.Hb({type:ft,selectors:[["cy-login-ts24"]],decls:35,vars:3,consts:[[1,"get-ticket-web",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12"],[1,"form-group"],["for","email"],[1,"required"],["nz-input","","placeholder","Nh\u1eadp e-mail","id","email","formControlName","email","type","email","required","",1,"note"],["for","token"],["nz-input","","placeholder","Nh\u1eadp token","id","token","formControlName","token","required","",1,"note"],["for","password"],["nz-input","","placeholder","Nh\u1eadp m\u1eadt kh\u1ea9u TS24","id","password","formControlName","password","type","password","required","",1,"note"],["nz-button","","type","submit",2,"width","unset"],["nz-icon","",3,"nzType","nzSpin",4,"ngIf"],["nz-icon","","nzType","save",4,"ngIf"],["nz-button","","type","button",3,"click"],["nz-icon","",3,"nzType","nzSpin"],["nz-icon","","nzType","save"]],template:function(e,t){1&e&&(y.Tb(0,"form",0),y.ac("ngSubmit",(function(){return t.nzOnOk()})),y.Tb(1,"div",1),y.Tb(2,"div",2),y.Tb(3,"div",3),y.Tb(4,"label",4),y.Dc(5,"E-mail "),y.Tb(6,"span",5),y.Dc(7,"(*)"),y.Sb(),y.Dc(8,": "),y.Sb(),y.Ob(9,"input",6),y.Sb(),y.Sb(),y.Tb(10,"div",2),y.Tb(11,"div",3),y.Tb(12,"label",7),y.Dc(13,"Token "),y.Tb(14,"span",5),y.Dc(15,"(*)"),y.Sb(),y.Dc(16,": "),y.Sb(),y.Ob(17,"input",8),y.Sb(),y.Sb(),y.Tb(18,"div",2),y.Tb(19,"div",3),y.Tb(20,"label",9),y.Dc(21,"MK TS24 "),y.Tb(22,"span",5),y.Dc(23,"(*)"),y.Sb(),y.Dc(24,": "),y.Sb(),y.Ob(25,"input",10),y.Sb(),y.Sb(),y.Sb(),y.Tb(26,"div",1),y.Tb(27,"div",2),y.Tb(28,"button",11),y.Bc(29,bt,1,2,"i",12),y.Bc(30,ht,1,0,"i",13),y.Tb(31,"i"),y.Dc(32,"L\u1ea5y m\xe3 k\xedch ho\u1ea1t"),y.Sb(),y.Sb(),y.Tb(33,"button",14),y.ac("click",(function(){return t.nzOnCancel()})),y.Dc(34,"\u0110\xf3ng"),y.Sb(),y.Sb(),y.Sb(),y.Sb()),2&e&&(y.jc("formGroup",t.form),y.zb(29),y.jc("ngIf",t.isWaitGet),y.zb(1),y.jc("ngIf",!t.isWaitGet))},directives:[m.t,m.m,m.h,B.b,m.d,m.l,m.g,m.r,L.a,He.a,x.a,k.n,N.a],styles:[""]}),ft),gt=r("ICOb"),mt=["cChanels"],kt=["cProduct"],vt=["ngSlSupportHelp"];function Tt(e,t){1&e&&(y.Tb(0,"div",24),y.Tb(1,"div",8),y.Tb(2,"label",25),y.Dc(3,"Ng\xe0y "),y.Tb(4,"span",10),y.Dc(5,"(*)"),y.Sb(),y.Dc(6,": "),y.Sb(),y.Ob(7,"input",26),y.Sb(),y.Sb())}function yt(e,t){1&e&&(y.Tb(0,"div",24),y.Tb(1,"div",8),y.Tb(2,"label",27),y.Dc(3,"Ticket: "),y.Sb(),y.Ob(4,"input",28),y.Sb(),y.Sb())}function _t(e,t){1&e&&(y.Tb(0,"div",12),y.Tb(1,"div",8),y.Tb(2,"label",29),y.Dc(3,"T\xean NV "),y.Tb(4,"span",10),y.Dc(5,"(*)"),y.Sb(),y.Dc(6,": "),y.Sb(),y.Ob(7,"input",30),y.Sb(),y.Sb())}function St(e,t){if(1&e){var i=y.Ub();y.Tb(0,"div",31),y.Tb(1,"div",3),y.Tb(2,"div",12),y.Tb(3,"div",8),y.Tb(4,"label",32),y.Dc(5,"Support Team"),y.Tb(6,"span",10),y.Dc(7,"(*)"),y.Sb(),y.Dc(8,":"),y.Sb(),y.Tb(9,"ng-select",33),y.ac("search",(function(e){return y.sc(i),y.dc().odSearchItem("od_team",e)})),y.Sb(),y.Sb(),y.Sb(),y.Tb(10,"div",12),y.Tb(11,"div",8),y.Tb(12,"label",34),y.Dc(13,"Ph\xe2n c\xf4ng cho"),y.Tb(14,"span",10),y.Dc(15,"(*)"),y.Sb(),y.Dc(16,":"),y.Sb(),y.Tb(17,"ng-select",35),y.ac("search",(function(e){return y.sc(i),y.dc().odSearchItem("od_assign",e)})),y.Sb(),y.Sb(),y.Sb(),y.Tb(18,"div",12),y.Tb(19,"div",8),y.Tb(20,"label",36),y.Dc(21,"Danh m\u1ee5c"),y.Tb(22,"span",10),y.Dc(23,"(*)"),y.Sb(),y.Dc(24,":"),y.Sb(),y.Tb(25,"ng-select",37),y.ac("change",(function(e){return y.sc(i),y.dc().odChangeItem("od_category",e)}))("search",(function(e){return y.sc(i),y.dc().odSearchItem("od_category",e)})),y.Sb(),y.Sb(),y.Sb(),y.Tb(26,"div",12),y.Tb(27,"div",8),y.Tb(28,"label",38),y.Dc(29,"Topic"),y.Tb(30,"span",10),y.Dc(31,"(*)"),y.Sb(),y.Dc(32,":"),y.Sb(),y.Tb(33,"ng-select",39),y.ac("search",(function(e){return y.sc(i),y.dc().odSearchItem("od_topic",e)})),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb()}if(2&e){var n=y.dc();y.zb(9),y.jc("items",n.odWkTeamItems)("virtualScroll",!0)("loading",n.waitObj.od_team),y.zb(8),y.jc("items",n.odAssignItems)("virtualScroll",!0)("loading",n.waitObj.od_assign),y.zb(8),y.jc("virtualScroll",!0)("items",n.odCateItems),y.zb(8),y.jc("virtualScroll",!0)("items",n.odTopicItems)}}function Ot(e,t){1&e&&(y.Tb(0,"div",17),y.Dc(1,"-------"),y.Sb())}function Ct(e,t){1&e&&(y.Tb(0,"div",40),y.Tb(1,"div",8),y.Tb(2,"nz-input-group",41),y.Tb(3,"label",42),y.Dc(4,"M\xe3 s\u1ed1 thu\u1ebf "),y.Tb(5,"span",10),y.Dc(6,"(*)"),y.Sb(),y.Dc(7,": "),y.Sb(),y.Sb(),y.Tb(8,"nz-input-group",41),y.Ob(9,"input",43),y.Ob(10,"input",44),y.Sb(),y.Sb(),y.Sb())}function jt(e,t){1&e&&(y.Tb(0,"div",45),y.Tb(1,"div",8),y.Tb(2,"label",46),y.Dc(3,"T\xean kh\xe1ch h\xe0ng: "),y.Sb(),y.Ob(4,"input",47),y.Sb(),y.Sb())}function zt(e,t){if(1&e){var i=y.Ub();y.Tb(0,"div",40),y.Tb(1,"div",8),y.Tb(2,"label"),y.Dc(3,"Email + KH_ID "),y.Tb(4,"span",10),y.Dc(5,"(*)"),y.Sb(),y.Dc(6,": "),y.Sb(),y.Tb(7,"nz-input-group",41),y.Ob(8,"input",48),y.Tb(9,"input",49),y.ac("ngModelChange",(function(e){return y.sc(i),y.dc().onChangeKhId(e)})),y.Sb(),y.Sb(),y.Sb(),y.Sb()}}function wt(e,t){1&e&&(y.Tb(0,"div",45),y.Tb(1,"div",8),y.Tb(2,"label",50),y.Dc(3,"S\u1ed1 DT: "),y.Sb(),y.Ob(4,"input",51),y.Sb(),y.Sb())}function Dt(e,t){1&e&&(y.Tb(0,"div",40),y.Tb(1,"nz-input-group",52),y.Tb(2,"div",53),y.Tb(3,"div",8),y.Tb(4,"label",54),y.Dc(5,"N\u1ed9i dung h\u1ed7 tr\u1ee3 "),y.Tb(6,"span",10),y.Dc(7,"(*)"),y.Sb(),y.Dc(8,": "),y.Sb(),y.Ob(9,"input",55),y.Sb(),y.Sb(),y.Tb(10,"div",56),y.Tb(11,"div",8),y.Tb(12,"label",57),y.Dc(13,"TG ti\u1ebfp nh\u1eadn "),y.Tb(14,"span",10),y.Dc(15,"(*)"),y.Sb(),y.Dc(16,": "),y.Sb(),y.Ob(17,"input",58),y.Sb(),y.Sb(),y.Sb(),y.Sb())}function It(e,t){1&e&&(y.Tb(0,"div",45),y.Tb(1,"div",8),y.Tb(2,"label",59),y.Dc(3,"Teamviewer: "),y.Sb(),y.Ob(4,"input",60),y.Sb(),y.Sb())}function xt(e,t){1&e&&(y.Tb(0,"div",40),y.Tb(1,"nz-input-group",52),y.Tb(2,"div",53),y.Tb(3,"div",8),y.Tb(4,"label",61),y.Dc(5,"N\u1ed9i dung \u0111\xe3 h\u1ed7 tr\u1ecd "),y.Tb(6,"span",10),y.Dc(7,"(*)"),y.Sb(),y.Dc(8,": "),y.Sb(),y.Ob(9,"input",62),y.Sb(),y.Sb(),y.Tb(10,"div",56),y.Tb(11,"div",8),y.Tb(12,"label",63),y.Dc(13,"TG ho\xe0n th\xe0nh "),y.Tb(14,"span",10),y.Dc(15,"(*)"),y.Sb(),y.Dc(16,": "),y.Sb(),y.Ob(17,"input",64),y.Sb(),y.Sb(),y.Sb(),y.Sb())}function At(e,t){if(1&e){var i=y.Ub();y.Tb(0,"div",45),y.Tb(1,"div",8),y.Tb(2,"label",65),y.Dc(3,"N\u1ed9i dung m\u1eabu: "),y.Sb(),y.Tb(4,"ng-select",66),y.ac("change",(function(e){return y.sc(i),y.dc().onChangeCHelp(e)})),y.Sb(),y.Sb(),y.Sb()}if(2&e){var n=y.dc();y.zb(4),y.jc("items",n.helps)}}function Ft(e,t){if(1&e&&(y.Tb(0,"div",12),y.Tb(1,"div",8),y.Tb(2,"label",67),y.Dc(3,"H\xecnh th\u1ee9c h\u1ed7 tr\u1ee3 "),y.Tb(4,"span",10),y.Dc(5,"(*)"),y.Sb(),y.Dc(6,": "),y.Sb(),y.Ob(7,"ng-select",68,69),y.Sb(),y.Sb()),2&e){var i=y.dc();y.zb(7),y.jc("items",i.chanels)("virtualScroll",!0)}}function Vt(e,t){if(1&e&&(y.Tb(0,"div",12),y.Tb(1,"div",8),y.Tb(2,"label",70),y.Dc(3,"T\xean ph\u1ea7n m\u1ec1m "),y.Tb(4,"span",10),y.Dc(5,"(*)"),y.Sb(),y.Dc(6,": "),y.Sb(),y.Ob(7,"ng-select",71),y.Sb(),y.Sb()),2&e){var i=y.dc();y.zb(7),y.jc("items",i.SoftNames)("virtualScroll",!0)}}function Nt(e,t){1&e&&(y.Tb(0,"div",12),y.Tb(1,"div",8),y.Tb(2,"label",72),y.Dc(3,"T\xean c\xf4ng ty: "),y.Sb(),y.Ob(4,"input",73),y.Sb(),y.Sb())}function Rt(e,t){if(1&e&&(y.Tb(0,"div",12),y.Tb(1,"div",8),y.Tb(2,"label",74),y.Dc(3,"S\u1ea3n ph\u1ea9m: "),y.Sb(),y.Ob(4,"ng-select",75,76),y.Sb(),y.Sb()),2&e){var i=y.dc();y.zb(4),y.jc("items",i.products)("virtualScroll",!0)}}function Mt(e,t){1&e&&(y.Tb(0,"div",7),y.Tb(1,"div",8),y.Tb(2,"label",82),y.Dc(3,"H\u1ed7 tr\u1ee3 => Copy: "),y.Sb(),y.Ob(4,"textarea",83),y.Sb(),y.Sb())}function Ut(e,t){1&e&&(y.Tb(0,"div",7),y.Tb(1,"div",8),y.Tb(2,"label",84),y.Dc(3,"H\u1ed7 tr\u1ee3 => Subject <-> (Y/C nh\u1eadp m\xe3 s\u1ed1 thu\u1ebf) "),y.Sb(),y.Ob(4,"textarea",85),y.Sb(),y.Sb())}function Bt(e,t){1&e&&(y.Tb(0,"div",7),y.Tb(1,"div",8),y.Tb(2,"label",86),y.Dc(3,"H\u1ed7 tr\u1ee3 => Body: "),y.Sb(),y.Ob(4,"textarea",87),y.Sb(),y.Sb())}function Lt(e,t){1&e&&(y.Tb(0,"div",7),y.Tb(1,"div",8),y.Tb(2,"label",88),y.Dc(3,"H\u1ed7 tr\u1ee3 => Note: "),y.Sb(),y.Ob(4,"textarea",89),y.Sb(),y.Sb())}var Et=function(){return{standalone:!0}};function Gt(e,t){if(1&e){var i=y.Ub();y.Tb(0,"div",77),y.Tb(1,"div",3),y.Bc(2,Mt,5,0,"div",78),y.Bc(3,Ut,5,0,"div",78),y.Bc(4,Bt,5,0,"div",78),y.Bc(5,Lt,5,0,"div",78),y.Sb(),y.Tb(6,"div",79),y.Tb(7,"label",80),y.ac("ngModelChange",(function(e){return y.sc(i),y.dc().isAutoCreate=e}))("click",(function(){return y.sc(i),y.dc().onClickAutoCreate()})),y.Dc(8,"T\u1ef1 \u0111\u1ed9ng t\u1ea1o > Copy"),y.Sb(),y.Tb(9,"label",81),y.ac("ngModelChange",(function(e){return y.sc(i),y.dc().isAutoInput=e})),y.Dc(10,"[TS] T\u1ef1 \u0111\u1ed9ng \u0111i\u1ec1n"),y.Sb(),y.Tb(11,"label",80),y.ac("ngModelChange",(function(e){return y.sc(i),y.dc().isViewAll=e}))("click",(function(){return y.sc(i),y.dc().onClickShowMore()})),y.Dc(12,"Hi\u1ec3n th\u1ecb ALL"),y.Sb(),y.Tb(13,"label",80),y.ac("ngModelChange",(function(e){return y.sc(i),y.dc().isViewColOdoo=e}))("click",(function(){return y.sc(i),y.dc().onClickShowOdoo()})),y.Dc(14,"Hi\u1ec3n th\u1ecb c\u1ed9t TS24"),y.Sb(),y.Tb(15,"label",81),y.ac("ngModelChange",(function(e){return y.sc(i),y.dc().isSaveCache=e})),y.Dc(16,"L\u01b0u Cache"),y.Sb(),y.Tb(17,"label",81),y.ac("ngModelChange",(function(e){return y.sc(i),y.dc().isViewTicket=e})),y.Dc(18,"\u1ea8n Danh s\xe1ch"),y.Sb(),y.Tb(19,"label",81),y.ac("ngModelChange",(function(e){return y.sc(i),y.dc().chkQuestion=e})),y.Dc(20,"L\u01b0u n\u1ed9i dung m\u1eabu"),y.Sb(),y.Sb(),y.Sb()}if(2&e){var n=y.dc();y.zb(2),y.jc("ngIf",!n.isViewAll),y.zb(1),y.jc("ngIf",n.isViewAll),y.zb(1),y.jc("ngIf",n.isViewAll),y.zb(1),y.jc("ngIf",n.isViewAll),y.zb(2),y.jc("ngModel",n.isAutoCreate)("ngModelOptions",y.lc(18,Et)),y.zb(2),y.jc("ngModel",n.isAutoInput)("ngModelOptions",y.lc(19,Et)),y.zb(2),y.jc("ngModel",n.isViewAll)("ngModelOptions",y.lc(20,Et)),y.zb(2),y.jc("ngModel",n.isViewColOdoo)("ngModelOptions",y.lc(21,Et)),y.zb(2),y.jc("ngModel",n.isSaveCache)("ngModelOptions",y.lc(22,Et)),y.zb(2),y.jc("ngModel",n.isViewTicket)("ngModelOptions",y.lc(23,Et)),y.zb(2),y.jc("ngModel",n.chkQuestion)("ngModelOptions",y.lc(24,Et))}}function Kt(e,t){1&e&&y.Ob(0,"i",108),2&e&&y.jc("nzType","sync")("nzSpin",!0)}function qt(e,t){1&e&&y.Ob(0,"i",109)}function Ht(e,t){if(1&e&&(y.Tb(0,"button",106),y.Bc(1,Kt,1,2,"i",97),y.Bc(2,qt,1,0,"i",107),y.Dc(3),y.Sb()),2&e){var i=y.dc(2);y.jc("disabled",i.ticketForm.invalid||i.disabledAction),y.zb(1),y.jc("ngIf",i.isSaveTicket),y.zb(1),y.jc("ngIf",!i.isSaveTicket),y.zb(1),y.Fc("",i.isUpdateTicket?"C\u1eadp nh\u1eadt":"L\u01b0u l\u1ea1i"," ")}}function Pt(e,t){if(1&e){var i=y.Ub();y.Tb(0,"button",94),y.ac("click",(function(){return y.sc(i),y.dc(2).onDeleteTicket()})),y.Ob(1,"i",110),y.Dc(2,"X\xf3a Ticket "),y.Sb()}if(2&e){var n=y.dc(2);y.jc("disabled",n.disabledAction)}}function Yt(e,t){1&e&&y.Ob(0,"i",111)}function Wt(e,t){1&e&&y.Ob(0,"i",108),2&e&&y.jc("nzType","sync")("nzSpin",!0)}function Xt(e,t){if(1&e){var i=y.Ub();y.Tb(0,"button",94),y.ac("click",(function(){return y.sc(i),y.dc(2).onCreateNew()})),y.Ob(1,"i",112),y.Dc(2,"T\u1ea1o m\u1edbi "),y.Sb()}if(2&e){var n=y.dc(2);y.jc("disabled",n.disabledAction)}}function Qt(e,t){if(1&e){var i=y.Ub();y.Tb(0,"button",94),y.ac("click",(function(){return y.sc(i),y.dc(2).onFindPartner()})),y.Ob(1,"i",113),y.Tb(2,"span"),y.Dc(3,"T\xecm KH"),y.Sb(),y.Sb()}if(2&e){var n=y.dc(2);y.jc("disabled",n.disabledAction)}}function Jt(e,t){if(1&e){var i=y.Ub();y.Tb(0,"li",103),y.ac("click",(function(){return y.sc(i),y.dc(2).autoFixTicket()})),y.Ob(1,"i",113),y.Dc(2,"S\u1eeda l\u1ed7i ticket "),y.Sb()}}function Zt(e,t){if(1&e){var i=y.Ub();y.Tb(0,"li",103),y.ac("click",(function(){return y.sc(i),y.dc(2).onCopyTicketWeb()})),y.Ob(1,"i",104),y.Dc(2,"L\u1ea5y ticket "),y.Sb()}}function $t(e,t){if(1&e){var i=y.Ub();y.Tb(0,"li",103),y.ac("click",(function(){return y.sc(i),y.dc(2).onCopyTicket()})),y.Ob(1,"i",104),y.Dc(2,"Sao ch\xe9p "),y.Sb()}}function ei(e,t){if(1&e){var i=y.Ub();y.Tb(0,"li",103),y.ac("click",(function(){return y.sc(i),y.dc(2).onTest()})),y.Ob(1,"i",113),y.Dc(2,"onTest() "),y.Sb()}}function ti(e,t){1&e&&y.Ob(0,"i",108),2&e&&y.jc("nzType","sync")("nzSpin",!0)}function ii(e,t){if(1&e){var i=y.Ub();y.Tb(0,"button",114),y.ac("click",(function(){return y.sc(i),y.dc(2).onOpenUserConfig()})),y.Ob(1,"i",115),y.Bc(2,ti,1,2,"i",97),y.Tb(3,"span"),y.Dc(4,"C\xe0i m\u1eb7c \u0111\u1ecbnh"),y.Sb(),y.Sb()}if(2&e){var n=y.dc(2);y.jc("disabled",n.disabledAction),y.zb(2),y.jc("ngIf",n.isUpdateUser)}}function ni(e,t){if(1&e){var i=y.Ub();y.Tb(0,"div",90),y.Tb(1,"div",91),y.Bc(2,Ht,4,4,"button",92),y.Bc(3,Pt,3,1,"button",93),y.Tb(4,"button",94),y.ac("click",(function(){return y.sc(i),y.dc().onCompleteTicket()})),y.Ob(5,"i",95),y.Dc(6,"Ho\xe0n th\xe0nh "),y.Sb(),y.Tb(7,"button",94),y.ac("click",(function(){return y.sc(i),y.dc().onLoadCatalog()})),y.Bc(8,Yt,1,0,"i",96),y.Bc(9,Wt,1,2,"i",97),y.Tb(10,"span"),y.Dc(11,"T\u1ea3i Danh m\u1ee5c"),y.Sb(),y.Sb(),y.Bc(12,Xt,3,1,"button",93),y.Bc(13,Qt,4,1,"button",93),y.Tb(14,"button",98),y.Ob(15,"i",99),y.Tb(16,"span"),y.Dc(17,"+ Kh\xe1c"),y.Sb(),y.Sb(),y.Tb(18,"nz-dropdown-menu",null,100),y.Tb(20,"ul",101),y.Bc(21,Jt,3,0,"li",102),y.Bc(22,Zt,3,0,"li",102),y.Tb(23,"li",103),y.ac("click",(function(){return y.sc(i),y.dc().onUpdateApiKey()})),y.Ob(24,"i",104),y.Dc(25,"M\xe3 k\xedch ho\u1ea1t "),y.Sb(),y.Bc(26,$t,3,0,"li",102),y.Bc(27,ei,3,0,"li",102),y.Sb(),y.Sb(),y.Bc(28,ii,5,2,"button",105),y.Sb(),y.Sb()}if(2&e){var n=y.rc(19),o=y.dc();y.zb(2),y.jc("ngIf",o.isRole("create")),y.zb(1),y.jc("ngIf",o.isUpdateTicket&&o.isRole("delete")),y.zb(1),y.jc("disabled",o.disabledAction),y.zb(3),y.jc("disabled",o.disabledAction),y.zb(1),y.jc("ngIf",!o.isAsyncCatalog),y.zb(1),y.jc("ngIf",o.isAsyncCatalog),y.zb(3),y.jc("ngIf",o.isRole("create")),y.zb(1),y.jc("ngIf",o.isRole("find_kh")),y.zb(1),y.jc("disabled",o.disabledAction)("nzDropdownMenu",n),y.zb(7),y.jc("ngIf",o.isRole("fix_row")),y.zb(1),y.jc("ngIf",o.isRole("get_tweb")),y.zb(4),y.jc("ngIf",o.isRole("copy")),y.zb(1),y.jc("ngIf",o.isRole("test")),y.zb(1),y.jc("ngIf",o.isRole("cfig_def"))}}var oi,ci=((oi=function(){function t(e,i,n,o,c,r,a,s){u(this,t),this.aRouter=e,this.nzModal=i,this.fb=n,this.shared=o,this.ticketCtrl=c,this.odoo=r,this.user=a,this.ngCfig=s,this.logger=new gt.a(t),this._userCache={},this.save=new y.n,this.remove=new y.n,this.asyncInput=new y.n(!1),this.isInitPageChange=new y.n(!1),this.handlerLoadCate=new y.n,this.isCreateNew=!0,this.isInitPage=!0,this.userCfigModalRef=void 0,this.isViewSetDefault=!1,this.inputUserCfigObj={id:"#UserConfig"},this.acceptEditPartner=!0,this.isViewTicket=!0,this.isAutoLoadCate=!0,this.userDetail=new at.a,this.editTicket=null,this.isSaveTicket=!1,this.isAsyncCatalog=!1,this.setDataFromOther=void 0,this.isAutoCreate=!0,this.isAutoInput=!1,this.isViewAll=!1,this.isViewColOdoo=!1,this.isAutoOpenSaveCfigDef=!1,this.chkQuestion=!1,this.isSaveCache=!1,this.isUpdateUser=!1,this.ghelps=[],this.helps=[],this.chanels=[],this.softwares=[],this.products=[],this.odWkTeamItems=[],this.odAssignItems=[],this.odTopicItems=[],this.odCateItems=[],this.waitObj={od_category:!1,od_team:!1,od_assign:!1,od_topic:!1},this.OD_KEYS={cate:"od_category",team:"od_team",assign:"od_assign",topic:"od_topic",partner:"od_partner"},this.isClickSaveDef=!1,this.isCheckImage=!1,this.ticketNumber=void 0,this.ticketDefault=void 0}return l(t,[{key:"ngOnInit",value:function(){var e=this;this.aRouter.queryParamMap.subscribe((function(t){e.isAutoOpenSaveCfigDef=Object(re.m)(t.get("save_default"))})),this.ngCfig.notFoundText="Kh\xf4ng c\xf3 d\xf2ng n\xe0o.",this.ngCfig.clearAllText="X\xf3a d\u1eef li\u1ec7u",this.isInitPage=!0,this.userDetail=this.user.read(),this.initAutoChk(),this.isAutoLoadCate?this.onLoadCatalog():this.loadCateFromCookie(this.shared.catalogs),this.createFormGroup()}},{key:"ngOnChanges",value:function(e){}},{key:"loadCateFromCookie",value:function(e){var t=this;e=e||this.shared.catalogs,Promise.resolve(e).then((function(e){return Object(S.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:i=t.sent,this.helps=i.questions||[],this.chanels=i.chanels||[],this.softwares=i.softwares||[],this.ghelps=i.group_helps||[],this.odWkTeamItems=i.od_team||[],this.odCateItems=i.od_category||[],this.odAssignItems=i.od_assign||[],this.odTopicItems=i.od_topic||[];case 4:case"end":return t.stop()}}),t,this)})))})).then((function(e){t.onCreateNew(),t.isInitPage=!1}))}},{key:"initAutoChk",value:function(){var e=this.userDetail.config.auto_create;this.isAutoCreate=void 0===e||e,this.isViewAll=this.userDetail.config.view_all,this.isSaveCache=this.userDetail.config.save_cache,this.isViewColOdoo=this.userDetail.config.show_ts24,this.isAutoInput=this.isAutoInput||this.userDetail.config.auto_input}},{key:"ngAfterViewInit",value:function(){}},{key:"odSearchItem",value:function(e,t){var i=this,n="string"==typeof t?t:t.term;if(!(Object(re.l)(n)||n.length<3))switch(e){case this.OD_KEYS.assign:this.waitObj.od_assign=!0,this.odoo.user.nameSearch(n).subscribe((function(e){i.odAssignItems=e,i.waitObj.od_assign=!1}));break;case this.OD_KEYS.team:this.waitObj.od_team=!0,this.odoo.team.nameSearch(n).subscribe((function(e){i.odWkTeamItems=e,i.waitObj.od_team=!1}))}}},{key:"odChangeItem",value:function(t,i){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t===this.OD_KEYS.cate&&!Object(re.i)(i)){n=!1!==n&&this.isAutoInput;var o=this.ticketForm.get(this.OD_KEYS.team);if(Object(re.i)(o.value)||Object(re.g)(o.value)||n){var c=i.wk_team;Object(re.h)(c)||(this.odWkTeamItems=[c].concat(e(this.odWkTeamItems.slice(1)))),o.setValue(c)}var r=this.ticketForm.get(this.OD_KEYS.assign);if(Object(re.i)(r.value)||n){this.odAssignItems=[this.userDetail.od_user,i.manager];var a=this.odAssignItems.filter((function(e){return!0===e.is_select}))[0]||this.odAssignItems[0];r.setValue(a)}var s=this.OD_KEYS.topic,l=this.ticketForm.get(s);if(Object(re.i)(l.value)||n){var u=this.odTopicItems.filter((function(e){return e.category_id[0]===i.id}));this.ticketForm.get(s).setValue(u[0])}}}},{key:"isRole",value:function(e,t){return this.user.read().isRole(e,t)}},{key:"setTicket",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Object.keys(e||{}).forEach((function(t){var i=e[t],n=i instanceof Array&&Object(re.g)(i),o=i instanceof Object&&Object(re.h)(i);(Object(re.i)(i)||n||o)&&delete e[t]})),this.ticketDefault=t?this.createTicketDefault():{showMore:!1,tAuto:!0,showColOdoo:!1},e=Object.assign(this.ticketDefault,e),this.isCreateNew=Object(re.l)(e.ticket_id),Object(re.i)(this.ticketForm)&&this.createFormGroup(),!Object(re.l)(e.ticket_id)){var i=e[this.OD_KEYS.cate]||{},n=this.odCateItems.filter((function(e){return e.id===i.id}));n.length>0&&(e[this.OD_KEYS.cate]=n[0])}if(Object(re.i)(e.support_help)&&!Object(re.g)(e.chanels)&&(e.support_help=e.chanels[e.chanels.length-1]),Object(re.i)(e.soft_name)&&!Object(re.i)(e.software)&&(e.soft_name=e.software.soft_names[0]),!Object(re.i)(e.group_help)&&Object(re.i)(e.group_help.title)){var o=e.group_help.id,c=this.ghelps.filter((function(e){return e.id===o}));e.group_help=c.length>0?c[0]:e.group_help}if(Object(re.i)(e.product_id)||this.products.forEach((function(t){t.extend_id!==e.product_id||(e.product=t)})),!Object(re.h)(e.od_image)){var r=Object.keys(e.od_image)||[];r.length>0&&(e.image_name=r.map((function(e){return e.replace(".png","")})).join(";"),this.setEnableFC("image_name",Object(re.j)(e.is_upfile,!1)))}e.body=Object(re.l)(e.body)?!0===this.isAutoCreate?le(e).join("\n"):")":e.body,e.note=Object(re.l)(e.note)?!0===this.isAutoCreate?ue(e).join("\n"):"":e.note,e.subject=Object(re.l)(e.subject)?!0===this.isAutoCreate?de(e):"":e.subject,e.content_copy=Object(re.l)(e.content_copy)?!0===this.isAutoCreate?se(e,!this.isViewAll):"khong co":e.content_copy,0===e.od_khid&&(e.od_khid=void 0),this.update_contentCopy(e.content_copy),this.update_helpdeskBody(e.content_copy),this.update_helpdeskNote(e.note),this.update_helpdeskSubject(e.subject),re.f.log(e.subject,this.isAutoCreate),this.ticketNumber=e.ticket_number,this.resetForm(e),this.asyncInput.emit(!1),this.isCreateNew=Object(re.i)(e.ticket_id)}},{key:"setEnableFC",value:function(e,t){var i=this.ticketForm.get(e);t?i.enable():i.disable()}},{key:"resetForm",value:function(e){this.ticketForm.reset(Object.assign({},e)),this.odChangeItem(this.OD_KEYS.cate,e[this.OD_KEYS.cate],!1)}},{key:"updateFValue",value:function(e,t){this.ticketForm.get(e).setValue(t)}},{key:"changeEnableOrDisableCHelp",value:function(){var e=this.ticketForm.get("content_help"),t=this.ticketForm.get("content_required"),i=this.ticketForm.get("help");e.valueChanges.subscribe((function(e){Object(re.l)(e)||Object(re.l)(t.value)?i.enable():i.disable()})),t.valueChanges.subscribe((function(t){Object(re.l)(t)||Object(re.l)(e.value)?i.enable():i.disable()}))}},{key:"pathValue",value:function(e,t){this.ticketForm.patchValue(i({},e,t)),!0===this.isAutoCreate&&this.autoFixTicket()}},{key:"onLoadCatalog",value:function(t){var i=this;this.logger.log("------ onLoadCatalog() ------- "),this.isAsyncCatalog=!0;var n=this.shared.loading("L\u1ea5y d\u1eef li\u1ec7u danh m\u1ee5c"),o=this.ticketCtrl.loadCatalogs(!0).pipe(Object(O.a)((function(t){i.chanels=t.chanels,i.helps=t.questions,i.ghelps=t.group_helps,i.softwares=t.softwares,i.products=t.products,i.odCateItems=t[i.OD_KEYS.cate]||[],i.odTopicItems=t[i.OD_KEYS.topic]||[];var n=t[i.OD_KEYS.team]||[];if(i.odWkTeamItems=[{display_name:"-- Ch\u1ecdn Team --"}].concat(e(n)),Object(re.i)(i.formValue[i.OD_KEYS.team])&&1===n.length){var o=n[0].manager,c={id:o[0],display_name:o[1]};i.ticketForm.get(i.OD_KEYS.team).setValue(n[0]),i.ticketForm.get(i.OD_KEYS.assign).setValue(c)}return Object(Oe.a)(t)}))),c=!1,r=Object(Oe.a)(o).pipe(Object(Te.a)((function(e){return e.pipe(Object(ye.a)(1e3))}))).subscribe((function(){}),(function(e){c=!0,r.unsubscribe()}));this.handlerLoadCate.emit(r);var a=Object(Ce.a)(100).subscribe((function(e){if(r.closed){if(i.isAsyncCatalog=!1,i.shared.alert.remove(n.messageId),c||(i.shared.alert.success("\u0110\xe3 l\u1ea5y xong danh m\u1ee5c"),i.shared.catalogs=Object.assign(Object.assign({},i.shared.catalogs),{isAutoLoadCate:!1}),i.isAutoLoadCate=!1,i.isAutoOpenSaveCfigDef&&i.onOpenUserConfig()),i.isInitPage){var o=!0===t?i.fixFormValIsNull(i.editTicket||i.formValue||{}):i.editTicket;i.setTicket(o),i.isInitPage=!1}a.unsubscribe()}}),Object(_e.a)(1))}},{key:"fixFormValIsNull",value:function(e){return Object.keys(e).map((function(t){var n=e[t];return Array.isArray(n)?Object(re.g)(n)&&(n=void 0):"object"==typeof n?Object(re.h)(n)&&(n=void 0):Object(re.l)(n)&&(n=void 0),i({},t,n)})).reduce((function(e,t){return Object.assign(Object.assign({},e),t)}),{})}},{key:"onClickAutoCreate",value:function(){!0===this.isAutoCreate&&this.autoFixTicket()}},{key:"onCreateNew",value:function(e){re.f.log(" -- onCreateNew() --"),e=Object.assign({},e),this.setDataFromOther=void 0,this.save.emit({ticket:void 0,isNew:!0}),this.setTicket(e,!0)}},{key:"onCopyTicket",value:function(){var e=this.formValue;delete e.ticket_id,this.setDataFromOther=void 0,this.setTicket(e,!1)}},{key:"addDayDate",value:function(e,t){return e.setMinutes(e.getMinutes()+t),e}},{key:"onCompleteTicket",value:function(){this.pathValue("complete_time",new k.d("en-US").transform(new Date,"yyyyMMdd-HH:mm"))}},{key:"onOpenUserConfig",value:function(){var e=this;this.userCfigModalRef=this.nzModal.create({nzWidth:700,nzMaskClosable:!1,nzClosable:!1,nzClassName:"user-config",nzTitle:"L\u01b0u d\u1eef li\u1ec7u m\u1eb7c \u0111\u1ecbnh",nzContent:t,nzOkText:"Luu m\u1eb7c \u0111\u1ecbnh",nzCancelText:"\u0110\xf3ng",nzComponentParams:{isViewCfigDef:this.userDetail.roles.cfig_def_input,isViewSetDefault:!0,isAutoInput:!0,isAutoLoadCate:!1},nzOnCancel:function(){return"close"},nzOnOk:function(){return e.updateUserConfig().pipe(Object(Se.a)((function(t){return e.isClickSaveDef=!0}))).toPromise()}}),this.userCfigModalRef.afterClose.subscribe((function(t){"object"==typeof t&&(e._userCache={},e.isAutoOpenSaveCfigDef=!1)}))}},{key:"onChangeKhId",value:function(e){var t=this,i=Object(re.l)(e)||0===Number.parseInt(e);["tax_code","customer_name","email","company_name"].forEach((function(e){var n=t.ticketForm.get(e);i?n.enable():n.disable({emitEvent:!0})}))}},{key:"updateUserConfig",value:function(){var e=this;return new je.a((function(t){re.f.log("updateUserConfig","C\u1eadp nh\u1eadt c\u1ea5u h\xecnh ng\u01b0\u1eddi d\xf9ng.");var i=e.userCfigModalRef.getContentComponent();e.isUpdateUser=!0;var n=e.shared.loading("<b>C\u1eadp nh\u1eadt danh m\u1ee5c m\u1eb7c \u0111\u1ecbnh.</b>"),o=e.user.read(),c=i.formValue,r={name:c.full_name,val_def:{chanel_ids:Object(re.g)(c.chanels)?[]:c.chanels.map((function(e){return e.chanel_id})),ghelp_id:Object(re.i)(c.group_help)?0:c.group_help.id,software_id:Object(re.i)(c.software)?0:c.software.id,product_id:Object(re.i)(c.product)?0:c.product.extend_id,support_help_id:Object(re.i)(c.support_help)?0:c.support_help.chanel_id,od_team_id:Object(re.i)(c[e.OD_KEYS.team])?0:c[e.OD_KEYS.team].id,od_category_id:Object(re.i)(c[e.OD_KEYS.cate])?0:c[e.OD_KEYS.cate].id,od_topic_id:Object(re.i)(c[e.OD_KEYS.topic])?0:c[e.OD_KEYS.topic].id,od_assign_id:Object(re.i)(c[e.OD_KEYS.assign])?0:c[e.OD_KEYS.assign].id,soft_name:c.soft_name},config:{show_ts24:e.isViewColOdoo,auto_create:e.isAutoCreate,auto_input:e.isAutoInput}};Object(re.l)(c.od_user_def)||(r.odoo_user=JSON.parse(c.od_user_def||{})),Object(re.l)(c.cookie_value)||(r.cookie_value=c.cookie_value),Object(re.l)(c.csrf_token)||(r.csrf_token=c.csrf_token),e.user.updateOne(o.id,r).subscribe((function(i){e.isUpdateUser=!1,e.shared.alert.remove(n.messageId),e.shared.alert.success("C\u1eadp nh\u1eadt d\u1eef li\u1ec7u m\u1eb7c \u0111\u1ecbnh xong."),t.next(i),t.complete()}),(function(i){e.isUpdateUser=!1,e.shared.alert.remove(n.messageId),t.error(i)}))}))}},{key:"onCopyTicketWeb",value:function(){var e=this;this.nzModal.create({nzTitle:"L\u1ea5y ticket t\u1eeb Odoo",nzClosable:!1,nzContent:dt,nzMaskClosable:!1,nzOkText:"L\u1ea5y Ticket",nzCancelText:"\u0110\xf3ng",nzFooter:null}).afterClose.subscribe((function(t){if(!Object(re.i)(t)&&!Object(re.h)(t.data)){e.shared.alert.success("\u0110\xe3 l\u1ea5y xong ticket t\u1eeb web.");var i=Object.assign(Object.assign({},t.data),{chanels:void 0,source_text:"odoo"});e.onCreateNew(i)}}))}},{key:"onSaveTicket",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!0===t&&this.ticketForm.invalid?this.shared.showError({error:{code:"230",message:"Ch\u01b0a nh\u1eadp \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin"}}):new je.a((function(t){Object(re.l)(e.ticketNumber)?(t.next("update"),t.complete()):e.nzModal.create({nzTitle:"Th\xf4ng b\xe1o",nzClosable:!1,nzContent:"Ticket n\xe0y \u0111\xe3 t\u1ea1o tr\xean Odoo -> <b>B\u1ea1n c\xf3 mu\u1ed1n c\u1eadp nh\u1eadt l\u1ea1i th\xf4ng tin tr\xean h\u1ec7 th\u1ed1ng.</b>",nzMaskClosable:!1,nzOkText:"C\u1eadp nh\u1eadt",nzCancelText:"Th\xf4i b\u1ecf",nzOnOk:function(){return Promise.resolve("update")}}).afterClose.subscribe((function(e){t.next(e),t.complete()}))})).subscribe((function(t){if("update"===t){e.isSaveTicket=!0;var i={},n=[e.getAndValidateTicket(),e.handleSaveTicket(i)],o=Object(Oe.a).apply(void 0,n).pipe(Object(Te.a)((function(e){return e}))).subscribe((function(t){e.logger.log("K\u1ebft qu\u1ea3: Oki"),i=Object.assign(i,t)}),(function(t){e.logger.log("K\u1ebft qu\u1ea3: Error"),e.logger.log(t),null!=o&&o.unsubscribe()})),c=Object(Ce.a)(1e3).subscribe((function(t){o.closed&&(e.isSaveTicket=!1,c.unsubscribe())}))}}))}},{key:"getAndValidateTicket",value:function(){var e=this;return new je.a((function(t){e.logger.log("getAndValidateTicket() -> Chu\u1ea9n b\u1ecb d\u1eef li\u1ec7u l\u01b0u + c\u1eadp nh\u1eadt ticket");var n=e.formValue,o=e.user.read();if(n.user_id=o.id,n.body=n.body,n.note=n.note,n.subject=n.subject,n.content_copy=n.content_copy,n.ticket_number=Object(re.l)(n.ticket_number)?null:n.ticket_number,n.chanel_ids=n.chanels.map((function(e){return e.chanel_id})),n.product_id=Object(re.i)(n.product)?null:n.product.extend_id,n.software_id=Object(re.i)(n.software)?null:n.software.id,n.support_help_id=Object(re.i)(n.support_help)?null:n.support_help.chanel_id,n.group_help_id=Object(re.i)(n.group_help)?null:n.group_help.id,n.od_category=Object.assign({},n.od_category),!Object(re.h)(n.od_assign)){var c=n.od_assign;n.od_assign={id:c.id,name:c.name,display_name:c.display_name}}Object(re.l)(n.image_name)||(n.od_image=re.a.reduce(n.image_name.split(";"),(function(e){return i({},e,null)}))),e.chkQuestion&&(n.question_save={title:n.content_required,question:n.content_required,reply:n.content_help,type:n.od_category.id,user_id:e.userDetail.id,is_shared:!1}),!0===e.isSaveCache?(e.shared.setByKey("isAutoCreate",e.isAutoCreate),e.shared.setByKey("isViewAll",e.isViewAll),e.shared.setByKey("isSaveCache",e.isSaveCache),e._userCache={chanels:n.chanels,ghelp:Object.assign({},n.group_help),software:Object.assign({},n.software),support_help:Object.assign({},n.support_help),soft_name:n.soft_name,product_id:Object(re.i)(n.product)?void 0:n.product.extend_id,od_team:Object.assign({},n.od_team),od_category:Object.assign({},n.od_category),od_assign:Object.assign({},n.od_assign),od_topic:Object.assign({},n.od_topic)},re.f.log("L\u01b0u cache: ",e._userCache)):e._userCache={};var r=Object.assign({},n);["od_user_def","cookie_value","csrf_token","help","chanels","product","software","support_help","first_chanel","group_help","image_name"].forEach((function(e){return delete r[e]}));var a=r[e.OD_KEYS.cate];["wk_team","manager","sequence"].forEach((function(e){return delete a[e]}));var s=r[e.OD_KEYS.topic];["description","sequence"].forEach((function(e){return delete s[e]})),t.next(Object.assign({},r)),t.complete()}))}},{key:"handleSaveTicket",value:function(e){var t=this;return new je.a((function(i){var n=e.ticket_id;Object(re.l)(n)?(t.logger.log("handleSaveTicket() -> T\u1ea1o m\u1edbi ticket"),t.ticketCtrl.addOne(e).subscribe((function(e){t.editTicket=e,t.setTicket(e,!1),t.save.emit({ticket:e,isNew:Object(re.i)(t.setDataFromOther)}),t.shared.alert.success("[".concat(e.ticket_id,"] Th\xeam m\u1edbi ticket th\xe0nh c\xf4ng.")),t.isSaveTicket=!1,t.asyncInput.emit(!1),t.updateQuestion(e),i.next(e),i.complete()}),(function(e){return i.error(e)}))):(t.logger.log("handleSaveTicket() -> C\u1eadp nh\u1eadt ticket"),t.ticketCtrl.updateOne(n,e).subscribe((function(e){t.setTicket(e,!1),t.save.emit({ticket:e,isNew:!1}),t.shared.alert.success("[".concat(e.ticket_id,"] C\u1eadp nh\u1eadt ticket th\xe0nh c\xf4ng.")),t.isSaveTicket=!1,t.asyncInput.emit(!1),t.updateQuestion(e),i.next(e),i.complete()}),(function(e){return i.error(e)})))}))}},{key:"updateQuestion",value:function(t){var i=t.question_save;Object(re.h)(i)||(this.helps=[].concat(e(this.helps),[i]))}},{key:"onDeleteTicket",value:function(){var e=this;Object(re.i)(this.ticket.ticket_id)?this.shared.alert.warning("Ch\u1ecdn l\u1ea1i d\xf2ng ticket c\u1ea7n x\xf3a."):this.nzModal.confirm({nzTitle:"B\u1ea1n mu\u1ed1n x\xf3a ticket n\xe0y ?",nzCancelText:"H\u1ee7y b\u1ecf",nzOkText:"X\xf3a",nzOnOk:function(){return e.ticketCtrl.deleteOne(e.ticket.ticket_id).toPromise().then((function(){e.remove.emit(e.ticket),e.shared.alert.success("[".concat(e.ticket.ticket_id,"] \u0110\xe3 x\xf3a ticket xong.")),e.onCreateNew()}))}})}},{key:"onClickShowMore",value:function(){this._userCache.showMore=this.isViewAll}},{key:"onClickShowOdoo",value:function(){this._userCache.showColOdoo=this.isViewColOdoo}},{key:"onChangeCHelp",value:function(e){var t=this.formValue;Object(re.l)(t.content_required)&&this.pathValue("content_required",e.question||""),Object(re.l)(t.content_help)&&(this.pathValue("content_help",e.reply),Object(re.l)(t.complete_time)&&this.onCompleteTicket())}},{key:"createFormGroup",value:function(){this.ticketForm=this.fb.group({ticket_id:null,user_code:null,ticket_on:[null,m.s.required],ticket_number:null,ticket_text:null,full_name:null,tax_code:[null,m.s.required],chkQuestion:!1,company_name:null,email:null,phone:null,teamviewer:null,customer_name:null,content_required:null,content_help:null,reception_time:null,complete_time:null,software:[null,m.s.required],chanels:[null,m.s.required],content_copy:null,first_chanel:null,help:[null],group_help:null,support_help:null,soft_name:null,product:null,body:null,note:null,subject:null,image_name:null,od_image:null,od_team:[null],od_assign:[null],od_category:[null],od_topic:null,od_khid:[0],od_partner:null,od_user_def:null,cookie_value:null,csrf_token:null}),this.formValueChange()}},{key:"formValueChange",value:function(){var e=this;this.ticketForm.get("content_help").valueChanges.subscribe((function(t){Object(re.l)(e.formValue.complete_time)&&!Object(re.l)(t)&&e.onCompleteTicket()})),this.ticketForm.get("chanels").valueChanges.subscribe((function(t){Object(re.g)(t)||e.pathValue("support_help",t[t.length-1])})),this.ticketForm.get("software").valueChanges.subscribe((function(t){Object(re.i)(t)||Object(re.g)(t.soft_names)||e.ticketForm.get("soft_name").setValue(t.soft_names[0])})),this.ticketForm.valueChanges.subscribe((function(t){e.ticketForm.dirty&&(e.asyncInput.emit(!0),!0===e.isAutoCreate&&e.autoFixTicket())}))}},{key:"update_helpdeskBody",value:function(e){this.ticketForm.get("body").patchValue(e,{onlySelf:!0})}},{key:"update_helpdeskNote",value:function(e){this.ticketForm.get("note").patchValue(e,{onlySelf:!0})}},{key:"update_helpdeskSubject",value:function(e){this.ticketForm.get("subject").patchValue(e,{onlySelf:!0})}},{key:"update_contentCopy",value:function(e){this.ticketForm.get("content_copy").patchValue(e,{onlySelf:!0})}},{key:"autoFixTicket",value:function(e,t){if(console.info("autoFixTicket"),e=e||this.formValue,Object(re.m)(t)){var i=this.createTicketDefault();this.fixCompleteTime(20,"minute"),this.fixTicketOn_fromReception_time(),Object(re.g)(e.chanels)&&!Object(re.g)(i.chanels)&&this.pathValue("chanels",i.chanels),Object(re.h)(e.software)&&!Object(re.h)(i.software)&&this.pathValue("software",i.software),Object(re.h)(e.group_help)&&!Object(re.h)(i.group_help)&&this.pathValue("group_help",i.group_help),Object(re.h)(e.od_team)&&!Object(re.h)(i.od_team)&&this.pathValue("od_team",i.od_team),Object(re.h)(e.od_assign)&&!Object(re.h)(i.od_assign)&&this.pathValue("od_assign",i.od_assign),Object(re.h)(e.od_category)&&!Object(re.h)(i.od_category)&&this.pathValue("od_category",i.od_category),Object(re.h)(e.od_topic)&&!Object(re.h)(i.od_topic)&&this.pathValue("od_topic",i.od_topic)}var n=le(e).join("\n");this.update_helpdeskBody(n);var o=ue(e).join("\n");this.update_helpdeskNote(o);var c=de(e);this.update_helpdeskSubject(c);var r=se(e,!1,{body:n,note:o,subject:c});return this.update_contentCopy(r),this.formValue}},{key:"fixTicketOn_fromReception_time",value:function(){var e=this.formValue.reception_time;if(!Object(re.l)(e)){var t=(e=e.replace(/ /g,"")).substring(2,8);this.ticketForm.get("ticket_on").patchValue(t),this.ticketForm.get("reception_time").patchValue(e)}}},{key:"fixCompleteTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"minute",i=this.formValue.reception_time;if(!Object(re.l)(i)){var n=this.formValue.complete_time;if(!Object(re.l)(i)&&(Object(re.l)(n)||12==n.length||i==n)){var o=i,c=new Date(Number.parseInt(o.substring(0,4)),Number.parseInt(o.substring(4,6))-1,Number.parseInt(o.substring(6,8)),Number.parseInt(o.substring(9,11)),Number.parseInt(o.substring(12,14))),r=re.c.dateAdd(c,t,e),a=re.c.dateToString(r,"yyyyMMdd-HH:mm");this.ticketForm.get("complete_time").patchValue(a)}}}},{key:"createTicketDefault",value:function(e){var t=this,i=this.user.read(),n=i.val_def||{},o=this._userCache;if(Object(re.g)(o.chanels)&&(o.chanels=(n.chanel_ids||[]).map((function(e){return t.chanels.filter((function(t){return t.chanel_id===e}))[0]})).filter((function(e){return!Object(re.i)(e)}))),Object(re.i)(o.support_help)){var c=n.support_help_id||0;o.support_help=this.chanels.filter((function(e){return e.chanel_id===c}))[0]}if(Object(re.i)(o.software)){var r=n.software_id||0,a=this.softwares.filter((function(e){return e.id===r}));o.software=a.length>0?a[0]:void 0}if(Object(re.i)(o.soft_name)&&(o.soft_name=n.soft_name),Object(re.i)(o.ghelp)){var s=n.ghelp_id||0,l=this.ghelps.filter((function(e){return e.id===s}));o.ghelp=l.length>0?l[0]:void 0}if(Object(re.i)(o.product)){var u=n.product_id||0,d=this.products.filter((function(e){return e.extend_id===u}));o.product=d.length>0?d[0]:void 0}var b=o[this.OD_KEYS.cate];if(Object(re.h)(b)||Object(re.h)(b.wk_team)){var h=n.od_category_id||0,f=(this.shared.catalogs.od_category||this.odCateItems).filter((function(e){return e.id===h}));o[this.OD_KEYS.cate]=f.length>0?f[0]:void 0}if(Object(re.h)(o[this.OD_KEYS.team])){var p=n.od_team_id||0,g=this.odWkTeamItems.filter((function(e){return e.id===p}));o[this.OD_KEYS.team]=g.length>0?g[0]:void 0}if(Object(re.h)(o[this.OD_KEYS.assign])){var m=n.od_assign_id||0,v=this.odAssignItems.filter((function(e){return e.id===m}));o[this.OD_KEYS.assign]=v.length>0?v[0]:void 0}if(Object(re.i)(o[this.OD_KEYS.topic])){var T=n.od_topic_id||0,y=this.odTopicItems.filter((function(e){return e.id===T}));o[this.OD_KEYS.topic]=y.length>0?y[0]:void 0}return{user:i,full_name:i.name,user_id:i.id,user_code:i.token,od_khid:0,chanels:this._userCache.chanels||[],support_help:this._userCache.support_help,software:this._userCache.software||null,soft_name:this._userCache.soft_name,product:this._userCache.product,group_help:this._userCache.ghelp||null,od_team:this._userCache[this.OD_KEYS.team]||null,od_category:this._userCache[this.OD_KEYS.cate]||null,od_topic:this._userCache[this.OD_KEYS.topic]||null,od_assign:this._userCache[this.OD_KEYS.assign]||null,ticket_on:new k.d("en-US").transform(new Date,"yyMMdd"),reception_time:new k.d("en-US").transform(new Date,"yyyyMMdd-HH:mm"),complete_time:new k.d("en-US").transform(new Date,"yyyyMMdd-HH:")}}},{key:"convertObjToColDefs",value:function(e,t){return e.map((function(e){return{colId:e,field:e,headerName:t[e]||e}}))}},{key:"onFindPartner",value:function(){var e=this,t=this.formValue;this.nzModal.create({nzTitle:"T\xecm ki\u1ebfm kh\xe1ch h\xe0ng",nzClosable:!1,nzWidth:900,nzMaskClosable:!1,nzFooter:null,nzContent:rt,nzComponentParams:{fieldSearch:[],valueSearch:{vat:t.tax_code,phone:t.phone,email:t.email,customer_name:t.customer_name}}}).afterClose.pipe(Object(O.a)((function(t){if(t&&!Object(re.i)(t.item)){var i=t.item;e.updateFValue("tax_code",i.vat),e.updateFValue("email",i.email),e.updateFValue("customer_name",i.display_name),e.updateFValue("company_name",i.comp_name),e.updateFValue("od_khid",i.id),e.updateFValue("od_partner",i);var n=e.formValue.phone;if(Object(re.l)(n)){var o=i.mobile||i.phone;"false"===o&&(o=void 0),e.updateFValue("phone",o)}e.autoFixTicket(),!0===t.autoUpdate&&e.onSaveTicket()}return Object(ze.b)()}))).subscribe()}},{key:"ngSelectChange",value:function(e){this.logger.log(e)}},{key:"onUpdateApiKey",value:function(){var e=this;this.nzModal.create({nzTitle:"C\u1eadp nh\u1eadt m\xe3 k\xedch ho\u1ea1t",nzClosable:!1,nzContent:pt,nzMaskClosable:!1,nzOkText:"L\u1ea5y m\xe3 k\xedch ho\u1ea1t",nzCancelText:"\u0110\xf3ng",nzFooter:null}).afterClose.subscribe((function(t){Object(re.i)(t)||Object(re.h)(t.data)||(e.shared.alert.success("\u0110\xe3 l\u1ea5y xong m\xe3 k\xedch ho\u1ea1t."),e.isInitPage=!0,e.onLoadCatalog())}))}},{key:"onTest",value:function(){var e=this;this.odoo.ticket.getNoteDetail(143389).subscribe((function(t){return e.logger.log(t)}),(function(t){return e.logger.warn(t)}))}},{key:"ticket",get:function(){return this.formValue},set:function(e){this.isInitPage?this.editTicket=e:(this.setDataFromOther=!0,this.setTicket(e))}},{key:"formValue",get:function(){return Object(re.i)(this.ticketForm)?{}:Object.assign({},this.ticketForm.getRawValue())}},{key:"isUpdateTicket",get:function(){return!Object(re.i)(this.ticket)&&!Object(re.i)(this.ticket.ticket_id)}},{key:"SoftNames",get:function(){var e=this.formValue.software;return Object(re.i)(e)?[]:e.soft_names}},{key:"disabledAction",get:function(){return this.isSaveTicket||this.isAsyncCatalog||this.isInitPage||this.isUpdateUser}}]),t}()).\u0275fac=function(e){return new(e||oi)(y.Nb(g.a),y.Nb(W.c),y.Nb(m.e),y.Nb(ie.a),y.Nb(ne.a),y.Nb(Ke),y.Nb(te.a),y.Nb(T.b))},oi.\u0275cmp=y.Hb({type:oi,selectors:[["t2t-ticket-form"]],viewQuery:function(e,t){var i;1&e&&(y.xc(mt,!0),y.xc(kt,!0),y.xc(vt,!0)),2&e&&(y.qc(i=y.bc())&&(t.cChanels=i.first),y.qc(i=y.bc())&&(t.cProduct=i.first),y.qc(i=y.bc())&&(t.ngSlSupportHelp=i.first))},inputs:{isCreateNew:"isCreateNew",isInitPage:"isInitPage",userCfigModalRef:"userCfigModalRef",isViewSetDefault:"isViewSetDefault",inputUserCfigObj:"inputUserCfigObj",acceptEditPartner:"acceptEditPartner",isViewTicket:"isViewTicket",isAutoLoadCate:"isAutoLoadCate",ticket:"ticket"},outputs:{save:"save",remove:"remove",asyncInput:"asyncInput",isInitPageChange:"isInitPageChange",handlerLoadCate:"handlerLoadCate"},features:[y.xb],decls:51,vars:29,consts:[[1,"ticket-form",3,"formGroup","ngSubmit"],[1,"card"],[1,"card-body"],[1,"row"],[1,"col-xg-6","col-md-7","col-lr","col-body"],["class","col-md-3",4,"ngIf"],["class","col-md-6",4,"ngIf"],[1,"col-md-12"],[1,"form-group"],[1,""],[1,"required"],["bindLabel","value","formControlName","chanels",1,"required","chanel",3,"items","multiple","hideSelected","virtualScroll","closeOnSelect"],[1,"col-md-6"],["for","software",1,""],["bindLabel","value","formControlName","software",1,"required",3,"items","virtualScroll"],["for","group_help",1,""],["id","groupHelp","bindLabel","title","formControlName","group_help",1,"required",3,"items","virtualScroll"],[1,"col-12"],["class","col-12 col-od",4,"ngIf"],["class","col-12",4,"ngIf"],["class","col-md-7",4,"ngIf"],["class","col-md-5",4,"ngIf"],["class","col-xg-6 col-md-5 col-lr",4,"ngIf"],["class","row tool row-footer",4,"ngIf"],[1,"col-md-3"],["for","ticketOn"],["nz-input","","id","ticketOn","formControlName","ticket_on","required","",1,"note"],["for","ticketNumber"],["nz-input","","type","number","id","ticketNumber","formControlName","ticket_number"],["for","full_name"],["nz-input","","id","full_name","formControlName","full_name","required","",1,"note"],[1,"col-12","col-od"],["for","od_wk_team",1,""],["id","od_wk_team","bindLabel","display_name","formControlName","od_team",1,"required1",3,"items","virtualScroll","loading","search"],["for","od_assign_users",1,""],["id","od_assign_users","bindLabel","display_name","formControlName","od_assign",1,"required1",3,"items","virtualScroll","loading","search"],["for","od_helpdesk_category",1,""],["id","od_helpdesk_category","bindLabel","name","formControlName","od_category",3,"virtualScroll","items","change","search"],["for","od_helpdesk_topic",1,""],["id","od_helpdesk_topic","bindLabel","display_name","formControlName","od_topic",3,"virtualScroll","items","search"],[1,"col-md-7"],[1,"partner-group","d-flex","align-item-center"],["for","taxCode",1,"mr-4"],["nz-input","","id","taxCode","formControlName","tax_code","required",""],["nz-input","","id","image_name","formControlName","image_name","placeholder","1;2(*.png)",1,"partner_id","ml-1"],[1,"col-md-5"],["for","customerName"],["nz-input","","id","customerName","formControlName","customer_name"],["nz-input","","id","email","formControlName","email","required",""],["nz-input","","id","od_khid","placeholder","KH_ID","formControlName","od_khid",1,"partner_id","ml-1","border-warning",3,"ngModelChange"],["for","phone"],["nz-input","","id","phone","formControlName","phone"],[1,"row","d-flex","ml-n1"],[1,"col-7"],["for","content_required"],["nz-input","","id","content_required","formControlName","content_required"],[1,"col-5"],["for","reception_time"],["nz-input","","id","reception_time","formControlName","reception_time"],["for","teamviewer"],["nz-input","","id","teamviewer","formControlName","teamviewer"],["for","content_help"],["nz-input","","id","content_help","formControlName","content_help"],["for","complete_time"],["nz-input","","id","complete_time","formControlName","complete_time"],["for","help",1,""],["bindLabel","title","formControlName","help",3,"items","change"],["for","support_help",1,""],["bindLabel","value","formControlName","support_help",3,"items","virtualScroll"],["ngSlSupportHelp",""],["for","soft_names",1,""],["formControlName","soft_name",1,"required1",3,"items","virtualScroll"],["for","companyName"],["nz-input","","id","companyName","formControlName","company_name"],["for","productId",1,""],["bindLabel","name","formControlName","product",3,"items","virtualScroll"],["cProduct",""],[1,"col-xg-6","col-md-5","col-lr"],["class","col-md-12",4,"ngIf"],[1,"row",2,"margin-left","-12px"],["nz-checkbox","",1,"show-column",3,"ngModel","ngModelOptions","ngModelChange","click"],["nz-checkbox","",1,"show-column",3,"ngModel","ngModelOptions","ngModelChange"],["for","content_copy"],["nz-input","","nzAutosize","","id","content_copy","formControlName","content_copy"],["for","subject"],["nz-input","","id","subject","rows","1","formControlName","subject"],["for","body"],["nz-input","","nzAutosize","","id","body","formControlName","body"],["for","note"],["nz-input","","nzAutosize","","id","note","formControlName","note"],[1,"row","tool","row-footer"],[1,"col-12","d-flex"],["nz-button","","nzType","primary","type","submit",3,"disabled",4,"ngIf"],["nz-button","","nzType","default","type","button",3,"disabled","click",4,"ngIf"],["nz-button","","nzType","default","type","button",3,"disabled","click"],["nz-icon","","nzType","check"],["nz-icon","","nzType","redo",4,"ngIf"],["nz-icon","",3,"nzType","nzSpin",4,"ngIf"],["nz-dropdown","","nz-button","","type","button",3,"disabled","nzDropdownMenu"],["nz-icon","","nzType","solution"],["nzMenuOther",""],["nz-menu",""],["nz-menu-item","",3,"click",4,"ngIf"],["nz-menu-item","",3,"click"],["nz-icon","","nzType","copy"],["nz-button","","nzDanger","","type","button",3,"disabled","click",4,"ngIf"],["nz-button","","nzType","primary","type","submit",3,"disabled"],["nz-icon","","nzType","save",4,"ngIf"],["nz-icon","",3,"nzType","nzSpin"],["nz-icon","","nzType","save"],["nz-icon","","nzType","delete"],["nz-icon","","nzType","redo"],["nz-icon","","nzType","plus"],[1,"fal","fa-search"],["nz-button","","nzDanger","","type","button",3,"disabled","click"],["nz-icon","","nzType","user"]],template:function(e,t){1&e&&(y.Tb(0,"form",0),y.ac("ngSubmit",(function(){return t.onSaveTicket()})),y.Tb(1,"div",1),y.Tb(2,"div",2),y.Tb(3,"div",3),y.Tb(4,"div",4),y.Tb(5,"div",3),y.Bc(6,Tt,8,0,"div",5),y.Bc(7,yt,5,0,"div",5),y.Bc(8,_t,8,0,"div",6),y.Tb(9,"div",7),y.Tb(10,"div",8),y.Tb(11,"label",9),y.Dc(12,"K\xeanh - T\xecnh tr\u1ea1ng "),y.Tb(13,"span",10),y.Dc(14,"(*)"),y.Sb(),y.Dc(15,":"),y.Sb(),y.Ob(16,"ng-select",11),y.Sb(),y.Sb(),y.Tb(17,"div",12),y.Tb(18,"div",8),y.Tb(19,"label",13),y.Dc(20,"Nh\xf3m Ph\u1ea7n m\u1ec1m "),y.Tb(21,"span",10),y.Dc(22,"(*)"),y.Sb(),y.Dc(23,": "),y.Sb(),y.Ob(24,"ng-select",14),y.Sb(),y.Sb(),y.Tb(25,"div",12),y.Tb(26,"div",8),y.Tb(27,"label",15),y.Dc(28,"Nh\xf3m h\u1ed7 tr\u1ee3 "),y.Tb(29,"span",10),y.Dc(30,"(*)"),y.Sb(),y.Dc(31,":"),y.Sb(),y.Ob(32,"ng-select",16),y.Sb(),y.Sb(),y.Tb(33,"div",17),y.Dc(34,"-------"),y.Sb(),y.Bc(35,St,34,10,"div",18),y.Bc(36,Ot,2,0,"div",19),y.Bc(37,Ct,11,0,"div",20),y.Bc(38,jt,5,0,"div",21),y.Bc(39,zt,10,0,"div",20),y.Bc(40,wt,5,0,"div",21),y.Bc(41,Dt,18,0,"div",20),y.Bc(42,It,5,0,"div",21),y.Bc(43,xt,18,0,"div",20),y.Bc(44,At,5,1,"div",21),y.Bc(45,Ft,9,2,"div",6),y.Bc(46,Vt,8,2,"div",6),y.Bc(47,Nt,5,0,"div",6),y.Bc(48,Rt,6,2,"div",6),y.Sb(),y.Sb(),y.Bc(49,Gt,21,25,"div",22),y.Sb(),y.Bc(50,ni,29,15,"div",23),y.Sb(),y.Sb(),y.Sb()),2&e&&(y.jc("formGroup",t.ticketForm),y.zb(6),y.jc("ngIf",t.isViewAll&&!t.isViewSetDefault),y.zb(1),y.jc("ngIf",t.isViewAll&&!t.isViewSetDefault),y.zb(1),y.jc("ngIf",t.isViewAll&&!t.isViewSetDefault),y.zb(8),y.jc("items",t.chanels)("multiple",!0)("hideSelected",!0)("virtualScroll",!0)("closeOnSelect",!1),y.zb(8),y.jc("items",t.softwares)("virtualScroll",!0),y.zb(8),y.jc("items",t.ghelps)("virtualScroll",!0),y.zb(3),y.jc("ngIf",t.isViewColOdoo||t.isViewSetDefault),y.zb(1),y.jc("ngIf",t.isViewColOdoo),y.zb(1),y.jc("ngIf",!t.isViewSetDefault),y.zb(1),y.jc("ngIf",!t.isViewSetDefault),y.zb(1),y.jc("ngIf",!t.isViewSetDefault),y.zb(1),y.jc("ngIf",!t.isViewSetDefault),y.zb(1),y.jc("ngIf",!t.isViewSetDefault),y.zb(1),y.jc("ngIf",!t.isViewSetDefault),y.zb(1),y.jc("ngIf",!t.isViewSetDefault),y.zb(1),y.jc("ngIf",!t.isViewSetDefault),y.zb(1),y.jc("ngIf",t.isViewAll||t.isViewSetDefault),y.zb(1),y.jc("ngIf",t.isViewAll&&!t.isViewSetDefault),y.zb(1),y.jc("ngIf",!1),y.zb(1),y.jc("ngIf",!1),y.zb(1),y.jc("ngIf",!t.isViewSetDefault),y.zb(1),y.jc("ngIf",!t.isViewSetDefault))},directives:[m.t,m.m,m.h,k.n,T.a,m.l,m.g,B.b,m.d,m.r,m.p,B.c,x.a,G.a,m.o,B.a,L.a,He.a,N.a,H.a,H.c,H.d,M.c,M.d],styles:[".ticket-form [nz-button]{margin-right:5px}.ticket-form .card{margin-top:10px;padding:0 10px;border-radius:2px}.ticket-form .card .row.tool{margin-top:10px}.ticket-form .card .row.tool .show-column{padding-top:5px}.col-od .row{margin:auto 0}.ng-select.chanel .ng-select-container{height:40px!important;min-height:40px!important}.ng-select-container{height:27px!important;min-height:27px!important}.user-config .card{padding-bottom:0;margin-top:-10px;margin-bottom:0;border:unset}.user-config .col-body{max-width:100%;flex:0 0 100%}.user-config .row.tool{border-top:2px solid #2f54eb;padding-top:10px;padding-bottom:5px}.user-config .ant-modal-body{padding-bottom:0}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-input{top:3px;padding-left:3px}.partner-group .partner_id{width:120px;font-weight:700}.partner-group .chk_image{color:var(--danger)}.partner-group .img_group{max-width:155px;font-weight:700;top:0}.partner-group .img_group .img_id:focus,.partner-group .img_group .img_id:hover{z-index:unset}.partner-group .img_group .ant-input-group-addon{border:1px solid var(--warning);padding:unset}.partner-group .img_group label{height:unset;margin-right:unset;margin-bottom:unset}.ag-grid2 a{color:var(--blue)!important}.ag-grid2 .fa-check{font-size:1.3rem;color:var(--blue)}.ag-grid2 .fa-exclamation-circle{font-size:1.3rem;color:var(--red);padding-top:3px}"],encapsulation:2}),oi);r("KLQV");var ri,ai,si=r("4e/d"),li=r("UbAx"),ui=r("evcz"),di=r("47ST"),bi=((ri=function(){function e(t,i,n){u(this,e),this.userSys=t,this.odoo=i,this.ticket=n}return l(e,[{key:"NOTICKET",value:function(e,t){return Object(di.a)({code:"NO_TICKET",message:"<b>".concat(t,"</b> > <b>Ticket ch\u01b0a \u0111\u01b0\u1ee3c t\u1ea1o</b>.")})}},{key:"ERR_SRV",value:function(e){return Object(di.a)({message:"X\u1ea3y ra l\u1ed7i c\u1eadp nh\u1eadt th\xf4ng tin ticket l\xean m\xe1y ch\u1ee7.",code:"ERR_SRV",detail:e})}},{key:"checkValidTicket",value:function(e,t){var i=(t=t||["partner","od_team","od_category","od_assign"]).filter((function(t){return re.f.jsonEmpty(e[t])}));return 0===i.length?void 0:{code:"ERR_DATA",message:"X\u1ea3y ra l\u1ed7i > D\u1eef li\u1ec7u ch\u01b0a \u0111\xfang \u1edf field "+i.join("|"),detail:i}}},{key:"createTicket",value:function(e){return this.odoo.ticket.newTicket(e)}},{key:"updateTicket",value:function(e){return this.odoo.ticket.updateTicket(e)}},{key:"addNote",value:function(e){return this.odoo.ticket.addNote(e)}},{key:"uploadFile",value:function(e,t){}},{key:"updateStage",value:function(e,t){var i=e.ticket_id;return Object(re.i)(t)||Object(re.l)(t.id)?Object(di.a)({code:"NO_STAGE",message:"[".concat(i,"] Kh\xf4ng x\xe1c \u0111\u1ecbnh \u0111\u01b0\u1ee3c [tr\u1ea1ng th\xe1i]")}):this.odoo.ticket.closeTicket(i)}},{key:"allInOne",value:function(e,t,i){i=Object.assign({alert:!1},i),e=Object(re.l)(e)||"all"===e?null:e;var n=Object(re.l)(e)?["create_ticket","add_note","add_note_with_img","close_ticket"]:e.split(",");return this.odoo.ticket.createAll(t,n.join(","),i)}}]),e}()).\u0275fac=function(e){return new(e||ri)(y.Xb(te.a),y.Xb(Ke),y.Xb(ne.a))},ri.\u0275prov=y.Jb({token:ri,factory:ri.\u0275fac,providedIn:"root"}),ri),hi=r("cHbk"),fi=((ai=function(){function e(t,i,n,o){u(this,e),this.modal=t,this.shared=i,this.gridField=n,this.fb=o,this.data={},this.count=0}return l(e,[{key:"ngOnInit",value:function(){this.form=this.fb.group({grid_type:[{value:this.data.grid_type,disabled:!0},m.s.required],grid_code:[this.data.grid_code,m.s.required],grid_title:[this.data.grid_title,m.s.required]})}},{key:"onSave",value:function(){var e=this;if(this.form.invalid)this.shared.alert.warning("Vui l\xf2ng nh\u1eadp \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin.");else{var t=this.form.getRawValue();this.gridField.createOrUpdate({grid_type:t.grid_type,grid_code:t.grid_code,grid_title:t.grid_title,index:this.data.index||this.count+1,grid_fields:this.data.columns.map((function(e,t){return function(e,t){return i({},t.getColId(),{index:e,width:t.getActualWidth()})}(t,e)})).reduce((function(e,t){return Object.assign(Object.assign({},e),t)}),{})}).subscribe((function(t){e.shared.alert.success("L\u01b0u m\u1eabu th\xe0nh c\xf4ng."),e.modal.destroy(t)}))}}}]),e}()).\u0275fac=function(e){return new(e||ai)(y.Nb(W.b),y.Nb(ie.a),y.Nb(ui.a),y.Nb(m.e))},ai.\u0275cmp=y.Hb({type:ai,selectors:[["cy-ag-template"]],decls:30,vars:1,consts:[[1,"create-ag-form",3,"formGroup","ngSubmit"],[1,"card"],[1,"card-body"],[1,"row"],[1,"form-group","col-12"],["for","grid_type"],[1,"required"],["nz-input","","id","grid_type","formControlName","grid_type","required",""],["for","grid_code"],["nz-input","","id","grid_code","formControlName","grid_code","required",""],["for","grid_title"],["nz-input","","id","grid_title","formControlName","grid_title","required",""],[1,"row","mt-2"],["nz-button","","nzType","default"],["nz-icon","","nzType","plus"]],template:function(e,t){1&e&&(y.Tb(0,"form",0),y.ac("ngSubmit",(function(){return t.onSave()})),y.Tb(1,"div",1),y.Tb(2,"div",2),y.Tb(3,"div",3),y.Tb(4,"div",4),y.Tb(5,"label",5),y.Dc(6,"Lo\u1ea1i AgGrid: "),y.Tb(7,"span",6),y.Dc(8,"(*)"),y.Sb(),y.Dc(9,": "),y.Sb(),y.Ob(10,"input",7),y.Sb(),y.Tb(11,"div",4),y.Tb(12,"label",8),y.Dc(13,"M\xe3 m\u1eabu: "),y.Tb(14,"span",6),y.Dc(15,"(*)"),y.Sb(),y.Dc(16,": "),y.Sb(),y.Ob(17,"input",9),y.Sb(),y.Tb(18,"div",4),y.Tb(19,"label",10),y.Dc(20,"T\xean m\u1eabu: "),y.Tb(21,"span",6),y.Dc(22,"(*)"),y.Sb(),y.Dc(23,": "),y.Sb(),y.Ob(24,"input",11),y.Sb(),y.Sb(),y.Tb(25,"div",12),y.Tb(26,"div",4),y.Tb(27,"button",13),y.Ob(28,"i",14),y.Dc(29,"L\u01b0u l\u1ea1i "),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb()),2&e&&y.jc("formGroup",t.form)},directives:[m.t,m.m,m.h,B.b,m.d,m.l,m.g,m.r,L.a,He.a,x.a,N.a],styles:[".create-ag-form .row{margin:auto -15px}"],encapsulation:2}),ai),pi=r("J50X"),gi=r("Mr8s"),mi=["agrid"],ki=["ticketForm"],vi=["importExcelRef"],Ti=["linkDown"];function yi(e,t){1&e&&y.Ob(0,"i",31),2&e&&y.jc("nzType","sync")("nzSpin",!0)}function _i(e,t){1&e&&y.Ob(0,"i",32)}function Si(e,t){if(1&e){var i=y.Ub();y.Tb(0,"li",21),y.ac("click",(function(){y.sc(i);var e=t.$implicit;return y.dc(2).onAgGridFilter(e.key)})),y.Tb(1,"a"),y.Dc(2),y.Sb(),y.Sb()}if(2&e){var n=t.index,o=t.$implicit;y.zb(2),y.Gc("",n+1,". ",o.title,"")}}function Oi(e,t){if(1&e&&(y.Tb(0,"nz-form-item"),y.Tb(1,"nz-form-control"),y.Tb(2,"button",14),y.Dc(3,"L\u1ecdc"),y.Ob(4,"i",33),y.Sb(),y.Tb(5,"nz-dropdown-menu",null,34),y.Tb(7,"ul",17),y.Bc(8,Si,3,2,"ng-template",35),y.Sb(),y.Sb(),y.Sb(),y.Sb()),2&e){var i=y.rc(6),n=y.dc();y.zb(2),y.jc("nzTrigger","click")("nzDropdownMenu",i)("disabled",n.disabledAction),y.zb(6),y.jc("ngForOf",n.allFilterObj)("ngForTrackBy",n.allFilterObjTrackByKey)}}function Ci(e,t){1&e&&y.Ob(0,"i",38)}function ji(e,t){1&e&&y.Ob(0,"i",31),2&e&&y.jc("nzType","sync")("nzSpin",!0)}function zi(e,t){if(1&e){var i=y.Ub();y.Rb(0),y.Tb(1,"button",14),y.Bc(2,Ci,1,0,"i",36),y.Bc(3,ji,1,2,"i",11),y.Tb(4,"span"),y.Dc(5,"G\u1eedi Ticket"),y.Sb(),y.Sb(),y.Tb(6,"nz-dropdown-menu",null,37),y.Tb(8,"ul",17),y.Tb(9,"li",21),y.ac("click",(function(){return y.sc(i),y.dc().onSendHelpdesk("all")})),y.Tb(10,"a"),y.Dc(11,"1. G\u1eedi 3 b\u01b0\u1edbc"),y.Sb(),y.Sb(),y.Tb(12,"li",21),y.ac("click",(function(){return y.sc(i),y.dc().onSendHelpdesk("create_ticket")})),y.Tb(13,"a"),y.Dc(14,"2. G\u1eedi Ticket"),y.Sb(),y.Sb(),y.Tb(15,"li",21),y.ac("click",(function(){return y.sc(i),y.dc().onSendHelpdesk("add_note")})),y.Tb(16,"a"),y.Dc(17,"3. G\u1eedi note"),y.Sb(),y.Sb(),y.Tb(18,"li",21),y.ac("click",(function(){return y.sc(i),y.dc().onSendHelpdesk("add_note_with_img")})),y.Tb(19,"a"),y.Dc(20,"4. \u0110\xednh k\xe8m h\xecnh"),y.Sb(),y.Sb(),y.Tb(21,"li",21),y.ac("click",(function(){return y.sc(i),y.dc().onSendHelpdesk("close_ticket")})),y.Tb(22,"a"),y.Dc(23,"5. Theo d\xf5i + \u0110\xf3ng"),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Qb()}if(2&e){var n=y.rc(7),o=y.dc();y.zb(1),y.jc("nzTrigger","click")("nzDropdownMenu",n)("disabled",o.disabledAction),y.zb(1),y.jc("ngIf",!o.isSendTicket),y.zb(1),y.jc("ngIf",o.isSendTicket)}}function wi(e,t){1&e&&y.Ob(0,"i",44)}function Di(e,t){1&e&&y.Ob(0,"i",31),2&e&&y.jc("nzType","sync")("nzSpin",!0)}function Ii(e,t){if(1&e){var i=y.Ub();y.Tb(0,"li",21),y.ac("click",(function(){return y.sc(i),y.dc(2).onImportXlsx()})),y.Tb(1,"a"),y.Ob(2,"i",45),y.Dc(3,"N\u1ea1p d\u1eef li\u1ec7u"),y.Sb(),y.Sb()}}function xi(e,t){if(1&e){var i=y.Ub();y.Rb(0),y.Tb(1,"button",39),y.Bc(2,wi,1,0,"i",40),y.Bc(3,Di,1,2,"i",11),y.Tb(4,"span"),y.Dc(5,"N\u1ea1p / Xu\u1ea5t DL"),y.Sb(),y.Sb(),y.Tb(6,"nz-dropdown-menu",null,41),y.Tb(8,"ul",17),y.Bc(9,Ii,4,0,"li",18),y.Tb(10,"li",21),y.ac("click",(function(){return y.sc(i),y.dc().onExportXlsx()})),y.Tb(11,"a"),y.Ob(12,"i",42),y.Dc(13,"Xu\u1ea5t d\u1eef li\u1ec7u"),y.Sb(),y.Sb(),y.Tb(14,"li",21),y.ac("click",(function(){return y.sc(i),y.dc().onExportExcelMau()})),y.Tb(15,"a"),y.Ob(16,"i",43),y.Dc(17,"File m\u1eabu"),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Qb()}if(2&e){var n=y.rc(7),o=y.dc();y.zb(1),y.jc("nzDropdownMenu",n)("disabled",o.disabledAction),y.zb(1),y.jc("ngIf",!o.isRunImport),y.zb(1),y.jc("ngIf",o.isRunImport),y.zb(6),y.jc("ngIf",o.isRole("timport_xsl"))}}function Ai(e,t){if(1&e){var i=y.Ub();y.Tb(0,"li",21),y.ac("click",(function(){y.sc(i);var e=t.$implicit;return y.dc(2).showCustomColumnAgGrid(e)})),y.Tb(1,"a"),y.Dc(2),y.Sb(),y.Sb()}if(2&e){var n=t.$implicit,o=t.index;y.zb(2),y.Gc("",o+2,". ",n.grid_title,"")}}function Fi(e,t){if(1&e){var i=y.Ub();y.Rb(0),y.Tb(1,"button",46),y.Ob(2,"i",47),y.Dc(3,"Danh s\xe1ch m\u1eabu "),y.Sb(),y.Tb(4,"nz-dropdown-menu",null,48),y.Tb(6,"ul",49),y.Tb(7,"li",21),y.ac("click",(function(){return y.sc(i),y.dc().showColumnAgGrid("ALL")})),y.Tb(8,"a"),y.Dc(9,"1. Hi\u1ec3n th\u1ecb ALL"),y.Sb(),y.Sb(),y.Bc(10,Ai,3,2,"ng-template",35),y.Tb(11,"li",21),y.ac("click",(function(){return y.sc(i),y.dc().clickCopyAllRowToClipboard()})),y.Tb(12,"a"),y.Dc(13),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Qb()}if(2&e){var n=y.rc(5),o=y.dc();y.zb(1),y.jc("nzDropdownMenu",n)("nzTrigger","click")("disabled",o.disabledAction),y.zb(9),y.jc("ngForOf",o.allGridField)("ngForTrackBy",o.trackByAg),y.zb(3),y.Fc("",o.allGridField.length+2,". Sao ch\xe9p")}}function Vi(e,t){if(1&e){var i=y.Ub();y.Tb(0,"li",21),y.ac("click",(function(){return y.sc(i),y.dc().onDeleteMultiTicket()})),y.Ob(1,"i",22),y.Dc(2,"X\xf3a Ticket "),y.Sb()}}function Ni(e,t){if(1&e){var i=y.Ub();y.Tb(0,"li",21),y.ac("click",(function(){return y.sc(i),y.dc().onAutoFixTicket()})),y.Ob(1,"i",50),y.Dc(2,"T\u1ef1 \u0111\u1ed9ng s\u1eeda "),y.Sb()}}function Ri(e,t){if(1&e){var i=y.Ub();y.Tb(0,"li",21),y.ac("click",(function(){return y.sc(i),y.dc().createAgGridTemplate()})),y.Ob(1,"i",51),y.Dc(2,"T\u1ea1o/C\u1eadp nh\u1eadt m\u1eabu "),y.Sb()}}function Mi(e,t){if(1&e){var i=y.Ub();y.Tb(0,"li",21),y.ac("click",(function(){return y.sc(i),y.dc().onSendReport()})),y.Ob(1,"i",51),y.Dc(2,"G\u1eedi b\xe1o c\xe1o "),y.Sb()}}var Ui=function(){return["/admin"]};function Bi(e,t){1&e&&(y.Tb(0,"li",52),y.Tb(1,"a"),y.Ob(2,"i",53),y.Dc(3,"C\u1ea5u h\xecnh"),y.Sb(),y.Sb()),2&e&&y.jc("routerLink",y.lc(1,Ui))}function Li(e,t){if(1&e&&(y.Tb(0,"span"),y.Tb(1,"span",27),y.Dc(2," - "),y.Sb(),y.Tb(3,"span",28),y.Dc(4),y.Sb(),y.Sb()),2&e){var i=y.dc();y.zb(4),y.Fc("C=",i.data.length," ")}}function Ei(e,t){if(1&e&&(y.Tb(0,"div"),y.Ob(1,"nz-divider",56),y.Tb(2,"nz-upload",58),y.Tb(3,"a",59),y.Dc(4),y.Sb(),y.Sb(),y.Sb()),2&e){var i=y.dc(2);y.zb(2),y.jc("nzBeforeUpload",i.beforeUploadDir),y.zb(2),y.Ec(i.lblPathDir)}}function Gi(e,t){if(1&e&&(y.Tb(0,"label"),y.Tb(1,"span",64),y.Dc(2),y.Sb(),y.Tb(3,"span",65),y.Dc(4,"Running =>"),y.Sb(),y.Sb()),2&e){var i=y.dc(3);y.zb(2),y.Fc("[",null==i.msgObj?null:i.msgObj.action,"] ")}}function Ki(e,t){if(1&e&&(y.Rb(0),y.Ob(1,"nz-divider",56),y.Tb(2,"nz-input-group",60),y.Bc(3,Gi,5,1,"label",13),y.Tb(4,"label"),y.Dc(5,"Oki"),y.Tb(6,"span",61),y.Dc(7),y.Sb(),y.Tb(8,"i"),y.Dc(9,"+"),y.Sb(),y.Sb(),y.Tb(10,"label"),y.Dc(11,"Err"),y.Tb(12,"span",62),y.Dc(13),y.Sb(),y.Tb(14,"i"),y.Dc(15,"="),y.Sb(),y.Sb(),y.Tb(16,"label"),y.Dc(17,"TS"),y.Tb(18,"span",63),y.Dc(19),y.Sb(),y.Sb(),y.Sb(),y.Qb()),2&e){var i=y.dc(2);y.zb(3),y.jc("ngIf",i.isSendTicket),y.zb(4),y.Fc("[",(null==i.msgObj?null:i.msgObj.ok)||0,"]"),y.zb(6),y.Fc("[",(null==i.msgObj?null:i.msgObj.err)||0,"]"),y.zb(6),y.Fc("[",(null==i.msgObj?null:i.msgObj.total)||i.totalSelect,"]")}}function qi(e,t){if(1&e){var i=y.Ub();y.Tb(0,"div"),y.Ob(1,"nz-divider",56),y.Tb(2,"a",66),y.ac("click",(function(){return y.sc(i),y.dc(2).stopSendTicket()})),y.Tb(3,"span"),y.Dc(4,"D\u1eebng l\u1ea1i"),y.Sb(),y.Sb(),y.Sb()}}function Hi(e,t){if(1&e){var i=y.Ub();y.Rb(0),y.Tb(1,"div",54),y.Tb(2,"div",55),y.Ob(3,"nz-divider",56),y.Tb(4,"label",57),y.ac("ngModelChange",(function(e){return y.sc(i),y.dc().isStopTicketIfError=e})),y.Dc(5,"G\u1eb7p l\u1ed7i > D\u1eebng"),y.Sb(),y.Ob(6,"nz-divider",56),y.Tb(7,"label",57),y.ac("ngModelChange",(function(e){return y.sc(i),y.dc().isUpdateIfTicketExist=e})),y.Dc(8,"T\u1ea1o m\u1edbi + c\u1eadp nh\u1eadt"),y.Sb(),y.Bc(9,Ei,5,2,"div",13),y.Bc(10,Ki,20,4,"ng-container",13),y.Bc(11,qi,5,0,"div",13),y.Sb(),y.Sb(),y.Qb()}if(2&e){var n=y.dc();y.zb(4),y.jc("ngModel",n.isStopTicketIfError),y.zb(3),y.jc("ngModel",n.isUpdateIfTicketExist),y.zb(2),y.jc("ngIf",n.isViewUploadDir),y.zb(1),y.jc("ngIf",n.totalSelect>0||!!n.msgObj),y.zb(1),y.jc("ngIf",n.isSendTicket)}}var Pi,Yi,Wi,Xi,Qi=function(){return["ls_filter"]},Ji=function(){return["excel"]},Zi=function(){return["report"]},$i=((Wi=function(){function t(e,i,n,o,c,r,a,s,l,d,b){var h=this;u(this,t),this.gridField=e,this.cd=i,this.fb=n,this.ticketCtrl=o,this.excelCtrl=c,this.router=r,this.aRouter=a,this.cfigCtrl=s,this.shared=l,this.userCtrl=d,this.helpdesk=b,this.data=[],this.dataCache=[],this.msgObj={title:"K\u1ebft qu\u1ea3",total:0,ok:0,err:0,action:""},this.allImageUpload={},this.lblPathDir_=void 0,this.isViewUploadDir_=!1,this.agAllModule=hi.a,this.gridOptions=this.createAgOption(),this.gridApi=null,this.gridColumnApi=null,this.columnDefs=[],this.agFilterType="ALL",this.excelStyles=[{id:"header",interior:{color:"#CCCCCC",pattern:"Solid"},borders:{borderBottom:{color:"#5687f5",lineStyle:"Continuous",weight:1},borderLeft:{color:"#5687f5",lineStyle:"Continuous",weight:1},borderRight:{color:"#5687f5",lineStyle:"Continuous",weight:1},borderTop:{color:"#5687f5",lineStyle:"Continuous",weight:1}}}],this.showBtnUpdate=!1,this.isNew=!0,this.isSendTicket=!1,this.isLoadSearch=!1,this.isRunImport=!1,this.isDeleteStatus=!1,this.isClickShowColKpi=!1,this.isLoadWithChanel=!1,this.isHideFormCreate="block",this.isShowMsg=!1,this.isAutoLoadCate=!0,this.isUpdateIfTicketExist=!1,this.isStopTicketIfError=!1,this.fileImport=[],this.xlsxType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",this.agGridViewType=this.shared.getByKey("agGridViewType")||"DEFAULT",this.isViewSendHelpdesk=this.agGridViewType===pi.e,this.fileList=[],this.isInitPage=!0,this.autoCreate=!1,this.editTicket=null,this.nodeTicket=null,this.asyncInput=!1,this.KEY_GRID_TYPE="ticket_list",this.lblGrid={total:0,with:"Ticket",view:"STT > Z-A",countTicket:0,countChanel:0},this.groupTemp=0,this.indexStyle=0,this.defaultColDef={enableValue:!0,enableRowGroup:!0,enablePivot:!0,sortable:!1,resizable:!0,suppressMenu:!0},this.allFilterObj=[{key:"all",title:"T\u1ea5t c\u1ea3"},{key:"is_send_ticket",title:"\u0110\xe3 g\u1eedi ticket"},{key:"is_send_note",title:"\u0110\xe3 \u0111\xecnh th\xeam note"},{key:"is_upfile",title:"\u0110\xe3 \u0111\xecnh k\xe8m h\xecnh"},{key:"is_close_ticket",title:"\u0110\xe3 \u0111\xf3ng ticket"},{key:"no_send_ticket",title:"Ch\u01b0a g\u1eedi ticket"},{key:"no_send_note",title:"Ch\u01b0a th\xeam note"},{key:"no_upfile",title:"Ch\u01b0a \u0111\xednh k\xe8m h\xecnh"},{key:"no_close_ticket",title:"Ch\u01b0a \u0111\xf3ng ticket"},{key:"is_report",title:"\u0110\xe3 g\u1eedi b\xe1o c\xe1o"},{key:"no_report",title:"Ch\u01b0a g\u1eedi b\xe1o c\xe1o"}],this.runSendTicket=void 0,this.agGridCustom={},this.beforeUploadDir=function(e,t){return h.fileList=t,h.lblPathDir_="(".concat(t.length,") H\xecnh"),re.b.getBase64(e).then((function(t){return Object(S.a)(h,void 0,void 0,regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=e.name.toLowerCase(),i.next=3,t;case 3:this.allImageUpload[n]=i.sent;case 4:case"end":return i.stop()}}),i,this)})))})),!1}}return l(t,[{key:"ngOnInit",value:function(){var e=this,t=this.shared.catalogs.isAutoLoadCate;this.isAutoLoadCate=!!Object(re.i)(t)||t,this.userDetail=this.userCtrl.read(),this.gridField.getColumnAgFromCache(pi.b).subscribe((function(t){e.agColumnFix=t.column_fix,e.columnDefs=e.agColumnFix.def})),this.isHideFormCreate=this.shared.getByKey("isHideFormCreate");var i=new Date,n=new Date;this.searchForm=this.fb.group({ticketOn:[[i,n]],withChanel:[!1],hideFormCreate:["none"===this.isHideFormCreate]}),this.searchForm.get("withChanel").valueChanges.subscribe((function(t){e.showTicketWithChanel(t)})),this.searchForm.get("hideFormCreate").valueChanges.subscribe((function(t){e.isHideFormCreate=t?"none":"block",e.shared.setByKey("isHideFormCreate",e.isHideFormCreate),t||(e.isViewSendHelpdesk=!1,e.disableWithChanel(!1),e.showCustomColumnAgGrid(e.allGridFieldMap[pi.d]||{}))})),this.getRowClass=function(e){return"ag-grid-row-style-"+(0==e.node.rowIndex%2?0:1)},this.initSearchFromQuery()}},{key:"initSearchFromQuery",value:function(){var e=this;this.aRouter.queryParamMap.subscribe((function(t){e.searchForm.get("ticketOn").setValue([re.d.parseDate(t.get("from"),new Date),re.d.parseDate(t.get("to"),new Date)])}))}},{key:"disableWithChanel",value:function(e){console.log(e);var t=this.searchForm.get("withChanel");e?(t.setValue(!e),t.disable()):t.enable()}},{key:"isRole",value:function(e){return this.userDetail.isRole(e)}},{key:"ngAfterViewInit",value:function(){this.cd.detectChanges()}},{key:"ngOnChanges",value:function(e){console.log(e)}},{key:"trackByAg",value:function(e,t){return"".concat(t.grid_code,":").concat(t.grid_code)}},{key:"createAgOption",value:function(){var e=this;return{rowSelection:"multiple",sideBar:!0,excelStyles:this.excelStyles,getRowClass:this.getRowClass,onRowClicked:function(t){return e.onRowClicked(t)},isExternalFilterPresent:function(){return e.agFilterPresent()},doesExternalFilterPass:function(t){return e.agFilterPass(t)}}}},{key:"agFilterPresent",value:function(){return"ALL"!==this.agFilterType}},{key:"agFilterPass",value:function(e){var t=e.data;switch(this.agFilterType){case"is_send_ticket":return!Object(re.l)(t.ticket_number);case"no_send_ticket":return Object(re.l)(t.ticket_number);case"is_send_note":return!Object(re.l)(t.note_id);case"no_send_note":return Object(re.l)(t.note_id);case"is_close_ticket":return 3===t.status;case"no_close_ticket":return 3!==t.status;case"is_upfile":return Object(re.m)(t.is_upfile);case"no_upfile":return!Object(re.m)(t.is_upfile);case"is_report":return Object(re.m)(t.is_greport);case"no_report":return!Object(re.m)(t.is_greport);default:return!0}}},{key:"allFilterObjTrackByKey",value:function(e,t){return t.key}},{key:"onAgGridFilter",value:function(e){this.agFilterType=e,this.gridApi.onFilterChanged()}},{key:"onGridReady",value:function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,qe.a.fixColDef(this.userDetail,this.gridApi),this.showCustomColumnAgGrid(this.allGridFieldMap.ag_default)}},{key:"defIfNull",value:function(e,t){return Object(re.i)(e)?null:t}},{key:"onSaveTicket",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nodeTicket;if(!e.isNew||!Object(re.i)(e.ticket)){var n=(e=Object.assign({isRefresh:!0},e)).ticket;Object(Oe.a)("").pipe(Object(Se.a)((function(o){if(Object(re.i)(i)||e.isNew){var c=t.gridApi.applyTransaction({add:[n]});t.nodeTicket=c.add[0],t.editTicket=n,t.dataCache.push(n),t.refreshRow(i=t.nodeTicket)}else Object(re.i)(i)||t.refreshRow(i,n)}))).subscribe((function(){}))}}},{key:"clickCopyAllRowToClipboard",value:function(){var e=!1;0==this.gridApi.getSelectedRows().length>0&&(this.gridApi.selectAll(),e=!0),this.gridApi.copySelectedRowsToClipboard(!1),e&&this.gridApi.deselectAll(),this.shared.alert.success("\u0110\xe3 sao ch\xe9p xong, gi\u1edd v\xe0o excel \u0111\u1ec3 d\xe1n (Ctrl + V).")}},{key:"isSelectRow",value:function(){return this.gridApi.getSelectedRows().length>0}},{key:"clickNewTicket",value:function(){this.isNew=!0,this.editTicket=void 0}},{key:"onDeleteMultiTicket",value:function(){var t=this,i=this.gridApi.getSelectedNodes();0!==i.length?(this.isShowMsg=!0,this.msgObj={title:"X\xf3a d\u1eef li\u1ec7u",total:i.length,ok:0,err:0},this.shared.modal.warning({nzTitle:"C\u1ea3nh b\xe1o !!",nzClosable:!1,nzOkText:"X\xf3a",nzCancelText:"\u0110\xf3ng",nzContent:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a ".concat(i.length," d\xf2ng \u0111\xe3 ch\u1ecdn?"),nzOnOk:function(){var n=t.shared.loading("\u0110ang x\xf3a d\u1eef li\u1ec7u"),o=Object(Oe.a).apply(void 0,e(i)).pipe(Object(Te.a)((function(e){return Object(Oe.a)(e).pipe(Object(ye.a)(1e3))}))).pipe(Object(O.a)((function(e){return t.ticketCtrl.deleteOne(e.data.ticket_id).subscribe(),Object(Oe.a)(e)}))).subscribe((function(e){t.msgObj.ok++,t.onRemoveNode(e),t.shared.alert.success("[".concat(e.data.ticket_id,"] \u0110\xe3 x\xf3a ticket xong."))}),(function(e){t.msgObj.err++,console.warn(e),o.unsubscribe()})),c=Object(Ce.a)(100).subscribe((function(){o.closed&&(t.shared.alert.remove(n.messageId),c.unsubscribe())}))}})):this.shared.alert.info("Vui l\xf2ng ch\u1ecdn d\xf2ng c\u1ea7n x\xf3a.")}},{key:"onAutoFixTicket",value:function(){var t=this,i=this.gridApi.getSelectedNodes();0!==i.length?(this.visibleColumn("send_status",!0),this.isShowMsg=!0,this.msgObj={title:"S\u1eeda d\u1eef li\u1ec7u",total:i.length,ok:0,err:0},this.shared.modal.create({nzClosable:!1,nzOkText:"S\u1eeda d\u1eef li\u1ec7u",nzCancelText:"Kh\xf4ng",nzTitle:"C\u1ea3nh b\xe1o !!",nzContent:"B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n s\u1eeda d\xf2ng \u0111\u01b0\u1ee3c ch\u1ecdn ?",nzOnOk:function(){var n=t.shared.loading("\u0110ang s\u1eeda d\u1eef li\u1ec7u"),o=i.map((function(e){return Object(Oe.a)(e.data).pipe(Object(Se.a)((function(i){return t.refreshRow(e,{send_status:!0})})),Object(O.a)((function(i){return t._handleAutoFixTicket(e)})))})),c=Object(Oe.a).apply(void 0,e(o)).pipe(Object(Te.a)((function(e){return e.pipe(Object(ye.a)(5e3))}))).subscribe((function(e){t.refreshRow(e.node,Object.assign(Object.assign({},e.data),{send_status:e.status})),"error"===e.status?t.msgObj.err++:t.msgObj.ok++}),(function(e){t.msgObj.err++,t.refreshRow(e.node,{send_status:"error"})})),r=Object(Ce.a)(100).subscribe((function(){c.closed&&(r.unsubscribe(),t.shared.alert.remove(n.messageId),t.visibleColumn("send_status",!1),t.clickAsyncTicket())}))}})):this.shared.alert.info("B\u1ea1n ch\u01b0a ch\u1ecdn d\xf2ng \u0111\u1ec3 s\u1eeda.")}},{key:"_handleAutoFixTicket",value:function(e){var t=this;return new je.a((function(i){t.nodeTicket=e,t.ticketForm.setTicket(e.data,!0),t.ticketForm.autoFixTicket(null,!0),t.ticketForm.onSaveTicket(!1),i.next({data:{},node:e,status:"success"}),i.complete()}))}},{key:"clickConfigAccount",value:function(){this.router.navigate(["/account"])}},{key:"clickQuestions",value:function(){this.router.navigate(["/questions"])}},{key:"onRowClicked",value:function(e){var t=this;this.nodeTicket=e.node,!0===this.asyncInput?this.shared.modal.confirm({nzTitle:"Th\xf4ng b\xe1o",nzContent:"B\u1ea1n \u0111ang nh\u1eadp li\u1ec7u th\xf4ng tin ticket. B\u1ea1n c\xf3 mu\u1ed1n c\u1eadp nh\u1eadt l\u1ea1i th\xf4ng tin t\u1eeb danh s\xe1ch v\u1eeba click.",nzCancelText:"Kh\xf4ng",nzOnCancel:function(){return console.log("Kh\xf4ng c\u1eadp nh\u1eadt th\xf4ng tin v\u1eeda click t\u1eeb danh s\xe1ch")},nzOkText:"C\u1eadp nh\u1eadt",nzOnOk:function(){return t.clickEditTicket(e.data)}}):this.clickEditTicket(e.data)}},{key:"clickEditTicket",value:function(e){re.f.log("clickEditTicket()",e),this.editTicket=null,this.isLoadWithChanel||((e.chanels||[]).sort((function(e,t){return e.position-t.position})),this.editTicket=e,this.isNew=!1)}},{key:"onRemoveTicket",value:function(e){console.log("[".concat(e.id,"] X\xf3a Ticket")),this.onRemoveNode(this.nodeTicket)}},{key:"onRemoveNode",value:function(e){this.gridApi.applyTransaction({remove:[e.data]})}},{key:"clickLogout",value:function(){this.cfigCtrl.read().clear(this.shared),this.shared.navigateLogin(this.router)}},{key:"clickRemoveCache",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];re.f.log("-- Xo\xe1 Cache --");var i=t?this.shared.loading("\u0110ang x\xf3a b\u1ed9 nh\u1edb"):void 0;this.cfigCtrl.clearAllCache().subscribe((function(t){void 0!==i&&(e.shared.alert.remove(i.messageId),e.shared.alert.success(t.msg,{nzDuration:2e3}))}),(function(e){console.warn(e)}))}},{key:"sortGridByIndex",value:function(e){Object(re.i)(this.gridApi)||(this.gridColumnApi.applyColumnState({state:[{colId:"index_stt",sort:e}]}),this.lblGrid.view="STT > "+("asc"===e?"A-Z":"Z-A"))}},{key:"showColumnAgGrid",value:function(e){var t=e;switch("object"==typeof e&&(t=e.grid_code),this.shared.setByKey("agGridViewType",t),this.agGridViewType=t,this.isViewSendHelpdesk=!1,this.disableWithChanel(this.isViewToolSendTicket),t){case"ALL":this.gridColumnApi.setColumnsVisible(this.agColumnFix.id,!0);break;case"DEFAULT":this.gridColumnApi.resetColumnState();break;case"REPORT_KPI":this.sortGridByIndex("asc"),this.searchForm.controls.withChanel.setValue(!0);break;case"BODY_EMAIL":!0===this.isLoadWithChanel&&this.searchForm.get("withChanel").setValue(!1),this.visibleColumns(["content_copy"],!0);break;case pi.e:this.isViewSendHelpdesk=!0,this.msgObj=void 0,this.searchForm.get("withChanel").setValue(!1),this.searchForm.get("hideFormCreate").setValue(!0)}"object"==typeof e&&qe.a.showOnlyColumns(this.gridColumnApi,this.agColumnFix.id,e)}},{key:"resetDataAgrid",value:function(){this.data=[],this.dataCache=[],this.isShowMsg=!1,this.showBtnUpdate=!1,this.lblGrid.countTicket=0,this.lblGrid.countChanel=0}},{key:"clickAsyncTicket",value:function(e){var t=this;if(!this.searchForm.invalid){this.resetDataAgrid(),this.editTicket=void 0,this.nodeTicket=void 0,this.lblPathDir_=void 0,this.isLoadSearch=!0,this.allImageUpload={},Object(re.i)(e)||this.searchForm.get("withChanel").setValue(e);var i=this.searchForm.value;this.isLoadWithChanel=!0===i.withChanel;var n=new k.d("en-US").transform(i.ticketOn[0],"yyyy-MM-dd")+"T00:00:00",o=new k.d("en-US").transform(i.ticketOn[1],"yyyy-MM-dd")+"T23:59:59",c=this.shared.loading("\u0110ang L\u1ea5y d\u1eef li\u1ec7u <br/>- T\u1eeb ng\xe0y: <b>".concat(n,"</b> <br/> - \u0110\u1ebfn ng\xe0y: <b>").concat(o,"</b>"));this.ticketCtrl.findByCreateOn(n,o).subscribe((function(e){var i=e.content||[];t.lblGrid.countTicket=i.length,t.dataCache=i,t.isLoadWithChanel?(t.convertTicketByCheckViewChanel(i),t.lblGrid.countChanel=t.data.length,t.sortGridByIndex("asc")):(t.data=i,t.sortGridByIndex("asc")),t.isLoadSearch=!1,t.shared.alert.remove(c.messageId),t.shared.alert.success("[".concat(t.data.length,"] L\u1ea5y Ticket xong r\u1ed3i.")),t.cd.detectChanges()}),(function(e){t.isLoadSearch=!1,t.shared.alert.remove(c.messageId),re.f.log("X\u1ea3y ra l\u1ed7i l\u1ea5y d\u1eef li\u1ec7u:",e)}))}}},{key:"clickRefreshConfig",value:function(){}},{key:"showTicketWithChanel",value:function(e){Object(re.i)(e)&&(e=this.searchForm.get("withChanel").value),this.isLoadWithChanel=!0===e,!0!==e?this.data=this.dataCache:this.convertTicketByCheckViewChanel()}},{key:"convertTicketByCheckViewChanel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dataCache;for(var t in console.log("convertTicketByCheckViewChanel()"),this.data=[],e)for(var i=e[t],n=0;n<i.chanels.length;n++){var o=Object.assign({},i);o.first_chanel=o.chanels[n],this.data.push(o)}}},{key:"visibleColumn",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.gridColumnApi.setColumnVisible(e,t)}},{key:"visibleColumns",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];qe.a.visibleColumns(this.gridColumnApi,this.agColumnFix.id,e,t,i)}},{key:"getAllRowSend",value:function(){if(this.isLoadWithChanel)return this.shared.modal.warning({nzContent:"Vui l\xf2ng b\u1ecf check `K\xeanh`"}),[];var e=this.gridApi.getSelectedNodes();return 0===e.length?(this.shared.modal.warning({nzContent:"Vui l\xf2ng ch\u1ecdn ticket \u0111\u1ec3 g\u1eedi"}),[]):(this.visibleColumn("send_status",!0),e)}},{key:"refreshRow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};qe.a.refreshRow(this.gridApi,e,t)}},{key:"onSendHelpdesk",value:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";this.showColumnAgGrid(pi.e);var n=this.getAllRowSend();if(0!=n.length){var o=["all","add_note_with_img"].includes(i);if(o&&this.isViewUploadDir&&Object(re.h)(this.allImageUpload))this.shared.modal.warning({nzTitle:"C\u1ea3nh b\xe1o !!",nzContent:"Vui l\xf2ng ch\u1ecdn th\u01b0 m\u1ee5c ch\u1ee9a h\xecnh \u0111\xednh k\xe8m."});else{this.isShowMsg=!0,this.isSendTicket=!0,this.msgObj={title:"G\u1eedi Ticket",total:n.length,ok:0,err:0,action:i},o=o&&!Object(re.h)(this.allImageUpload);var c=n.map((function(e){return Object(Oe.a)(e.data.ticket_id).pipe(Object(Se.a)((function(i){return t.refreshRow(e,{send_status:!0})})),Object(O.a)((function(n){return t.handleSendTicket(e,i,o)})))})),r=Object(Oe.a).apply(void 0,e(c)).pipe(Object(Te.a)((function(e){return e.pipe(Object(ye.a)(1e3))})));this.runSendTicket=r.subscribe((function(e){t.refreshRow(e.node,Object.assign(Object.assign({},e.data),{send_status:e.status})),"error"===e.status?(t.msgObj.err++,t.showErrorAndStop(t.runSendTicket,e.node.data.ticket_id,e.data.error)):t.msgObj.ok++}),(function(e){t.msgObj.err++,t.refreshRow(e.node,{send_status:"error"}),t.showErrorAndStop(t.runSendTicket,e.node.data.ticket_id,e.error)}));var a=Object(Ce.a)(500).subscribe((function(e){!Object(re.i)(t.runSendTicket)&&t.runSendTicket.closed&&(t.isSendTicket=!1,a.unsubscribe())}),Object(_e.a)(1))}}}},{key:"handleSendTicket",value:function(e,t,n){var o=this;t=Object(re.l)(t)||"all"===t?null:t;var c=Object.assign({},e.data),r={isUpdate:this.isUpdateIfTicketExist,stopError:this.isStopTicketIfError,image_base64:!1===n?void 0:Object.keys(c.od_image).map((function(e){return e+".png"})).filter((function(e){return void 0!==o.allImageUpload[e]})).map((function(e){return i({},e,o.allImageUpload[e])})).reduce((function(e,t){return Object.assign(Object.assign({},e),t)}),{})};return null!==t&&-1===t.indexOf("close")||(c.stage={id:3,name:"Ho\xe0n th\xe0nh"}),this.helpdesk.allInOne(t,c.ticket_id,r).pipe(Object(O.a)((function(t){return Object(Oe.a)({status:"success",node:e,data:t})})),Object(si.a)((function(t){return Object(Oe.a)({status:"error",node:e,data:{error:t}})})))}},{key:"stopSendTicket",value:function(){var e=this;if(!Object(re.i)(this.runSendTicket)){this.runSendTicket.unsubscribe(),this.shared.alert.warning("\u0110\xe3 d\u1eebng g\u1eedi !!");var t=Object(Ce.a)(1e3).subscribe((function(i){e.clickAsyncTicket(),t.unsubscribe()}),Object(_e.a)(1))}}},{key:"showErrorAndStop",value:function(e,t,i){"SessionExpired"===i.code?(e.unsubscribe(),this.shared.modal.error({nzTitle:"C\u1ea3nh b\xe1o !!",nzContent:i.message})):(this.shared.alert.error("[".concat(t,"] > ").concat(i.message)),this.isStopTicketIfError&&e.unsubscribe())}},{key:"onExportExcelMau",value:function(){this.excelCtrl.downloadFile("/assets/reportkpi_mau.xlsx").subscribe()}},{key:"onExportXlsx",value:function(){qe.a.exportExcel(this.gridApi,this.gridColumnApi,{fileName:"report_kpi"})}},{key:"onImportXlsx",value:function(){return Object(S.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.isRunImport=!0,this.msgObj={title:"N\u1ea1p Excel",ok:0,err:0,total:0},this.shared.modal.create({nzTitle:"N\u1ea1p d\u1eef li\u1ec7u t\u1eeb file excel",nzContent:li.a,nzClassName:"select-file",nzClosable:!1,nzMaskClosable:!0,nzFooter:null,nzComponentParams:{isImportAndSave:!0}}).afterClose.pipe(Object(Se.a)((function(t){if(Object(re.i)(t))i.isRunImport=!1;else{t=Object.assign({isSave:!1,items:[]},t),i.data=[],i.dataCache=[],i.msgObj.total=t.items.length,i.msgObj.action=!0===t.isSave?"L\u01b0u":"Th\xeam";var n=t.isSave||!1,o=t.items.map((function(e){return i.prepareTicketFromXlsx(e)})),c=Object(Oe.a).apply(void 0,e(o)).pipe(Object(Te.a)((function(e){return Object(Oe.a)(e).pipe(Object(ye.a)(2e3))}))).subscribe((function(e){console.log(e),i.msgObj.ok++,n?(i.ticketForm.isAutoCreate=!0,i.ticketForm.setTicket(e,!0),i.ticketForm.onSaveTicket(),i.onSaveTicket({isNew:!0,ticket:i.ticketForm.editTicket})):i.onSaveTicket({isNew:!0,ticket:e})}),(function(e){i.msgObj.err++,console.warn(e)})),r=Object(Ce.a)(1e3).subscribe((function(e){c.closed&&(i.isRunImport=!1,r.unsubscribe())}))}}))).subscribe();case 1:case"end":return t.stop()}}),t,this)})))}},{key:"prepareTicketFromXlsx",value:function(e){var t=Object.assign({},e);if(["software","group_help","support_help","product_id","chanels"].forEach((function(e){return delete t[e]})),!Object(re.l)(e.chanels)){var i=e.chanels.split(",").map((function(e){return e.trim()})),n=this.ticketForm.chanels.filter((function(e){return i.includes(e.extend_code)}));n.length>0&&(t.chanels=n)}if(!Object(re.l)(e.software)){var o=e.software.trim(),c=this.ticketForm.softwares.filter((function(e){return e.code===o}));c.length>0&&(t.software=c[0])}if(!Object(re.l)(e.group_help)){var r=e.group_help.trim(),a=this.ticketForm.ghelps.filter((function(e){return e.code===r}));a.length>0&&(t.group_help=a[0])}if(!Object(re.l)(e.support_help)){var s=e.support_help.trim(),l=this.ticketForm.chanels.filter((function(e){return e.extend_code===s}));l.length>0&&(t.support_help=l[0])}if(!Object(re.l)(e.product_id)){var u=e.product_id.trim(),d=this.ticketForm.products.filter((function(e){return e.id===u}));d.length>0&&(t.product=d[0])}return t}},{key:"isShowTool",value:function(e){var t=this;return"tool3"===e?this.totalSelect>0&&["delete_list","fix_row"].filter((function(e){return t.userDetail.isRole(e)})).length>0:"tool4"===e&&this.agGridViewType===pi.e}},{key:"showCustomColumnAgGrid",value:function(e){this.showColumnAgGrid(e),this.agGridCustom=e}},{key:"createAgGridTemplate",value:function(){var e=Object.assign({grid_type:this.KEY_GRID_TYPE},!0===this.agGridCustom.is_system?void 0:this.agGridCustom,{columns:this.gridColumnApi.getAllDisplayedColumns()});this.shared.modal.create({nzTitle:"T\u1ea1o / C\u1eadp nh\u1eadt m\u1eabu",nzFooter:null,nzClosable:!1,nzWidth:"360px",nzContent:fi,nzComponentParams:{data:e,count:this.allGridField.length}})}},{key:"handleUpload",value:function(){console.log(this.allImageUpload)}},{key:"onSendReport",value:function(){this.router.navigateByUrl("/send-report")}},{key:"isViewToolSendTicket",get:function(){return this.agGridViewType===pi.e}},{key:"lblPathDir",get:function(){return this.lblPathDir_||"Th\u01b0 m\u1ee5c h\xecnh"}},{key:"allGridFieldMap",get:function(){return this.userCtrl.read().getAgField(this.KEY_GRID_TYPE)||{}}},{key:"allGridField",get:function(){return Object.values(this.allGridFieldMap).sort((function(e,t){return e.index-t.index}))}},{key:"isViewUploadDir",get:function(){return this.isViewSendHelpdesk&&(this.isViewUploadDir_||this.totalSelect>0)}},{key:"countTicket",get:function(){return this.dataCache.length||0}},{key:"totalSelect",get:function(){return Object(re.i)(this.gridApi)?0:this.gridApi.getSelectedRows().length}},{key:"disabledAction",get:function(){return this.isLoadSearch||this.isSendTicket||this.isRunImport}},{key:"AgridHeader",get:function(){return this.gridColumnApi.getAllDisplayedColumns().map((function(e){return i({},e.getColId(),e.getColDef().headerName)}))}}]),t}()).\u0275fac=function(e){return new(e||Wi)(y.Nb(ui.a),y.Nb(y.h),y.Nb(m.e),y.Nb(ne.a),y.Nb(oe.a),y.Nb(g.d),y.Nb(g.a),y.Nb(ce.a),y.Nb(ie.a),y.Nb(te.a),y.Nb(bi))},Wi.\u0275cmp=y.Hb({type:Wi,selectors:[["t2t-table"]],viewQuery:function(e,t){var i;1&e&&(y.Hc(mi,!0),y.Hc(ki,!0),y.Hc(vi,!0),y.Hc(Ti,!0)),2&e&&(y.qc(i=y.bc())&&(t.agrid=i.first),y.qc(i=y.bc())&&(t.ticketForm=i.first),y.qc(i=y.bc())&&(t.importComp=i.first),y.qc(i=y.bc())&&(t.linkDown=i.first))},features:[y.xb],decls:65,vars:35,consts:[[3,"ticket","isAutoLoadCate","asyncInput","save","remove"],["ticketForm",""],[1,"ag-ticket"],[1,"row","tool-2"],[1,"col-12"],["nz-form","",1,"search-form",3,"nzLayout","formGroup"],[2,"margin-left","2px","width","300px"],["formControlName","ticketOn",3,"nzFormat"],["nz-checkbox","","formControlName","withChanel"],["nz-checkbox","","formControlName","hideFormCreate"],["type","button","nz-button","","nzType","dash",3,"disabled","click"],["nz-icon","",3,"nzType","nzSpin",4,"ngIf"],["nz-icon","","nzType","search","theme","outline",4,"ngIf"],[4,"ngIf"],["nz-button","","nz-dropdown","",3,"nzTrigger","nzDropdownMenu","disabled"],["nz-icon","","nzType","appstore","nzTheme","outline"],["nzMenuOther",""],["nz-menu",""],["nz-menu-item","",3,"click",4,"ngIf"],["nz-icon","","nzType","export","theme","outline"],["nzMenuAccount",""],["nz-menu-item","",3,"click"],["nz-icon","","nzType","delete"],["nz-icon","","nzType","question-circle"],["nz-menu-item","",3,"routerLink",4,"ngIf"],["nz-icon","","nzType","logout"],[1,"countRow"],[1,"lbl"],[1,"number"],[2,"width","100%","height","100%"],["minHeight","300px",3,"options","modules","columns","rows","gridReady"],["nz-icon","",3,"nzType","nzSpin"],["nz-icon","","nzType","search","theme","outline"],["nz-icon","","nzType","down"],["nzMenuFilter",""],["ngFor","",3,"ngForOf","ngForTrackBy"],["nz-icon","","nzType","cloud","theme","outline",4,"ngIf"],["nzMenuSendHelpdesk",""],["nz-icon","","nzType","cloud","theme","outline"],["nz-button","","nz-dropdown","","nzTrigger","click",3,"nzDropdownMenu","disabled"],["nz-icon","","nzType","solution",4,"ngIf"],["nzMenuNXDL",""],["nz-icon","","nzType","download"],["nz-icon","","nzType","file-excel"],["nz-icon","","nzType","solution"],["nz-icon","","nzType","upload"],["nz-button","","nz-dropdown","",3,"nzDropdownMenu","nzTrigger","disabled"],["nz-icon","","nzType","bars"],["nzMenuReport",""],["nz-menu","",1,"ag_grid"],["nz-icon","","nzType","retweet"],["nz-icon","","nzType","file-add","nzTheme","outline"],["nz-menu-item","",3,"routerLink"],["nz-icon","","nzType","setting"],[1,"row","tool-3","mb-2","mt-2"],[1,"col-12","d-flex"],["nzType","vertical",1,"align-self-center"],["nz-checkbox","",3,"ngModel","ngModelChange"],["nzAccept","image/png","nzMultiple","",3,"nzBeforeUpload"],[1,"link_dir"],[1,"send-log","d-flex","align-items-center"],[1,"oki"],[1,"err"],[1,"total"],[1,"act"],[1,"run"],[1,"btnStopSend",3,"click"]],template:function(e,t){if(1&e&&(y.Tb(0,"t2t-ticket-form",0,1),y.ac("asyncInput",(function(e){return t.asyncInput=e}))("save",(function(e){return t.onSaveTicket(e)}))("remove",(function(e){return t.onRemoveTicket(e)})),y.Sb(),y.Tb(2,"div",2),y.Tb(3,"div",3),y.Tb(4,"div",4),y.Tb(5,"form",5),y.Tb(6,"nz-form-item"),y.Tb(7,"nz-form-control",6),y.Ob(8,"nz-range-picker",7),y.Sb(),y.Sb(),y.Tb(9,"nz-form-item"),y.Tb(10,"nz-form-control"),y.Tb(11,"label",8),y.Dc(12,"K\xeanh"),y.Sb(),y.Tb(13,"label",9),y.Dc(14,"\u1ea8n Form"),y.Sb(),y.Sb(),y.Sb(),y.Tb(15,"nz-form-item"),y.Tb(16,"nz-form-control"),y.Tb(17,"button",10),y.ac("click",(function(){return t.clickAsyncTicket()})),y.Bc(18,yi,1,2,"i",11),y.Bc(19,_i,1,0,"i",12),y.Dc(20,"L\u1ea5y d\u1eef li\u1ec7u "),y.Sb(),y.Sb(),y.Sb(),y.Bc(21,Oi,9,5,"nz-form-item",13),y.Tb(22,"nz-form-item"),y.Tb(23,"nz-form-control"),y.Bc(24,zi,24,5,"ng-container",13),y.Bc(25,xi,18,5,"ng-container",13),y.Bc(26,Fi,14,6,"ng-container",13),y.Tb(27,"button",14),y.Ob(28,"i",15),y.Dc(29,"Kh\xe1c "),y.Sb(),y.Tb(30,"nz-dropdown-menu",null,16),y.Tb(32,"ul",17),y.Bc(33,Vi,3,0,"li",18),y.Bc(34,Ni,3,0,"li",18),y.Bc(35,Ri,3,0,"li",18),y.Bc(36,Mi,3,0,"li",18),y.Sb(),y.Sb(),y.Tb(37,"button",14),y.Ob(38,"i",19),y.Dc(39,"T\xe0i kho\u1ea3n "),y.Sb(),y.Tb(40,"nz-dropdown-menu",null,20),y.Tb(42,"ul",17),y.Tb(43,"li",21),y.ac("click",(function(){return t.clickRemoveCache()})),y.Tb(44,"a"),y.Ob(45,"i",22),y.Dc(46,"X\xf3a Cache"),y.Sb(),y.Sb(),y.Tb(47,"li",21),y.ac("click",(function(){return t.clickQuestions()})),y.Tb(48,"a"),y.Ob(49,"i",23),y.Dc(50,"C\xe2u h\u1ecfi"),y.Sb(),y.Sb(),y.Bc(51,Bi,4,2,"li",24),y.Tb(52,"li",21),y.ac("click",(function(){return t.clickLogout()})),y.Tb(53,"a"),y.Ob(54,"i",25),y.Dc(55,"\u0110\u0103ng xu\u1ea5t"),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Tb(56,"label",26),y.Tb(57,"span",27),y.Dc(58,"T\u1ed5ng s\u1ed1: "),y.Sb(),y.Tb(59,"span",28),y.Dc(60),y.Sb(),y.Bc(61,Li,5,1,"span",13),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Bc(62,Hi,12,5,"ng-container",13),y.Tb(63,"div",29),y.Tb(64,"cy-ag-table",30),y.ac("gridReady",(function(e){return t.onGridReady(e)})),y.Sb(),y.Sb(),y.Sb()),2&e){var i=y.rc(31),n=y.rc(41);y.yc("display",t.isHideFormCreate),y.jc("ticket",t.editTicket)("isAutoLoadCate",t.isAutoLoadCate),y.zb(5),y.jc("nzLayout","inline")("formGroup",t.searchForm),y.zb(3),y.jc("nzFormat","yyyy-MM-dd"),y.zb(9),y.jc("disabled",t.disabledAction),y.zb(1),y.jc("ngIf",t.isLoadSearch),y.zb(1),y.jc("ngIf",!t.isLoadSearch),y.zb(2),y.jc("ngIf",t.userDetail.isRole(y.lc(32,Qi))),y.zb(3),y.jc("ngIf",t.isShowTool("tool4")),y.zb(1),y.jc("ngIf",t.userDetail.isRole(y.lc(33,Ji))),y.zb(1),y.jc("ngIf",t.userDetail.isRole(y.lc(34,Zi))),y.zb(1),y.jc("nzTrigger","click")("nzDropdownMenu",i)("disabled",t.disabledAction),y.zb(6),y.jc("ngIf",t.isRole("delete_list")),y.zb(1),y.jc("ngIf",t.isRole("fix_row")),y.zb(1),y.jc("ngIf",t.isRole("create_grid")),y.zb(1),y.jc("ngIf",t.isRole("send_report")),y.zb(1),y.jc("nzTrigger","click")("nzDropdownMenu",n)("disabled",t.disabledAction),y.zb(14),y.jc("ngIf",t.isRole("admin")),y.zb(9),y.Fc("T=",t.countTicket," "),y.zb(1),y.jc("ngIf",t.isLoadWithChanel),y.zb(1),y.jc("ngIf",t.isViewToolSendTicket),y.zb(2),y.jc("options",t.gridOptions)("modules",t.agAllModule)("columns",t.columnDefs)("rows",t.data)}},directives:[ci,m.t,m.m,E.b,m.h,gi.c,E.c,gi.a,E.a,P.a,P.c,m.l,m.g,G.a,L.a,He.a,x.a,k.n,H.c,H.a,N.a,H.d,M.c,M.d,we.a,k.m,g.e,q.a,m.o,K.a,B.c],styles:[".ag-ticket{box-sizing:border-box;margin-bottom:40px;border-top:2px solid #2f54eb;padding-top:.5rem}.ag-ticket .fal{font-size:1rem;font-weight:inherit}.ag-ticket .fal.fa-exclamation-circle{color:var(--red)}.ag-ticket .fal.fa-times{color:var(--danger)}.ag-ticket .fal.fa-comment{color:var(--info)}ul.ag_grid .menu-header{padding:unset}ul.ag_grid .menu-header .title{padding:5px 12px}.send-log{width:unset}.send-log label{margin-right:5px}.send-log label i{margin-left:5px}.send-log label .err{color:var(--red)}.send-log label .oki{color:var(--success)}.send-log label .total{color:var(--indigo)}.send-log label .run{color:var(--info)}.send-log label .act{color:var(--primary)}a.link_dir{color:var(--red)!important}.ant-divider{top:-.3em}.search-form [nz-checkbox],.search-form nz-range-picker{margin-right:5px}.search-form.ant-form-inline .ant-form-item{margin-right:0}.search-form label.countRow .lbl{color:#007bff}.search-form label.countRow .number{color:red}.row.tool-3 .ant-form-item{margin:9px 0 15px}.row.tool-3 .ant-form-item-control{line-height:0}.row.tool-3 .col-send-result{font-weight:700}.row.tool-3 .col-send-result .ok{margin-left:5px;color:#007bff}.row.tool-3 .col-send-result .err{margin-left:5px;color:#dc3545}.row.tool-3 .col-send-result .total{margin-left:5px;color:#28a745}.row.tool-3 .btnStopSend{color:#0056b3;text-decoration:underline}[nz-menu]{min-width:200px}[nz-menu] .ant-divider-inner-text{padding:0 10px}.select-file .ant-modal-body{padding:0}"],encapsulation:2}),Wi),en=((Yi=function e(){u(this,e)}).\u0275mod=y.Lb({type:Yi}),Yi.\u0275inj=y.Kb({factory:function(e){return new(e||Yi)},imports:[[k.b,m.i,m.q,W.a,B.e,L.c,N.b],W.a]}),Yi),tn=((Pi=function e(){u(this,e)}).\u0275mod=y.Lb({type:Pi}),Pi.\u0275inj=y.Kb({factory:function(e){return new(e||Pi)},imports:[[k.b,m.i,m.q,W.a,L.c,N.b,K.b]]}),Pi),nn=[{path:"",component:$i}],on=((Xi=function e(){u(this,e)}).\u0275mod=y.Lb({type:Xi}),Xi.\u0275inj=y.Kb({factory:function(e){return new(e||Xi)},providers:[],imports:[[k.b,g.g.forChild(nn),v.d,m.i,m.q,ee,P.b,X,en,Y.a,tn,T.c,M.e,U,B.e,G.c,H.b,R,q.b,L.c,N.b,E.d,K.b]]}),Xi)}}])}();